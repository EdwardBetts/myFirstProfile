(function(){var e=angular.module("job_detail",["app.config","ui.router","app.django","app.utils","app.filter"]);var d=angular.injector(["app.django","app.utils"]);var a=d.get("tmpl");var b=d.get("api");var c=d.get("id_url");e.controller("jobDetailCtrl",["$scope",function(f){f.showDetail=false;f.nonzero=false;f.getParam=function(){var g=angular.element("#JS_praise_btn"),j=parseInt(g.attr("data-count")),i=g.attr("data-company_id"),h=g.attr("data-favour");f.nonzero=j&&j>0;f.count=j;f.company_id=i;f.favour=h&&h.toLowerCase()=="false";};f.getParam();f.toggleDetail=function(){f.showDetail=!f.showDetail;};f.praiseCompany=function(i){console.log(i);return false;if(f.lockPraise){return;}f.lockPraise=true;var g=f.data.data[0].has_favour,j=f.data.data[0].job__company__id,h=c(b.job.job_favour_company,j);$http.get(h).success(function(k){if(k&&k.status=="ok"){if(k.data.action=="favour"){f.data.data[0].has_favour=true;f.data.data[0].job__company__favour_count++;angular.element("#JS_praised").addClass("active");}else{f.data.data[0].has_favour=false;f.data.data[0].job__company__favour_count--;angular.element("#JS_praised").removeClass("active");}}f.lockPraise=false;}).error(function(){f.lockPraise=false;});};}]);})();