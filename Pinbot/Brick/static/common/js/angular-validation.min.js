(function(){angular.module("validation",["validation.provider","validation.directive"]);}).call(this);(function(){angular.module("validation.provider",[]).provider("$validation",function(){var h,i,g,d,a,c=this;var b=function(j){h=j;i=h.get("$rootScope");g=h.get("$http");d=h.get("$q");a=h.get("$timeout");};var f={};var e={};this.setExpression=function(j){angular.extend(f,j);return c;};this.getExpression=function(j){return f[j];};this.setDefaultMsg=function(j){angular.extend(e,j);return c;};this.getDefaultMsg=function(j){return e[j];};this.setErrorHTML=function(j){if(j.constructor!==Function){return;}c.getErrorHTML=j;return c;};this.getErrorHTML=function(j){return'<p class="validation-invalid">'+j+"</p>";};this.setSuccessHTML=function(j){if(j.constructor!==Function){return;}c.getSuccessHTML=j;return c;};this.getSuccessHTML=function(j){return'<p class="validation-valid">'+j+"</p>";};this.showSuccessMessage=true;this.showErrorMessage=true;this.checkValid=function(j){if(j.$valid===undefined){return false;}return(j&&j.$valid===true);};this.validate=function(o){var m=d.defer(),j=0;if(o===undefined){console.error("This is not a regular Form name scope");m.reject("This is not a regular Form name scope");return m.promise;}if(o.validationId){i.$broadcast(o.$name+"submit-"+o.validationId,j++);}else{if(o.constructor===Array){for(var l in o){i.$broadcast(o[l].$name+"submit-"+o[l].validationId,j++);}}else{for(var n in o){if(n[0]!=="$"&&o[n].hasOwnProperty("$dirty")){i.$broadcast(n+"submit-"+o[n].validationId,j++);}}}}m.promise.success=function(k){m.promise.then(function(p){k(p);});return m.promise;};m.promise.error=function(k){m.promise.then(null,function(p){k(p);});return m.promise;};a(function(){if(c.checkValid(o)){m.resolve("success");}else{m.reject("error");}});return m.promise;};this.validCallback=null;this.invalidCallback=null;this.reset=function(m){if(m===undefined){console.error("This is not a regular Form name scope");return;}if(m.validationId){i.$broadcast(m.$name+"reset-"+m.validationId);}else{if(m.constructor===Array){for(var j in m){i.$broadcast(m[j].$name+"reset-"+m[j].validationId);}}else{for(var l in m){if(l[0]!=="$"&&m[l].hasOwnProperty("$dirty")){i.$broadcast(l+"reset-"+m[l].validationId);}}}}};this.$get=["$injector",function(j){b(j);return{setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,validCallback:this.validCallback,invalidCallback:this.invalidCallback,reset:this.reset};}];});}).call(this);(function(){angular.module("validation.directive",["validation.provider"]).directive("validator",["$injector",function(i){var b=i.get("$validation"),f=i.get("$q"),c=i.get("$timeout");var e=function(n,k,m,p,q){var o,l=k||b.getDefaultMsg(m).success;if(p.messageId){o=angular.element(document.querySelector("#"+p.messageId));}else{o=n.next();}if(b.showSuccessMessage&&l){o.html(b.getSuccessHTML(l));o.css("display","");}else{o.css("display","none");}q.$setValidity(q.$name,true);if(p.validCallback){p.validCallback();}if(b.validCallback){b.validCallback(n);}return true;};var a=function(n,k,m,p,q){var o,l=k||b.getDefaultMsg(m).error;if(p.messageId){o=angular.element(document.querySelector("#"+p.messageId));}else{o=n.next();}if(b.showErrorMessage&&l){o.html(b.getErrorHTML(l));o.css("display","");}else{o.css("display","none");}q.$setValidity(q.$name,false);if(p.inValidCallback){p.inValidCallback();}if(b.invalidCallback){b.invalidCallback(n);}return false;};var d={};var j=function(x,p,w,l,n,v){var o=n.slice(0),z=o[0].trim(),y=z.indexOf("="),m=y===-1?z:z.substr(0,y),t=y===-1?null:z.substr(y+1),u=o.slice(1),s=m+"SuccessMessage",q=m+"ErrorMessage",r=b.getExpression(m),k={success:function(){e(p,w[s],m,x,l);if(u.length){return j(x,p,w,l,u,v);}else{return true;}},error:function(){return a(p,w[q],m,x,l);}};if(r===undefined){console.error('You are using undefined validator "%s"',m);if(u.length){return j(x,p,w,l,u,v);}else{return;}}if(r.constructor===Function){return f.all([b.getExpression(m)(v,x,p,w,t)]).then(function(A){if(A&&A.length>0&&A[0]){return k.success();}else{return k.error();}},function(){return k.error();});}else{if(r.constructor===RegExp){if(v!==undefined&&v!==null){return b.getExpression(m).test(v)?k.success():k.error();}else{return k.error();}}else{return k.error();}}};var h=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);};var g=function(){return(h()+h()+h()+h());};return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",initialValidity:"=initialValidity",validCallback:"&",invalidCallback:"&",messageId:"@"},link:function(p,o,m,q){var r=function(){};var l=m.validator.split(",");var n=q.validationId=g();var k;if(typeof p.initialValidity==="boolean"){k=p.initialValidity;}if(!p.messageId){o.after("<span></span>");}q.$setValidity(q.$name,k);p.$on(q.$name+"reset-"+n,function(){r();q.$setViewValue("");q.$setPristine();q.$setValidity(q.$name,undefined);q.$render();if(p.messageId){angular.element(document.querySelector("#"+p.messageId)).html("");}else{o.next().html("");}});(function(){p.$on(q.$name+"submit-"+n,function(u,t){var v=q.$viewValue,w=false;w=j(p,o,m,q,l,v);if(m.validMethod==="submit"){r();r=p.$watch("model",function(y,x){if(y===x){return;}if(y===undefined||y===null){y="";}w=j(p,o,m,q,l,y);});}var s=function(x){if(x){delete d[t];}else{d[t]=o[0];c(function(){d[Math.min.apply(null,Object.keys(d))].focus();},0);}};w.constructor===Object?w.then(s):s(w);});if(m.validMethod==="blur"){o.bind("blur",function(){var s=q.$viewValue;p.$apply(function(){j(p,o,m,q,l,s);});});return;}if(m.validMethod==="submit"||m.validMethod==="submit-only"){return;}p.$watch("model",function(s){if(q.$pristine&&q.$viewValue){q.$setViewValue(q.$viewValue);}else{if(q.$pristine){if(p.messageId){angular.element(document.querySelector("#"+p.messageId)).html("");}else{o.next().html("");}return;}}j(p,o,m,q,l,s);});})();c(function(){m.$observe("noValidationMessage",function(t){var s;if(p.messageId){s=angular.element(document.querySelector("#"+p.messageId));}else{s=o.next();}if(t=="true"||t===true){s.css("display","none");}else{if(t=="false"||t===false){s.css("display","block");}else{}}});});}};}]).directive("validationSubmit",["$injector",function(d){var e=d.get("$validation"),b=d.get("$timeout"),c=d.get("$parse");return{priority:1,require:"?ngClick",link:function a(h,g,f){var i=c(f.validationSubmit)(h);b(function(){g.off("click");g.on("click",function(j){j.preventDefault();e.validate(i).success(function(){c(f.ngClick)(h);});});});}};}]).directive("validationReset",["$injector",function(d){var e=d.get("$validation"),b=d.get("$timeout"),c=d.get("$parse");return{link:function a(h,g,f){var i=c(f.validationReset)(h);b(function(){g.on("click",function(j){j.preventDefault();e.reset(i);});});}};}]);}).call(this);