Array.prototype.remove=function(a){if(isNaN(a)||a>this.length){return false;}for(var b=0,c=0;b<this.length;b++){if(this[b]!=this[a]){this[c++]=this[b];}}this.length-=1;};(function(){var h=angular.module("app.process",["app.config","ui.router","app.django","app.utils"]);var c=angular.injector(["app.django"]);var b=c.get("tmpl");var d=c.get("api");var e=c.get("static_url");h.config(["$stateProvider","$urlRouterProvider",function(k,j){j.otherwise("/select_gender/");k.state("select_gender",{url:"/select_gender/",templateUrl:b("my_resume/select_gender.html"),controller:"selectGender"});k.state("select_city",{url:"/select_city/",templateUrl:b("my_resume/select_city.html"),controller:"selectCity"});k.state("select_position_category",{url:"/select_position_category/",templateUrl:b("my_resume/select_position_category.html"),controller:"selectPositionCategory"});k.state("select_category_tag",{url:"/select_category_tag/",templateUrl:b("my_resume/select_category_tag.html"),controller:"selectCategoryTag"});k.state("select_work_years",{url:"/select_work_years/",templateUrl:b("my_resume/select_workyears.html"),controller:"selectWorkyears"});k.state("select_degree",{url:"/select_degree/",templateUrl:b("my_resume/select_degree.html"),controller:"selectDegree"});k.state("select_field",{url:"/select_field/",templateUrl:b("my_resume/select_field.html"),controller:"selectField"});k.state("select_salary",{url:"/select_salary/",templateUrl:b("my_resume/select_salary.html"),controller:"selectSalary"});}]);h.controller("selectGender",["$scope","$http","$state",function(j,l,k){j.gender="";j.static_url=e;j.setGender=function(m){j.gender=m;$("a").removeClass("checked");$("#"+j.gender).addClass("checked");l.post(d.resume.select_gender,$.param({gender:j.gender})).success(function(n){k.go("select_city");}).error(function(){console.log("请求失败");});};l.get(d.resume.select_gender).success(function(m){j.gender=m.data.gender;if(j.gender!=""){$("#"+j.gender).addClass("checked");}f(k);}).error(function(){console.log("请求失败");});}]);h.controller("selectCity",["$scope","$http","$state",function(j,l,k){j.select_city=[];j.static_url=e;j.back=function(){k.go("select_gender");};j.isShow=function(m){if(m!=0){return true;}return false;};j.checkCity=function(n){var m=j.select_city.indexOf(n);if(m>=0){j.select_city.remove(m);$("."+n).removeClass("checked");}else{j.select_city.push(n);$("."+n).addClass("checked");}if(j.select_city.length!=0){$(".city_form_next_btn").css("display","block");$(".city_form_next_btn img").removeClass("hide").addClass("show");$("html, body").animate({scrollTop:$(document).height()},500);}else{$(".city_form_next_btn").css("display","none");$(".city_form_next_btn img").removeClass("show").addClass("hide");}};j.next=function(){l.post(d.resume.select_city,$.param({city:j.select_city})).success(function(m){k.go("select_position_category");}).error(function(){console.log("请求失败");});};j.checked_area=function(n){for(var m=0;m<j.data.expectation_area.length;m++){if(j.data.expectation_area[m].city__id==n.id){return true;}}return false;};j.check_first=function(m){if(m%3==0){return true;}return false;};j.check_second=function(m){if(m%2!=0){return true;}return false;};l.get(d.resume.select_city).success(function(n){j.data=n.data;for(var m=0;m<j.data.expectation_area.length;m++){j.select_city.push(j.data.expectation_area[m].city__id);}f(k);}).error(function(){console.log("请求失败");});}]);h.controller("selectPositionCategory",["$scope","$http","$state",function(j,l,k){j.category="";j.static_url=e;j.back=function(){k.go("select_city");};j.check_selected=function(m){if(m==j.category){return true;}return false;};j.setPosition=function(m){j.category=m;l.post(d.resume.select_position_category,$.param({category:j.category})).success(function(n){k.go("select_category_tag");}).error(function(){console.log("请求失败");});};l.get(d.resume.select_position_category).success(function(m){j.data=m.data;j.category=m.data.category;f(k);}).error(function(){console.log("请求失败");});}]);h.controller("selectCategoryTag",["$scope","$http","$state",function(j,l,k){j.tag=[];j.static_url=e;j.back=function(){k.go("select_position_category");};j.previous=function(m){var p=m.level;if(p==1){l.post(d.resume.select_category_tag,$.param({tag:j.tag})).success(function(q){k.go("select_position_category");}).error(function(){console.log("请求失败");});}else{var n=$(".checked").length;if(n!=0){var o=j.tag.indexOf(j.data.previous_tag.id);if(o<0){j.tag.push(j.data.previous_tag.id);}}else{var o=j.tag.indexOf(j.data.previous_tag.id);if(o>0){j.tag.remove(o);}}j.data.previous_tag.id=j.data.save_id;j.data.previous_tag.name=j.data.save_name;j.data.previous_tag.level=1;j.data.category_tag=j.data.save_tag;}};j.checkTag=function(m){var p=m.child?m.child.length:false;if(p){j.data.save_id=j.data.previous_tag.id;j.data.save_name=j.data.previous_tag.name;j.data.save_tag=j.data.category_tag;j.data.previous_tag.id=m.id;j.data.previous_tag.level=2;j.data.previous_tag.name=m.name;j.data.category_tag=m.child;}else{var o=j.tag.indexOf(m.id);var n=j.tag.indexOf(j.data.previous_tag.id);if(o>=0){j.tag.remove(o);$("."+m.id).removeClass("checked");if($(".checked").length==0){j.tag.remove(j.data.previous_tag.id);}}else{j.tag.push(m.id);$("."+m.id).addClass("checked");$("."+m.id).find("img").addClass("checked");if($(".checked").length==0&&n<0){j.tag.push(j.data.previous_tag.id);}}if(j.tag.length!=0){$(".city_form_next_btn").css("display","block");$(".city_form_next_btn img").removeClass("hide").addClass("show");$("html, body").animate({scrollTop:$(document).height()},500);}else{$(".city_form_next_btn").css("display","none");$(".city_form_next_btn img").removeClass("show").addClass("hide");}}};j.next=function(){l.post(d.resume.select_category_tag,$.param({tag:j.tag})).success(function(m){k.go("select_work_years");}).error(function(){console.log("请求失败");});};j.check_first=function(m){if(m%3==0){return true;}return false;};j.check_second=function(m){if(m%2!=0){return true;}return false;};j.check_selected=function(m){for(i in j.tag){if(m==j.tag[i]){$(".city_form_next_btn").css("display","block");$(".city_form_next_btn img").removeClass("hide").addClass("show");return true;}}return false;};l.get(d.resume.select_category_tag).success(function(n){j.data=n.data;for(var m=j.data.resume_tag.length-1;m>=0;m--){j.tag.push(j.data.resume_tag[m].position_tag__id);}}).error(function(){console.log("请求失败");});}]);h.controller("selectWorkyears",["$scope","$http","$state",function(j,l,k){j.work_years="";j.static_url=e;j.back=function(){k.go("select_position_category");};j.setWorkyears=function(m){j.work_years=m;$("a").removeClass("checked");$("#"+j.work_years).addClass("checked");l.post(d.resume.select_workyears,$.param({work_years:j.work_years})).success(function(n){k.go("select_degree");}).error(function(){console.log("请求失败");});};l.get(d.resume.select_workyears).success(function(m){j.work_years=m.data.work_years;if(j.work_years!=""){$("#"+j.work_years).addClass("checked");}f(k);}).error(function(){console.log("请求失败");});}]);h.controller("selectDegree",["$scope","$http","$state",function(j,l,k){j.degree="";j.static_url=e;j.back=function(){k.go("select_work_years");};j.setDegree=function(m){j.degree=m;$("a").removeClass("checked");$("#"+j.degree).addClass("checked");l.post(d.resume.select_degree,$.param({degree:j.degree})).success(function(n){k.go("select_salary");}).error(function(){console.log("请求失败");});};j.check_degree=function(n){for(var m=n.length-1;m>=0;m--){if(j.data.degree==n[m]){return true;}}return false;};l.get(d.resume.select_degree).success(function(m){j.data=m.data;f(k);}).error(function(){console.log("请求失败");});}]);h.controller("selectSalary",["$scope","$http","$state",function(j,l,k){j.static_url=e;j.back=function(){k.go("select_degree");};j.next=function(){if($(".error").css("display")=="none"){l.post(d.resume.select_salary_lowest,$.param({salary_lowest:j.salary+"000"})).success(function(m){if(m&&m.status=="ok"){k.go("select_field");}else{alert(m.msg);}}).error(function(){console.log("请求失败");});}};j.hideInfo=function(n){var m=n.target;$(m).parent().css("border","1px solid #d7d7d7");};j.isShow=function(){if(j.salary=="0"||j.salary==""||j.salary=="00"){return false;}return true;};j.showInfo=function(m){j.salary=m.target.value.replace(/[^\d]/g,"");if(j.salary!=0&&j.salary!=""){$(".error").css("display","none");$(".info span").html(j.salary*1000);$(".info").css("display","block");}else{if(j.salary==0||j.salary==0){$(".info").css("display","none");$(".error").css("display","block");}else{$(".info").css("display","none");}}};j.focusInput=function(m){var o=$(m.target).find("input"),n=o.val();o.val("");o.focus();o.val(n);o.focus();};l.get(d.resume.select_salary_lowest).success(function(n){j.data=n.data;var m=j.data.salary_lowest;j.salary=m/1000;j.salary=j.salary==0?"":j.salary;f(k);if(j.data.salary_lowest!=0){$(".info span").html(j.salary*1000);$(".info").css("display","block");}});j.addColor=function(n){var m=n.target;$(m).css("border-right",0).parent().css("border","1px solid #0091fa");};}]);h.controller("selectField",["$scope","$http","$state",function(j,l,k){j.select_field=[];j.static_url=e;j.back=function(){k.go("select_salary");};j.checkField=function(n){var m=j.select_field.indexOf(n);if(m>=0){j.select_field.remove(m);$("."+n).removeClass("checked");}else{j.select_field.push(n);$("."+n).addClass("checked");}if(j.select_field.length!=0){$(".city_form_next_btn").css("display","block");$(".city_form_next_btn img").removeClass("hide").addClass("show");}else{$(".city_form_next_btn").css("display","none");$(".city_form_next_btn img").removeClass("show").addClass("hide");}};j.isShow=function(){return true;};j.isDisabled=function(){if(j.select_field!=""){return false;}return true;};j.next=function(){field_id_list=j.select_field;if(field_id_list!=""){l.post(d.resume.select_prefer_field,$.param({field_id_list:field_id_list})).success(function(m){if(m&&m.status=="ok"){window.location.href="/job/#/recommend_job_list/";}else{console.log(m.msg);}}).error(function(){console.log("请求失败");});}};j.checked_field=function(n){for(var m=0;m<j.data.prefer_fields.length;m++){if(j.data.prefer_fields[m].category__id==n.id){return true;}}return false;};l.get(d.resume.select_prefer_field).success(function(n){j.data=n.data;if(j.data.prefer_fields.length==0){for(var m=0;m<j.data.all_fields.length;m++){j.select_field.push(j.data.all_fields[m].id);}}for(var m=0;m<j.data.prefer_fields.length;m++){j.select_field.push(j.data.prefer_fields[m].category__id);}f(k);}).error(function(){console.log("请求失败");});}]);var a={select_gender:"0",select_city:"18%",select_position_category:"36%",select_work_years:"49.5%",select_degree:"66%",select_salary:"82.5%",select_field:"99%"};var g=["select_gender","select_city","select_position_category","select_work_years","select_degree","select_salary","select_field"];function f(l){var k=l.current.name;current_index=g.indexOf(k);for(var j=current_index;j>=0;j--){$("."+g[j]).parent().addClass("has_show");}for(var j=g.length-1;j>=current_index;j--){$("."+g[j]).parent().removeClass("has_show");}$(".step_line_blue").css("width",a[k]);$("ul.step_dot_ul li").each(function(){$(this).removeClass("selected");});$("."+k).parent().addClass("selected");}})();