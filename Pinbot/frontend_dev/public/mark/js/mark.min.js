var saveCallback=function(b){$("#JS_submit_toreport").attr("disabled",false);if(b&&(b.status=="ok"||b.status=="success")){var a=$("#JS_header").attr("data-url");if(a){location.href=a;}else{location.reload();}}else{if(b&&b.msg){$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>'+b.msg+"</p>");}else{$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>请求失败了，刷新再试一下吧！</p>');}}};$(function(){$(document).on("click",".m-radio",function(){var c=$(this),b=c.attr("data-name"),a=c.attr("has-info");checkbox=c.find("input"),checked=checkbox.prop("checked"),$submitToReport=$("#JS_submit_toreport"),$feedbackInfo=$("#JS_feedback_info");c.toggleClass("active");$('.m-radio[data-name="'+b+'"]').not(c).removeClass("active").find("input").prop("checked",false);checkbox.prop("checked",!checked);if(b=="code_name"){if($('input[name="code_name"]:checked').length){$("#JS_submit_btn").attr("disabled",false);}else{$("#JS_submit_btn").attr("disabled",true);}}if(b=="back_count"){if(a===undefined){$feedbackInfo.hide();if($('input[name="back_count"]:checked').length){$submitToReport.attr("disabled",false);}else{$submitToReport.attr("disabled",true);}}else{$feedbackInfo.toggle().find("input").focus();$submitToReport.attr("disabled",true);}}});$(document).on("keyup","#JS_feedback_value",function(){var c=$(this),b=c.val(),a=$("#JS_submit_toreport");b===""?a.attr("disabled",true):a.attr("disabled",false);});$(document).on("click","#JS_submit_btn",function(){var b=this;if($(this).attr("disabled")){return false;}var a=$('input[name="code_name"]:checked').parent().text();if(!a){return false;}$.confirm('<p style="font-size:20px;color:#434343;text-align:center"><i class="i-l-notice"></i>您选择的状态是: <span style="color:#3ab2e7;">'+a+'</span></p><p style="margin-top:50px;color:#f23748;font-size:14px;text-align:center;">注：请确认提交，提交后不能修改</p>',function(){$.commonAjax.call(b);});});$(document).on("click","#JS_toreport_btn",function(){$(".modal-backdrop-tip-toreport,.modal-tip-toreport").show();$(".modal-dialog-tip-toreport").css({marginTop:($(window).height()-$(".modal-dialog-tip-toreport").height())/2+"px"});});$(document).on("click",".JS_close_tip",function(){$(".modal-backdrop-tip-toreport,.modal-tip-toreport").hide();});$(document).on("click","#JS_submit_toreport",function(){var b=$(this),d=b.attr("data-id"),a=$('input[name="back_count"]:checked').val(),c=$('input[name="feedback_value"]').val();if($(this).attr("disabled")){return false;}if(!d||!a){return;}$("#JS_submit_toreport").attr("disabled",true);$.post("/taocv/add_feedback/",{feedback_id:a,resume_id:d,feedback_value:c,___:new Date().getTime()},function(e){saveCallback(e);},"json");});$(document).on("click","#JS_goto_detail",function(){var a=window.open();a.opener=null;a.open("","_self","");a.location=$(this).attr("data-url");});});