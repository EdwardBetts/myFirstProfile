function Hilitor(a,b){if(void 0!=a&&a){var b=b||"",c=document.getElementById("resume-content")||document.body,d="EM",e=new RegExp("^(?:"+d+"|SCRIPT|FORM)$"),f="",i=function(a,b,c){return"\\"+a},j=function(a){a=a.replace(/[+|.|*|$|^|?]/gi,i);var b="("+a+")";f=new RegExp(b,"i")},k=function(a){if(void 0!=a&&a&&f&&!e.test(a.nodeName)){if(a.hasChildNodes())for(var c=0;c<a.childNodes.length;c++)k(a.childNodes[c]);if(3==a.nodeType&&(nv=a.nodeValue)&&(regs=f.exec(nv))){var g=regs[0];if(g&&g.match(/^[0-9a-z]{3,}$/i))for(var h=nv.replace(/[^0-9a-z]/gi," "),i=h.split(" "),c=0,j=i.length;j>c;c++){var l=g,m=new RegExp(""+l,"i");g!=i[c]&&i[c].match(m)&&(g=i[c])}var n=document.createElement(d);n.appendChild(document.createTextNode(g)),n.style.fontStyle="inherit",n.className=b;var o=a.splitText(regs.index);o.nodeValue=o.nodeValue.substring(g.length),a.parentNode.insertBefore(n,o)}}};j(convertCharStr2jEsc(a)),k(c)}}function dec2hex4(a){var b=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return b[a>>12&15]+b[a>>8&15]+b[a>>4&15]+b[15&a]}function convertCharStr2jEsc(a,b){for(var d,e,c=0,g="",h=0;h<a.length;h++){var i=a.charCodeAt(h);if((0>i||i>65535)&&(g+="!Error in convertCharStr2UTF16: unexpected charCodeAt result, cc="+i+"!"),0!=c){if(i>=56320&&57343>=i){if(d=65536+(c-55296<<10)+(i-56320),b){for(e=d.toString(16);e.length<8;)e="0"+e;g+="\\U"+e}else d-=65536,g+="\\u"+dec2hex4(55296|d>>10)+"\\u"+dec2hex4(56320|1023&d);c=0;continue}g+="Error in convertCharStr2UTF16: low surrogate expected, cc="+i+"!",c=0}if(i>=55296&&56319>=i)c=i;else switch(i){case 0:g+="\\0";break;case 8:g+="\\b";break;case 9:g+="\\t";break;case 10:g+="\\n";break;case 13:g+="\\r";break;case 11:g+="\\v";break;case 12:g+="\\f";break;case 34:g+='\\"';break;case 39:g+="\\'";break;case 92:g+="\\\\";break;default:if(i>31&&127>i)g+=String.fromCharCode(i);else{for(e=i.toString(16).toUpperCase();e.length<4;)e="0"+e;g+="\\u"+e}}}return g}!function(){var a=document.body.getAttribute("data-resumeid"),b=angular.module("Notes",[]);b.config(["$interpolateProvider",function(a){a.startSymbol("{[{"),a.endSymbol("}]}")}]),b.factory("notes",["$http",function(a){}]),b.controller("notes",["$scope","$timeout",function(b,c){var d=$(".ic-notes-prev"),e=$(".ic-notes-next");b.openDialog=!1,b.comment="",b.currPos=0,b.maxRow=3,b.sliceData=function(){return(b.cachedData||[]).slice(b.currPos,b.currPos+b.maxRow)},$.get("/resumes/get_comments/"+a+"/",function(a){a.status&&c(function(){b.cachedData=a.data||[],b.data=b.sliceData(),b.maxLength=b.cachedData.length,$(".notes-body").show(),$(".notes").removeClass("loading")})}),b.toggle=function(){(b.openDialog=!b.openDialog)&&setTimeout(function(){$(".notes-textbox textarea").focus()})},b.addComment=function(d){var e=$(d.target);return b.comment.length?(e.unbind("click"),void $.post("/resumes/add_comment/"+a+"/",{comment:b.comment},function(a){a.status&&c(function(){b.cachedData&&b.cachedData.unshift({id:a.data.comment_id,date:(new Date).toLocaleDateString(),text:b.comment}),b.comment="",b.toggle(),b.currPos=0,b.maxLength=b.cachedData.length,b.updatePagerState(),e.bind("click",b.addComment)})})):void setTimeout(function(){$(".notes-textbox textarea").focus()})},b.delComment=function(d,e){$.post("/resumes/delete_comment/"+a+"/"+d+"/",function(a){c(function(){b.cachedData.splice(e,1),b.maxLength=b.cachedData.length,b.updatePagerState()})})},b.updatePagerState=function(){b.data=b.sliceData(),!b.data.length&&b.currPos&&(b.currPos-=b.maxRow,b.data=b.sliceData()),b.currPos>=b.maxRow?d.removeClass("disabled"):d.addClass("disabled"),b.currPos<b.maxLength-b.maxRow?e.removeClass("disabled"):e.addClass("disabled")},b.nextPage=function(){c(function(){b.currPos<b.maxLength-b.maxRow&&(b.currPos+=b.maxRow,b.updatePagerState())})},b.prevPage=function(){c(function(){b.currPos>=b.maxRow&&(b.currPos-=b.maxRow,b.updatePagerState())})}}])}(),$(function(){var a=document.body.getAttribute("data-resumeid");$("a.control-btn-fav").on("click",function(){var b=$(this).attr("href");return $btn=$(this),$btn.find("span").hasClass("ctrl-pending")?!1:($btn.find("span").addClass("ctrl-pending"),b.length<2&&(b="/resumes/add_watch/"+a),$.get(b,function(a){$btn.find("span").removeClass("ctrl-pending"),a&&a.status&&($(".control-btn-unfav").addClass("fav-current"),$(".control-btn-fav").removeClass("fav-current"))}),!1)}),$("a.btn-unfav").on("click",function(){var b=$(this).attr("href"),c=$(this);return c.parent().hasClass("ctrl-pending")?!1:(c.parent().addClass("ctrl-pending"),b.length<2&&(b="/resumes/remove_watch/"+a),$.get(b,function(a){c.parent().removeClass("ctrl-pending"),a&&a.status&&($(".control-btn-unfav").removeClass("fav-current"),$(".control-btn-fav").addClass("fav-current"))}),!1)}),$("a.del").on("click",function(){var b=$(this).attr("href");return b.length<2&&(b="/resumes/discard_watch/"+a),$.get(b,function(a){a&&a.status&&(window.location.href="/resumes/all")}),!1}),$(".btn-toggle").on("click",function(a){a.preventDefault();var b=$(this);$(".sec-resume h3");b.hasClass("btn-toggle-span")?(b.removeClass("btn-toggle-span"),b.parents(".sec-resume").find("dl").show()):(b.addClass("btn-toggle-span"),b.parents(".sec-resume").find("dl").hide())}),$(".btn-resume-feedback").on("click",function(a){a.preventDefault();var b=$(this),c=document.body.getAttribute("data-resumeid"),d=b.data("feed_id");return b.hasClass("pending")?!1:void(b.hasClass("feed-back-sended")?(b.addClass("pending"),b.find("span").addClass("ctrl-pending"),$.get("/feed/modify_feed_result",{feed_id:d,resume_id:c,reco_index:"200"},function(){b.find("span").removeClass("ctrl-pending"),b.removeClass("feed-back-sended").removeClass("pending")})):(b.addClass("pending"),b.find("span").addClass("ctrl-pending"),$.get("/feed/modify_feed_result",{feed_id:d,resume_id:c,reco_index:"-200"},function(){b.find("span").removeClass("ctrl-pending"),b.addClass("feed-back-sended").removeClass("pending")})))})}),function(a){a.fn.overflown=function(){var a=this[0];return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth}}(jQuery);var Style=function(){function a(c){return this instanceof a?(this.map=b({},c),this.rules="",void(this.elem=null)):new a(c)}function b(){var b,c,d,a={};for(b=0;b<arguments.length;b+=1){c=arguments[b];for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}function c(a){return[].join.call(a,"")}function d(){var a=document.createElement("style"),b=document.getElementsByTagName("head")[0];return b&&b.appendChild(a),a}function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a=a.replace(new RegExp("@"+c,"gi"),b[c]));return a}function f(a,b){a&&"style"===a.tagName.toLowerCase()&&(a.styleSheet?a.styleSheet.cssText=b:a.innerHTML=b)}function g(a,b,c){f(a,e(b,c))}return a.prototype={define:function(a){return this.map=b(this.map,a),this},add:function(){var a=c(arguments);return a&&(this.rules+=a),this},load:function(){return this.elem||(this.elem=d()),arguments.length&&this.add.apply(this,arguments),g(this.elem,this.rules,this.map),this},clear:function(){return f(this.elem,""),this.rules="",this.map={},this},remove:function(){var a=this.elem;return a&&a.parentNode&&(this.clear(),this.elem=null,a.parentNode.removeChild(a)),this}},a}(),Keywords=function(){var a=function(){var a="pinbot-keyword-";return a+Math.random().toString(16).substr(2)},c=function(a,b){var c=a;return{prev:function(){return a>=c?c=b:--c},next:function(){return c>=b?c=a:++c},curr:function(a){return c=void 0===a?c:a}}},d=window.selector=function(){function a(a){this.el=a||document.createElement("div")}return a.prototype={hasClass:function(a){for(var b=(this.el.className||"").split(/\s+/),c=0;c<b.length;++c)if(a==b[c])return!0;return!1},addClass:function(a){this.el.className;return this.hasClass(a)||(this.el.className+=" "+a),this},removeClass:function(a){for(var b=this.el.className,c=b.split(/\s+/),d=[],e=0;e<c.length;++e)c[e]!=a&&d.push(c[e]);return this.el.className=d.join(" "),this}},function(b){return new a(b)}}(),e=function(){var a={};return{add:function(b){var d=document.querySelectorAll("."+b);a[b]={index:c(0,d.length-1),element:d,get:function(){return this.element[this.index.next()]}}},get:function(b){return a[b]?a[b].get():{}},currIndex:function(b){return a[b]?a[b].index.curr():void 0}}}(),f={},g="",h=new Style;return{init:function(b){if(f.hasOwnProperty(b))return this;var c=a();return Hilitor(b,c),f[b]=c,e.add(c),this},locate:function(a){var b=f[a];if(b){g!=a&&(g=a,h.load(".pinbot-keyword-current{ background: #44b5e8 !important; color: #fff;}","."+b+"{background: #44b5e8; color: #fff;-webkit-transition: all 1s ease; transition: all 1s ease}"));var c=e.get(b);d(document.querySelector(".pinbot-keyword-current")).removeClass("pinbot-keyword-current"),d(c).addClass("pinbot-keyword-current")}}}}();$(function(){function e(){$(".btn-toggle-span").click(),a=!1}var a=!0;$("#resume-detail").offset().top,$(window),$(".locate-keywords");if(window.subscribe=function(a){$("#JS_username").html(a.username),$("#JS_mission_time").html(a.mission_time),$(".modal-backdrop-tip,.modal-tip").show(),$(".modal-dialog-tip").css({marginTop:($(window).height()-$(".modal-dialog-tip").height())/2+"px"}),$(".close-btn").on("click",function(a){a.preventDefault(),$(".modal-backdrop-tip,.modal-tip").remove(),delete $._LayerOut})},$(".locate-keywords-container>span").on("click",function(){a&&e();var b=$(this).html();return Keywords.init(b).locate(b),!1}),$(".btn-scroll-top").on("click",function(){return $("body, html").stop().animate({scrollTop:0},"normal"),!1}),void 0!=window.feed_keywords)for(var f=window.feed_keywords.length-1;f>=0;f--)!function(a){var b=window.feed_keywords[a];Keywords.init(b).locate(b)}(f);$(document).on("click",".tao-cancel",function(){$(".tao-enter-btn").not(".submitted").click()}),$(document).on("click",".choice-list li",function(){$(".choice-list>li.selected").removeClass("selected").find("div").hide(),$(this).addClass("selected"),$(this).find("input").length&&$(this).find("input").focus(),$(this).find("div").length&&$(this).find("div").show().focus(),$(".tao-feed-container").find(".selected-choice").removeClass("selected-choice"),$(this).parents(".choice-group").addClass("selected-choice")}),$(document).on("click",".tao-submit",function(a){if(a.preventDefault(),$(this).hasClass("tao-submitting"))return!1;var b=$(".tao-feed-container").find(".choice-groups").data("submit-url"),c=$(".tao-feed-container").find(".selected-choice").find("li.selected"),d=c.find('input[type="text"]').length?c.find('input[type="text"]'):c.find("textarea"),e={feedback_id:c.data("id"),feedback_value:d.length&&d.val()||"",resume_id:$("body").data("resumeid")};return c.length?!d.length||$.trim(d.val()).length&&$.trim(d.val())!=d.attr("placeholder")?($(this).parent().find("span").hide(),$(this).addClass("tao-submitting"),$(this).html("\u63d0\u4ea4\u4e2d.."),$.post(b,e,function(a){$(this).removeClass("tao-submitting"),$(this).html("\u63d0\u4ea4"),a&&"success"==a.status?($(".tao-enter").addClass("tao-status-3"),$.alert("\u4fdd\u5b58\u6210\u529f"),window.location.reload(!0)):a&&a.msg?$.alert(a.msg):$.alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),$(".tao-submit").removeClass("tao-submitting").html("\u63d0\u4ea4")},"json").fail(function(){$.alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),$(".tao-submit").removeClass("tao-submitting").html("\u63d0\u4ea4")}),void 0):($(this).parent().find("span").css("color","red").html("\u8bf7\u9009\u62e9\u5e76\u586b\u5199\u597d\u4f60\u7684\u53cd\u9988.").show(),d.focus(),!1):($(this).parent().find("span").css("color","red").html("\u8bf7\u9009\u62e9\u5e76\u586b\u5199\u597d\u4f60\u7684\u53cd\u9988.").show(),!1)}),$(document).on("click","#JS_feedback_btn",function(){var a=$("#JS_feedback").html();$.LayerOut({html:a,dialogCss:"width:725px;height:630px;"})}),$(document).on("click","#JS_down_to_local",function(){var a=$("#JS_download_local").html();$.LayerOut({html:a,dialogCss:"width:660px;"})}),$(document).on("click","#JS_toggle_evaluate",function(){$(this).find(".hr-evaluate").toggle()})});