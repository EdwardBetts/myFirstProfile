$.placeholderHandle=function(){$("#JS_resume_content [placeholder]").each(function(){var b=$(this),a=b.attr("placeholder");if(!b.val()){b.val(a);}});};$.loadResume=function(s){var c='<div class="personal-info mt20"><fieldset class="fieldset" id="JS_contact_info"><h3>个人信息 <span>(必填)</span></h3><div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td width="340"><span class="red">*</span><input type="text" class="input w268" name="name" value="'+(s&&s.contact_info&&s.contact_info.name?s.contact_info.name:"")+'" placeholder="姓名" data-equired data-reg="isNull"></td><td><span class="red">*</span>';if(s&&s.contact_info&&s.contact_info.gender){c+='<label><input type="radio" name="gender" '+(s.contact_info.gender=="男"?"checked":"")+' value="男">男</label><label><input type="radio" name="gender" value="女" '+(s.contact_info.gender=="女"?"checked":"")+">女</label>";}else{c+='<label><input type="radio" name="gender" value="男">男</label><label><input type="radio" name="gender" checked value="女">女</label>';}c+='</td></tr><tr><td><span class="red">*</span><input maxLength="11" type="text" value="'+(s&&s.contact_info&&s.contact_info.phone?s.contact_info.phone:"")+'" class="input w268" data-equired data-reg="number" name="phone" placeholder="电话"></td><td colspan="2"><span class="red">*</span><input type="text" name="email" value="'+(s&&s.contact_info&&s.contact_info.email?s.contact_info.email:"")+'" data-equired data-reg="email" class="input w268" placeholder="邮箱"></td></tr><tr><td><span class="red">*</span><input type="text" class="input w268" data-reg="number" value="'+(s&&s.resume&&s.resume.work_years?s.resume.work_years:"")+'" name="work_years" data-equired placeholder="工作年限:例 5"></td><td width="340"><span class="red">*</span><input type="text" value="'+(s&&s.resume&&s.resume.job_target&&s.resume.job_target.expectation_area?s.resume.job_target.expectation_area:"")+'" name="expectation_area" class="input w268" data-equired data-reg="isNull" placeholder="意向工作地"></td></tr><tr><td colspan="2"><span class="red">*</span><input type="text" class="input w268" data-reg="number" value="'+(s&&s.contact_info&&s.contact_info.age?s.contact_info.age:"")+'" name="age" data-equired placeholder="年龄"></td></tr></table><hr class="hr hr-solid mt20"><p class="mt20"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a></p></div></fieldset></div><div class="personal-info mt20"><fieldset class="fieldset" id="JS_work_info"><h3>工作经历 <span>(必填)</span></h3>';if(s&&s.resume&&s.resume.works&&s.resume.works.length){var u=s.resume.works;for(var r=0,m=u.length;r<m;r++){c+=$.getWorkHtml(u[r],(r==m-1?"last":""));}}else{c+=$.getWorkHtml();}c+='</fieldset></div><div class="personal-info mt20"><fieldset class="fieldset" id="JS_education_info"><h3>教育经历 <span>(必填)</span></h3>';if(s&&s.resume&&s.resume.educations&&s.resume.educations.length){var b=s.resume.educations;for(var h=0,n=b.length;h<n;h++){c+=$.getEducationHtml(b[h],(h==n-1?"last":""));}}else{c+=$.getEducationHtml();}c+="</fieldset></div>";if($("body").attr("data-admin_edit")){c+='<div class="personal-info mt20"><fieldset class="fieldset" id="JS_project_info"><h3>项目经历</h3>';if(s&&s.resume&&s.resume.projects&&s.resume.projects.length){var a=s.resume.projects;for(var k=0,p=a.length;k<p;k++){c+=$.getProjectHtml(a[k],(k==p-1?"last":""));}}c+='<p class="text-center" style="display:'+(s&&s.resume&&s.resume.projects&&s.resume.projects.length?"none":"block")+'"><a href="javascript:;" class="btn btn-large btn-white noradius" onclick="$(this).parent().hide().closest(\'fieldset\').append( $.getProjectHtml() );"><i class="i-add"></i><strong>添加项目经历</strong></a></p>';c+='</fieldset></div><div class="personal-info mt20"><fieldset class="fieldset" id="JS_train_info"><h3>培训经历</h3>';if(s&&s.resume&&s.resume.trains&&s.resume.trains.length){var q=s.resume.trains;for(var g=0,j=q.length;g<j;g++){c+=$.getTrinHtml(q[g],(g==j-1?"last":""));}}c+='<p class="text-center" style="display:'+(s&&s.resume&&s.resume.trains&&s.resume.trains.length?"none":"block")+'"><a href="javascript:;" class="btn btn-large btn-white noradius" onclick="$(this).parent().hide().closest(\'fieldset\').append( $.getTrinHtml() );"><i class="i-add"></i><strong>添加培训经历</strong></a></p>';c+='</fieldset></div><div class="personal-info mt20"><fieldset class="fieldset" id="JS_evaluation_info"><h3>自我评价</h3>';if(s&&s.resume&&s.resume.self_evaluation){var d=s.resume.self_evaluation;c+=$.getEvaluationHtml(d);}c+='<p class="text-center" style="display:'+(s&&s.resume&&s.resume.self_evaluation?"none":"block")+'"><a href="javascript:;" class="btn btn-large btn-white noradius" onclick="$(this).parent().hide().closest(\'fieldset\').append( $.getEvaluationHtml() );"><i class="i-add"></i><strong>添加自我评价</strong></a></p>';c+='</fieldset></div><div class="personal-info mt20"><fieldset class="fieldset" id="JS_skill_info"><h3>专业技能</h3>';if(s&&s.resume&&s.resume.professional_skills&&s.resume.professional_skills.length){var t=s.resume.professional_skills;for(var e=0,f=t.length;e<f;e++){c+=$.getSkillHtml(t[e],(e==f-1?"last":""));}}c+='<p class="text-center" style="display:'+(s&&s.resume&&s.resume.professional_skills&&s.resume.professional_skills.length?"none":"block")+'"><a href="javascript:;" class="btn btn-large btn-white noradius" onclick="$(this).parent().hide().closest(\'fieldset\').append( $.getSkillHtml() );"><i class="i-add"></i><strong>添加专业技能</strong></a></p>';c+="</fieldset></div>";}c+='<div class="personal-info mt20"><fieldset class="fieldset" id="JS_other_info"><h3>其他</h3>';if(s&&s.resume&&s.resume.other_info){var o=s.resume.other_info.content;c+=$.getOtherHtml(o);}c+='<p class="text-center" style="display:'+(s&&s.resume&&s.resume.other_info?"none":"block")+'"><a href="javascript:;" class="btn btn-large btn-white noradius w124" onclick="$(this).parent().hide().closest(\'fieldset\').append( $.getOtherHtml() );"><i class="i-add"></i><strong>添加其他</strong></a></p>';c+="</fieldset></div>";$("#JS_resume_content").html(c);};$.uploadResume=function(e){var a=$(".progress").find("span:first"),d=$(".progress").next("code"),f=e.split("\\");a[0].style.width="0%";d.html("0%");var c=0,b=function(){if(c<99){c++;a.css({width:c+"%"});d.html(c+"%");t1=setTimeout(function(){b();},50);}};$(".entry-progress").show().siblings().hide();b();};$.getWorkHtml=function(b,e){var c="";c='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td><span class="red">*</span><input type="text" class="input w268 JS_company_name" data-reg="isNull" data-equired value="'+(b&&b.company_name?b.company_name:"")+'" placeholder="公司名称"></td><td><span class="red">*</span><input type="text" class="input w268 JS_position_title" data-reg="isNull" data-equired value="'+(b&&b.position_title?b.position_title:"")+'" placeholder="职位名称"></td></tr><tr><td><div><span class="red left">*</span>';if(b&&b.start_time){var d=b.start_time.split("-");c+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+d[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="work_start_year" data-equ><option value=""></option>'+$.getYear("option",d[0])+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+d[1]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="work_start_month" data-equ><option value=""></option>'+$.getMonth("option",d[1])+"</select></div>";}else{c+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">开始年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="work_start_year" data-equ><option value=""></option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">开始月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="work_start_month" data-equ><option value=""></option>'+$.getMonth()+"</select></div>";}c+='<div class="clearBoth"></div></div></td><td><div><span class="red left">*</span>';if(b&&b.end_time){var a=b.end_time.split("-");c+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+a[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="work_end_year" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getYear("option",a[0])+'</select></div><div class="drop-select ml10 left w142" '+(a[0]=="至今"?"disabled":"")+' style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+(a[1]?a[1]:"至今")+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="work_end_month" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getMonth("option",a[1])+"</select></div>";}else{c+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">结束年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="work_end_year" data-equ><option value=""></option><option value="至今">至今</option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">结束月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="work_end_month" data-equ><option value=""></option><option value="至今">至今</option>'+$.getMonth()+"</select></div>";}c+='<div class="clearBoth"></div></div></td></tr><tr><td colspan="2" style="vertical-align:top"><span class="red" style="vertical-align:top">*</span><textarea maxLength="500" style="vertical-align:top" rows="5" class="textarea JS_job_desc w609" placeholder="工作描述" data-reg="isNull" data-equired data-lengthlimit="500">'+(b&&b.job_desc?$.wrapToggle(b.job_desc,"toR"):"")+'</textarea><br><p class="limit-count"><span>500</span>字</p></td></tr></table><p class="mt10 multiterm"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a>';if($("#JS_work_info").length){c+='<a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this , true )">删除</a>';}c+='<a href="javascript:;" class="JS_add_new a-default ml10" onclick="$.addNew( this , \'work\')">新增一条</a></p></div>';if(b&&!e){c+='<hr class="hr mt50">';}return c;};$.getProjectHtml=function(e,d){var b='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td><span class="red">*</span><input type="text" data-equired data-reg="isNull" class="input w268 JS_project_name" value="'+(e&&e.project_name?e.project_name:"")+'" placeholder="项目名称"></td><td><input type="text" class="input w268 ml12 JS_job_title" value="'+(e&&e.job_title?e.job_title:"")+'" placeholder="担任职位"></td></tr><tr><td><div><span class="red left">*</span>';if(e&&e.start_time){var c=e.start_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+c[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select data-equ class="project_start_year"><option value=""></option>'+$.getYear("option",c[0])+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+c[1]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select data-equ class="project_start_month"><option value=""></option>'+$.getMonth("option",c[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">开始年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select data-equ class="project_start_year"><option value=""></option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">开始月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select data-equ class="project_start_month"><option value=""></option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td><td><div><span class="red left">*</span>';if(e&&e.end_time){var a=e.end_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+a[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select data-equ class="project_end_year"><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getYear("option",a[0])+'</select></div><div class="drop-select ml10 left w142" '+(a[0]=="至今"?"disabled":"")+' style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+(a[1]?a[1]:"至今")+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select data-equ class="project_end_month"><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getMonth("option",a[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">结束年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select data-equ class="project_end_year"><option value=""></option><option value="至今">至今</option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">结束月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select data-equ class="project_end_month"><option value=""></option><option value="至今">至今</option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td></tr><tr><td colspan="2" style="vertical-align:top"><span class="red" style="vertical-align:top">*</span><textarea maxLength="500" data-reg="isNull" data-equired style="vertical-align:top" rows="5" class="textarea w609 JS_project_desc" placeholder="项目描述" data-lengthlimit="500">'+(e&&e.project_desc?$.wrapToggle(e.project_desc,"toR"):"")+'</textarea><br><p class="limit-count"><span>500</span>字</p></td></tr></table><p class="mt10 multiterm"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a><a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this )">删除</a><a href="javascript:;" class="JS_add_new a-default ml10" onclick="$.addNew( this , \'project\')">新增一条</a></p></div>';if(e&&!d){b+='<hr class="hr mt50">';}return b;};$.getEducationHtml=function(e,d){var b='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td><span class="red">*</span><input type="text" data-reg="isNull" data-equired class="input w268 JS_school" value="'+(e&&e.school?e.school:"")+'" placeholder="学校名称"></td><td><span class="red">*</span><input type="text" data-reg="isNull" data-equired class="input w268 JS_major" value="'+(e&&e.major?e.major:"")+'" placeholder="专业名称"></td></tr><tr><td colspan="2"><span class="red">*</span><input type="text" class="input w268 JS_degree" value="'+(e&&e.degree?e.degree:"")+'" placeholder="学历" data-equired data-reg="isNull"></td></tr><tr><td><div><span class="red left">*</span>';if(e&&e.start_time){var c=e.start_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+c[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="edu_start_year" data-equ><option value=""></option>'+$.getYear("option",c[0])+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+c[1]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="edu_start_month" data-equ><option value=""></option>'+$.getMonth("option",c[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">开始年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="edu_start_year" data-equ><option value=""></option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">开始月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="edu_start_month" data-equ><option value=""></option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td><td><div><span class="red left">*</span>';if(e&&e.end_time){var a=e.end_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+a[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="edu_end_year" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getYear("option",a[0])+'</select></div><div class="drop-select ml10 left w142" '+(a[0]=="至今"?"disabled":"")+' style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+(a[1]?a[1]:"至今")+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="edu_end_month" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getMonth("option",a[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">结束年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="edu_end_year" data-equ><option value=""></option><option value="至今">至今</option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">结束月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="edu_end_month" data-equ><option value=""></option><option value="至今">至今</option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td></tr></table><p class="mt10 multiterm"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a>';if($("#JS_education_info").length){b+='<a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this , \'leastOne\')">删除</a>';}b+='<a href="javascript:;" class="JS_add_new a-default ml10" onclick="$.addNew( this , \'education\')">新增一条</a></p></div>';if(e&&!d){b+='<hr class="hr mt50">';}return b;};$.getTrinHtml=function(e,d){var b='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td><div><span class="red left">*</span>';if(e&&e.start_time){var c=e.start_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+c[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="train_start_year" data-equ><option value=""></option>'+$.getYear("option",c[0])+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+c[1]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="train_start_month" data-equ><option value=""></option>'+$.getMonth("option",c[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">开始年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始年份</a></li>'+$.getYear("li")+'</ul></div><select class="train_start_year" data-equ><option value=""></option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">开始月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>开始月份</a></li>'+$.getMonth("li")+'</ul></div><select class="train_start_month" data-equ><option value=""></option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td><td><div><span class="red left">*</span>';if(e&&e.end_time){var a=e.end_time.split("-");b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">'+a[0]+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="train_end_year" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getYear("option",a[0])+'</select></div><div class="drop-select ml10 left w142" '+(a[0]=="至今"?"disabled":"")+' style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+(a[1]?a[1]:"至今")+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="train_end_month" data-equ><option value=""></option><option value="至今" '+(a[0]=="至今"?"selected":"")+">至今</option>"+$.getMonth("option",a[1])+"</select></div>";}else{b+='<div class="drop-select w142 left" style="*z-index:2000"><button class="button" type="button" data-toggle="dropdown">结束年份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束年份</a></li><li class="now"><a>至今</a></li>'+$.getYear("li")+'</ul></div><select class="train_end_year" data-equ><option value=""></option><option value="至今">至今</option>'+$.getYear()+'</select></div><div class="drop-select ml10 left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">结束月份<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>结束月份</a></li><li class="nowMonth"><a>至今</a></li>'+$.getMonth("li")+'</ul></div><select class="train_end_month" data-equ><option value=""></option><option value="至今">至今</option>'+$.getMonth()+"</select></div>";}b+='<div class="clearBoth"></div></div></td></tr><tr><td colspan="2" style="vertical-align:top"><span class="red" style="vertical-align:top">*</span><textarea maxLength="500" style="vertical-align:top" data-reg="isNull" data-equired rows="5" class="textarea w609 JS_train_desc" placeholder="培训详情" data-lengthlimit="500">'+(e&&e.train_desc?$.wrapToggle(e.train_desc,"toR"):"")+'</textarea><br><p class="limit-count"><span>500</span>字</p></td></tr></table><p class="mt10 multiterm"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a><a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this )">删除</a><a href="javascript:;" class="JS_add_new a-default ml10" onclick="$.addNew( this , \'train\')">新增一条</a></p></div>';if(e&&!d){b+='<hr class="hr mt50">';}return b;};$.getEvaluationHtml=function(b){var a='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td colspan="2" style="vertical-align:top"><textarea maxLength="500" style="vertical-align:top" rows="5" class="textarea w609" id="JS_evaluation" placeholder="自我评价" data-lengthlimit="500">'+(b?$.wrapToggle(b,"toR"):"")+'</textarea><br><p class="limit-count"><span>500</span>字</p></td></tr></table><p class="mt10"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a><a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this )">删除</a></p></div>';return a;};$.getSkillHtml=function(a,c){var b='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td width="340"><input type="text" class="input w268 ml12 JS_skill_desc" value="'+(a&&a.skill_desc?a.skill_desc:"")+'" placeholder="技能名称"></td><td><div class="drop-select left w142" style="*z-index:1999"><button class="button" type="button" data-toggle="dropdown">'+(a&&a.proficiency?a.proficiency:"技能水平")+'<i class="i-barr"></i></button><div class="drop-box"><ul class="drop-down"><li><a>请选择</a></li><li><a>一般</a></li><li><a>良好</a></li><li><a>熟练</a></li><li><a>精通</a></li></ul></div><select class="JS_proficiency"><option value="">请选择</option><option value="一般" '+(a&&a.proficiency&&a.proficiency=="一般")+'>一般</option><option value="良好" '+(a&&a.proficiency&&a.proficiency=="良好")+'>良好</option><option value="熟练" '+(a&&a.proficiency&&a.proficiency=="熟练")+'>熟练</option><option value="精通" '+(a&&a.proficiency&&a.proficiency=="精通")+'>精通</option></select></div></td></tr></table><p class="mt10 multiterm"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a><a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this )">删除</a><a href="javascript:;" class="JS_add_new a-default ml10" onclick="$.addNew( this , \'skill\')">新增一条</a></p></div>';if(a&&!c){b+='<hr class="hr mt50">';}return b;};$.getOtherHtml=function(a){var b='<div class="field-box"><table width="90%" cellspacing="0" cellpadding="0"><tr><td colspan="2" style="vertical-align:top"><textarea maxLength="2000" style="vertical-align:top" rows="5" class="textarea w609" id="JS_other_text" placeholder="其他" data-lengthlimit="2000">'+(a?$.wrapToggle(a,"toR"):"")+'</textarea><br><p class="limit-count"><span>2000</span>字</p></td></tr></table><p class="mt10"><a href="javascript:;" title="保存" class="btn btn-primary noradius ml50 JS_save_someone">保存</a><a href="javascript:;" class="btn btn-primary noradius ml50 disabled">已保存<i class="i-bingo"></i></a><a href="javascript:;" class="JS_delete a-default ml10" onclick="$.Delete( this )">删除</a></p></div>';return b;};$.Delete=function(c,b){var e=$(c),d=e.closest(".field-box"),a=d.prev();if(d.parent().find(".field-box").length==1){if(b){alert("该分类至少需要一条信息!");e.hide();return;}else{d.siblings("p").show();}}if(a[0].tagName.toLowerCase()=="hr"){a.remove();}d.remove();};$.addNew=function(c,b){var a='<hr class="hr mt50">';switch(b){case"work":a+=$.getWorkHtml();break;case"project":a+=$.getProjectHtml();break;case"train":a+=$.getTrinHtml();break;case"education":a+=$.getEducationHtml();break;case"skill":a+=$.getSkillHtml();break;}$(c).closest(".fieldset").append(a);};$.wrapToggle=function(b,a){if(a=="toR"){b=b.replace(/\<br \/\>|\<br\>/g,"\r\n");}else{b=b.replace(/\r\n/g,"<br>");}return b;};$.UploadResumeFile=function(){var g=$(".progress span");var h=$(".progress code");var a=$(".progress");var c=$(".files");var f=$(".upload-file");for(var e=0,d=f.length;e<d;e++){var j=f.eq(e),b=j.attr("data-url");j.wrap('<form action="'+b+'" method="POST" enctype="multipart/form-data"></form>');j.change(function(){$(this).closest("form").ajaxSubmit({dataType:"json",beforeSend:function(){},uploadProgress:function(m,i,l,k){},success:function(k){$(".entry-progress .progress span").css("width","100%");$(".entry-progress code").text("100%");var i=function(){if(window.t1){clearTimeout(t1);}$(".entry-notice").show();$(".entry-progress").hide();$(".re-entry").hide();$(".upload-file").val("");};if(k&&k.status=="ok"){$.alert('<p class="alert-notice" style="margin-left: 77px;">简历上传成功，我们将会对您上传的简历进行审核，若审核通过，<br>您将会得到<span style="color:#FC7524">5</span>个聘点的奖励，请稍后登录录入记录查看。</p>',function(){window.location.href="/resumeupload/uploadlist/";},"",{confirmByShadow:true});}else{if(k&&k.status=="phone_error"){$.confirm('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>'+k.msg+"</p>","","","",{handlers:[{title:"再试一次",eventType:"click",className:"layer-button grey-button",event:function(){$._LayerOut.close();}},{title:"手动录入",eventType:"click",className:"layer-button blue-button",event:function(){window.ResumeData=k;$("#JS_user_tab a").eq(1).click();if(k&&k.upload_file){$("#JS_upload_file").val(k.upload_file);}else{$("#JS_upload_file").val();}$._LayerOut.close();}}]});}else{var l=k&&k.msg||"上传失败了！";$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>'+l+"</p>");}}i();},error:function(){if(!window.stopByUser){$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>上传失败！</p>');}if(window.t1){clearTimeout(t1);}$(".entry-notice").show();$(".entry-progress").hide();$(".re-entry").hide();$(".upload-file").val("");}});});}};$.Serialize=function(){var n=true,l=window.ResumeData||{contact_info:{},resume:{job_target:{},professional_skills:[],educations:[],projects:[],trains:[],works:[],other_info:{content:""}}},p=function(w,v,r,s,t,u){if(typeof r!="undefined"){if(!v||!regs[t].test(v)||(v==u)){w.addClass("tip-error");n=false;}}if(typeof s!="undefined"){if(!v){w.siblings(".button").addClass("tip-error");n=false;}}},i=function(){var s=$("#JS_contact_info").find('input[type="text"],select'),r={},C=$("#JS_contact_info").find('[name="gender"]:checked').val(),u=$("#JS_contact_info").find('[name="political_landscape"]:checked').val(),D=$("#JS_contact_info").find('[name="highest_degree"]').val(),F=$("#JS_contact_info").find('[name="age"]').val();r.gender=C;r.political_landscape=u;r.highest_degree=D;r.age=F;for(var y=0,w=s.length;y<w;y++){var x=s.eq(y),v=x.val(),z=x.attr("data-equired"),A=x.attr("data-equ"),B=x.attr("data-reg"),E=x.attr("placeholder"),t=x.attr("name");p(x,v,z,A,B,E);if(v==E){v="";}r[t]=v;}return r;},m=function(){var J=$("#JS_work_info").find(".field-box"),x=[];for(var H=0,F=J.length;H<F;H++){var I=J.eq(H),u=I.find(".JS_company_name"),K=I.find(".JS_position_title"),G=I.find(".work_start_year"),E=I.find(".work_end_year"),s=I.find(".work_start_month"),C=I.find(".work_end_month"),t=I.find(".JS_job_desc"),r=[],y={};r.push(u,K,G,E,s,C,t);for(var A=0,z=r.length;A<z;A++){var I=r[A],M=I.val(),D=I.attr("data-equired"),B=I.attr("data-equ"),w=I.attr("data-reg"),v=I.attr("placeholder"),L=I.attr("name");p(I,M,D,B,w,v);if(M==v){M="";}if(I.hasClass("JS_company_name")){y.company_name=M;}if(I.hasClass("JS_position_title")){y.position_title=M;}if(I.hasClass("JS_job_desc")){y.job_desc=M;}if(I.hasClass("work_start_year")){y.start_year=M;}if(I.hasClass("work_start_month")){y.start_month=M;}if(I.hasClass("work_end_year")){y.end_year=M;}if(I.hasClass("work_end_month")){y.end_month=M;}}x.push({company_name:y.company_name,position_title:y.position_title,job_desc:y.job_desc,start_time:y.start_year+"-"+y.start_month,end_time:(y.end_year!="至今"?y.end_year+"-"+y.end_month:"至今")});}return x;},h=function(){var I=$("#JS_project_info").find(".field-box"),B=[];for(var G=0,E=I.length;G<E;G++){var H=I.eq(G),u=H.find(".JS_project_name"),K=H.find(".JS_job_title"),F=H.find(".project_start_year"),D=H.find(".project_end_year"),s=H.find(".project_start_month"),A=H.find(".project_end_month"),t=H.find(".JS_project_desc"),r=[],J={};r.push(u,K,F,D,s,A,t);for(var y=0,x=r.length;y<x;y++){var H=r[y],M=H.val(),C=H.attr("data-equired"),z=H.attr("data-equ"),w=H.attr("data-reg"),v=H.attr("placeholder"),L=H.attr("name");p(H,M,C,z,w,v);if(M==v){M="";}if(H.hasClass("JS_project_name")){J.project_name=M;}if(H.hasClass("JS_job_title")){J.job_title=M;}if(H.hasClass("JS_project_desc")){J.project_desc=M;}if(H.hasClass("project_start_year")){J.start_year=M;}if(H.hasClass("project_start_month")){J.start_month=M;}if(H.hasClass("project_end_year")){J.end_year=M;}if(H.hasClass("project_end_month")){J.end_month=M;}}B.push({project_name:J.project_name,job_title:J.job_title,project_desc:J.project_desc,start_time:J.start_year+"-"+J.start_month,end_time:(J.end_year!="至今"?J.end_year+"-"+J.end_month:"至今")});}return B;},e=function(){var I=$("#JS_education_info").find(".field-box"),B=[];for(var G=0,E=I.length;G<E;G++){var H=I.eq(G),u=H.find(".JS_school"),K=H.find(".JS_major"),F=H.find(".edu_start_year"),D=H.find(".edu_end_year"),s=H.find(".edu_start_month"),A=H.find(".edu_end_month"),t=H.find(".JS_degree"),r=[],J={};r.push(u,K,F,D,s,A,t);for(var y=0,x=r.length;y<x;y++){var H=r[y],M=H.val(),C=H.attr("data-equired"),z=H.attr("data-equ"),w=H.attr("data-reg"),v=H.attr("placeholder"),L=H.attr("name");p(H,M,C,z,w,v);if(M==v){M="";}if(H.hasClass("JS_school")){J.school=M;}if(H.hasClass("JS_major")){J.major=M;}if(H.hasClass("JS_degree")){J.degree=M;}if(H.hasClass("edu_start_year")){J.start_year=M;}if(H.hasClass("edu_start_month")){J.start_month=M;}if(H.hasClass("edu_end_year")){J.end_year=M;}if(H.hasClass("edu_end_month")){J.end_month=M;}}B.push({school:J.school,major:J.major,degree:J.degree,start_time:J.start_year+"-"+J.start_month,end_time:(J.end_year!="至今"?J.end_year+"-"+J.end_month:"至今")});}return B;},d=function(){var H=$("#JS_train_info").find(".field-box"),A=[];for(var F=0,D=H.length;F<D;F++){var G=H.eq(F),v=G.find(".JS_train_desc"),E=G.find(".train_start_year"),B=G.find(".train_end_year"),s=G.find(".train_start_month"),z=G.find(".train_end_month"),r=[],I={};r.push(v,E,B,s,z);for(var x=0,w=r.length;x<w;x++){var G=r[x],K=G.val(),C=G.attr("data-equired"),y=G.attr("data-equ"),u=G.attr("data-reg"),t=G.attr("placeholder"),J=G.attr("name");p(G,K,C,y,u,t);if(K==t){K="";}if(G.hasClass("JS_train_desc")){I.train_desc=K;}if(G.hasClass("train_start_year")){I.start_year=K;}if(G.hasClass("train_start_month")){I.start_month=K;}if(G.hasClass("train_end_year")){I.end_year=K;}if(G.hasClass("train_end_month")){I.end_month=K;}}A.push({train_desc:I.train_desc,start_time:I.start_year+"-"+I.start_month,end_time:(I.end_year!="至今"?I.end_year+"-"+I.end_month:"至今")});}return A;},g=function(){var B=$("#JS_skill_info").find(".field-box"),A=[];for(var x=0,v=B.length;x<v;x++){var w=B.eq(x),C=w.find(".JS_skill_desc"),s=w.find(".JS_proficiency"),y=[],u={};y.push(C,s);for(var H=0,F=y.length;H<F;H++){var w=y[H],t=w.val(),z=w.attr("data-equired"),D=w.attr("data-equ"),E=w.attr("data-reg"),G=w.attr("placeholder"),r=w.attr("name");p(w,t,z,D,E,G);if(t==G){t="";}if(w.hasClass("JS_skill_desc")){u.skill_desc=t;}if(w.hasClass("JS_proficiency")){u.proficiency=t;}}A.push({skill_desc:u.skill_desc,proficiency:u.proficiency});}return A;};var b=i();if(!n){alert("个人信息输入有误！");return false;}else{if($.isEmptyObject(l.contact_info)){l.contact_info={};}l.contact_info.name=b.name;l.contact_info.phone=b.phone;l.contact_info.email=b.email;l.contact_info.age=b.age;l.contact_info.highest_degree=b.highest_degree;l.contact_info.gender=b.gender;if($.isEmptyObject(l.resume)){l.resume={};}l.resume.work_years=b.work_years;if($.isEmptyObject(l.resume.job_target)){l.resume.job_target={};}l.resume.job_target.expectation_area=b.expectation_area;}var f=m();if(!n){alert("工作经历输入有误！");return false;}else{l.resume.works=f;}var k=e();if(!n){alert("教育经历输入有误！");return false;}else{l.resume.educations=k;}if($("body").attr("data-admin_edit")){var c=h();if(!n){alert("项目经历输入有误！");return false;}else{l.resume.projects=c;}var o=d();if(!n){alert("培训经历输入有误！");return false;}else{l.resume.trains=o;}var q=g();if(!n){alert("专业技能输入有误！");return false;}else{l.resume.professional_skills=q;}var j=$("#JS_evaluation").val();l.resume.self_evaluation=j||"";}var a=$("#JS_other_text").val();if(!l.resume.other_info){l.resume.other_info={};}l.resume.other_info.content=a||"";l.upload_file=$("#JS_upload_file").val();return l;};$(function(){$(document).on("change",'input[type="text"],textarea',function(){$(this).closest(".field-box.saved").removeClass("saved").find(".JS_save_someone").show().end().find(".disabled").hide();});$(".upload-file").change(function(){var a=$(this),b=a.val();if(!b){return;}$.uploadResume(b);});$(document).on("click","#JS_cancel_upload",function(){if(window.__jqxhr__){window.stopByUser=true;window.__jqxhr__.abort();window.__jqxhr__=null;window.stopByUser=null;}if(window.t1){clearTimeout(t1);}$(".entry-progress").hide();$(".entry-notice").show();});$(document).on("click",".JS_save_someone",function(){var k=$(this),o=k.closest(".field-box"),h=o.find("[data-equired]"),m=o.find("select[data-equ]");var f=true;for(var e=0,c=h.length;e<c;e++){var p=h.eq(e),a=p.attr("data-reg"),b=$.trim(p.val()),q=p.attr("placeholder");if(!regs[a].test(b)||q==b){p.addClass("tip-error");f=false;}}for(var d=0,g=m.length;d<g;d++){var n=m.eq(d),b=n.val();if(!b){n.siblings(".button").addClass("tip-error");f=false;}}if(!f){return;}k.hide().siblings(".btn.disabled").show();if(k.parent().hasClass("multiterm")){k.siblings(".JS_add_new").show();}k.siblings(".JS_delete").show();o.addClass("saved");});$.loadResume(ResumeData);$.placeholderHandle();$.UploadResumeFile();$(document).on("focus","#JS_resume_content [placeholder]",function(){var b=$(this),a=b.attr("placeholder"),c=b.val();if(c==a){b.val("");}});$(document).on("blur","#JS_resume_content [placeholder]",function(){var b=$(this),a=b.attr("placeholder"),c=b.val();if(c==""&&!b.hasClass("data-fixholder")){b.val(a);}});});