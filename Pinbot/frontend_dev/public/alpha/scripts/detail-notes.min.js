!function(){var t=document.body.getAttribute("data-resumeid"),e=angular.module("Notes",[]);e.config(["$interpolateProvider",function(t){t.startSymbol("{[{"),t.endSymbol("}]}")}]),e.factory("notes",["$http",function(t){}]),e.controller("notes",["$scope","$timeout",function(e,a){var o=$(".ic-notes-prev"),n=$(".ic-notes-next");e.openDialog=!1,e.comment="",e.currPos=0,e.maxRow=3,e.sliceData=function(){return(e.cachedData||[]).slice(e.currPos,e.currPos+e.maxRow)},$.get("/resumes/get_comments/"+t+"/",function(t){t.status&&a(function(){e.cachedData=t.data||[],e.data=e.sliceData(),e.maxLength=e.cachedData.length,$(".notes-body").show(),$(".notes").removeClass("loading")})}),e.toggle=function(){(e.openDialog=!e.openDialog)&&setTimeout(function(){$(".notes-textbox textarea").focus()})},e.addComment=function(){return e.comment.length?void $.post("/resumes/add_comment/"+t+"/",{comment:e.comment},function(t){t.status&&a(function(){e.cachedData&&e.cachedData.unshift({id:t.data.comment_id,date:(new Date).toLocaleDateString(),text:e.comment}),e.comment="",e.toggle(),e.currPos=0,e.maxLength=e.cachedData.length,e.updatePagerState()})}):void setTimeout(function(){$(".notes-textbox textarea").focus()})},e.delComment=function(o,n){$.post("/resumes/delete_comment/"+t+"/"+o+"/",function(t){a(function(){e.cachedData.splice(n,1),e.maxLength=e.cachedData.length,e.updatePagerState()})})},e.updatePagerState=function(){e.data=e.sliceData(),!e.data.length&&e.currPos&&(e.currPos-=e.maxRow,e.data=e.sliceData()),e.currPos>=e.maxRow?o.removeClass("disabled"):o.addClass("disabled"),e.currPos<e.maxLength-e.maxRow?n.removeClass("disabled"):n.addClass("disabled")},e.nextPage=function(){a(function(){e.currPos<e.maxLength-e.maxRow&&(e.currPos+=e.maxRow,e.updatePagerState())})},e.prevPage=function(){a(function(){e.currPos>=e.maxRow&&(e.currPos-=e.maxRow,e.updatePagerState())})}}])}();