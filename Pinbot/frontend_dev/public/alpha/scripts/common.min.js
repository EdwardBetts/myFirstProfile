$.LayerOut=function(t){return new $.LayerOut.prototype.init(t)},$.LayerOut.prototype={constructor:$.LayerOut,version:"1.1",init:function(t){$._LayerOut&&delete $._LayerOut,$(".modal-backdrop,.modal").remove(),this.setting=t=$.extend({title:"",html:"",dialogCss:"",isShowCloseBtn:!0,closeByShadow:!0,confirmByShadow:!1,handlers:[],callback:null,afterClose:null},t),$._LayerOut=this,$._LayerOut.getHtml(),void 0!=$._LayerOut&&void 0!=$._LayerOut.setting&&"function"==typeof $._LayerOut.setting.callback&&$._LayerOut.setting.callback()},getHtml:function(){setting=this.setting;var t='<div class="modal-backdrop fade in"></div><div class="modal" id="myModal" tabindex="-1" style="display: block;"><div class="modal-dialog" style="'+this.setting.dialogCss+'"><div class="modal-content" id="JS_modal_content">'+(this.setting.isShowCloseBtn?'<p class="close-layer text-right"><a href="javascript:;" class="close-layerout-btn JS_close_layerout"></a></p>':"")+(this.setting.title?'<div class="modal-header clearfix"><h4 class="modal-title Left" id="myModalLabel">'+this.setting.title+'</h4><span class="Right">'+(this.setting.date?this.setting.date:"")+"</span></div>":"")+'<div class="modal-body">'+this.setting.html+"</div></div></div></div>";if($("body").append(t),setting.handlers.length)for(var e=$('<div class="modal-handle"></div>'),i=0,n=setting.handlers.length;n>i;i++){var a=setting.handlers[i],o=$('<a class="'+a.className+'">'+a.title+"</a>");o.on(a.eventType,a.event),e.append(o)}$("#JS_modal_content").append(e);var l=$(".modal-dialog"),s=l.height(),r=$(window).height();l.css("marginTop",(r-s)/2+"px"),$(".JS_close_layerout").on("click",this.close);var c=this;$("#myModal").on("click",function(t){t=t||window.event;t.target||t.srcElement;t.target==this&&(setting.handlers.length&&setting.confirmByShadow?setting.handlers[0].event():setting.closeByShadow&&c.close())})},close:function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut,"function"==typeof setting.afterClose&&setting.afterClose()}},$.LayerOut.prototype.init.prototype=$.LayerOut.prototype,$.alert=function(t,e,i,n){var n=$.extend({title:i||"提示",html:t||"请确认！",handlers:[{title:"确定",eventType:"click",confirmByShadow:!1,className:"layer-button blue-button",event:function(){"function"==typeof e&&e(),$._LayerOut.close()}}]},n);$.LayerOut(n)},$.confirm=function(t,e,i,n,a){var a=$.extend({title:n||"提示",html:t||"请确认！",handlers:[{title:"确定",eventType:"click",className:"layer-button blue-button",event:function(){"function"==typeof e&&e(),$._LayerOut.close()}},{title:"取消",eventType:"click",className:"layer-button grey-button",event:function(){"function"==typeof i&&i(),$._LayerOut.close()}}]},a);$.LayerOut(a)},jQuery.prototype.serializeObject=function(){var t=new Object;return $.each(this.serializeArray(),function(e,i){i.name in t||(t[i.name]=i.value)}),t},$.Click=function(t,e){var i=function(t){return new i.prototype.init(t)};return i.prototype={constructor:i,init:function(e){this.setting=t.extend({dom:"",before:null,isOk:!0,lock:!0,unlock:function(){t(this.setting.dom).removeClass("locked-click")},callback:null},e),this.setting.lock&&t(this.setting.dom).addClass("locked-click"),"function"==typeof this.setting.before&&(this.setting.isOk=this.setting.before()),this.setting.isOk?this.setting.callback.call(this):this.setting.unlock.call(this)}},i.prototype.init.prototype=i.prototype,function(e){return e&&e.dom&&!t(e.dom).hasClass("locked-click")?i(e):void 0}}(jQuery),$.Ajax=function(t,e){var i=function(t){return new i.prototype.init(t)};return i.prototype={constructor:i,init:function(e){this.setting=e=t.extend({url:"",form:"",callDom:"",method:"post",isOk:!0,data:"",failed:function(){t.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>请求失败了，刷新再试一下吧！</p>')},successed:function(e){e&&"ok"==e.status?this.setting.callback&&"function"==typeof this.setting.callback?this.setting.callback(e):t.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>操作成功！</p>'):this.setting.errorCallback&&"function"==typeof this.setting.errorCallback?this.setting.errorCallback(e):e&&e.msg?t.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>'+e.msg+"</p>"):t.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>请求失败了，刷新再试一下吧！</p>')},verify:null,callback:null,errorCallback:null},e);var i=t(this.setting.form),n=this;this.setting.verify&&(this.setting.isOk=this.setting.verify()),i&&!this.setting.data&&(this.setting.data=t(this.setting.form).serializeObject()),this.setting.isOk?window._commonAjax=t[this.setting.method](this.setting.url,this.setting.data,function(t){n.setting.successed.call(n,t),n.unlock(),window._commonAjax=null}).fail(function(){n.setting.failed.call(n),n.unlock()}):n.unlock()},unlock:function(){this.setting.callDom&&t(this.setting.callDom).removeClass("locked-click")}},i.prototype.init.prototype=i.prototype,function(t){return i(t)}}(jQuery),$.commonAjax=function(){if($(this).hasClass("locked-click"))return!1;window._commonAjax&&(window._commonAjax.abort(),window._commonAjax=null);var t=this,e=$(this),i=e.attr("data-before"),n=e.attr("data-ajax_common_type"),a=e.attr("data-ajax_verify"),o=e.attr("data-callback"),l=e.attr("data-errorCallback"),s=e.attr("data-method"),r="",c="",d={callDom:t};"normal"==n?(c=e.attr("data-ajax_url"),s=s||"get",d.data=$.extend(!0,{},e.data()),delete d.data.ajax_url,delete d.data.before,delete d.data.ajax_common_type,delete d.data.ajax_verify,delete d.data.callback,delete d.data.errorCallback,delete d.data.method):(r=e.attr("data-form")?$(e.attr("data-form")):e.closest("form"),c=r.attr("data-ajax_url")||r.attr("action"),s=s||"post",d.form=r),a&&"function"==typeof window[a]&&(d.verify=function(){return window[a](r)}),o&&"function"==typeof window[o]&&(d.callback=window[o]),l&&"function"==typeof window[l]&&(d.errorCallback=window[l]),d.url=c,d.method=s,$.Click({dom:t,before:window[i],callback:function(){$.Ajax(d)}})},filterXss=function(t){var e=/<script>|<\/script>/gim,i=function(t,e){return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;")};return t=t.replace(e,i)};var isValidEmail=function(t){return"string"!=typeof t?!1:t.match(/^[0-9a-z_\.]+@[0-9a-z_\.\-]+$/i)?!0:!1};$(function(){$("body").on("click",function(){var t=$(".main-user-control-dropdown-menu");t.is(":visible")&&t.hide()}),$("body").on("click",".main-user-control-icon",function(t){t.stopPropagation(),$(".tao-money-tips").hide(),$(this).parent().find(".main-user-control-dropdown-menu").toggle()}),$("body").on("click",".tao-money-tips>p",function(t){var e=$(this).data("memo-url");$.post(e,function(){}),$(this).parent().fadeOut()})});