(function(){var a=angular.module("settingApp",["app.config"]);a.controller("settingCtrl",["$scope","$http",function(b,c){b.datas=angular.fromJson(angular.element(document.getElementsByTagName("form")[0]).attr("data-datas"));b.allAreaChecked=b.datas.setting.job_domain.length?false:true;b.isActive=function(h,g){for(var f=0,d=g.length;f<d;f++){var e=g[f];if(e.id==h){return true;}}return false;};b.toggleActive=function(g,h){if(b.isActive(g.id,h)){for(var f=0,d=h.length;f<d;f++){var e=h[f];if(e.id==g.id){h.splice(f,1);break;}}}else{h.push(angular.copy(g));}};b.addTile=function(d,e){e.push(angular.copy(d));};b.removeTitle=function(g,h){for(var f=0,d=h.length;f<d;f++){var e=h[f];if(e==g){h.splice(f,1);break;}}};b.isActiveTitle=function(g,h){for(var f=0,d=h.length;f<d;f++){var e=h[f];if(e==g){return true;}}return false;};b.setKeywords=function(){if(!b.keywordText){return false;}b.addTile(b.keywordText,b.datas.setting.title);b.keywordText="";};b.watchKeyword=function(d){if(b.canSave(d)){b.setKeywords();}};b.canSave=function(d){var e=d.keyCode;if(e==188){b.keywordText=b.keywordText.substring(0,b.keywordText.length-1);return true;}return false;};b.resetJobDomain=function(d){b.datas.setting.job_domain=[];};b.save=function(){c.post(".",JSON.stringify(b.datas.setting)).success(function(d){if(d&&d.status=="ok"&&d.redirect_url){location.href=d.redirect_url;}});};}]);a.directive("ngEnter",function(){return function(d,c,b){c.bind("keydown keypress",function(e){if(e.which===13){d.$apply(function(){d.$eval(b.ngEnter);});e.preventDefault();}});};});})();