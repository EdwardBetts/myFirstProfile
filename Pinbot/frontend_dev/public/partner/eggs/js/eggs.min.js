jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}}),$.Eggs=function(a,b){if(a){var c=function(a){return new c.prototype.init(a)};return c.prototype={constructor:c,eggCookieName:"isShowEggNew",countDayByDayTime:function(a){var c=function(a){var c;return c=a!=b&&("string"==typeof a||"number"==typeof a)?new Date(a):new Date,{y:c.getFullYear(),m:c.getMonth()+1,d:c.getDate(),h:0,i:0,s:0}},d=c(),e=new Date(d.y,d.m-1,d.d+a,d.h,d.i,d.s);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" 00:00:00"},getTimeStamp:function(a){var b=new Date;return("string"==typeof a||"number"==typeof a)&&(b=new Date(a)),Math.round(b/1e3)},getTimeStampM:function(a){var b=new Date;return"string"==typeof a?(a=a.trim(),b=a.match(/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2}) ([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})$/i)?new Date(RegExp.$1,parseInt(RegExp.$2)-1,RegExp.$3,RegExp.$4,RegExp.$5,RegExp.$6):a.match(/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})/i)?new Date(RegExp.$1,parseInt(RegExp.$2)-1,RegExp.$3):new Date(a)):"number"==typeof a&&(b=new Date(a)),b.getTime()},setCookieToday:function(a,b){var d=this.countDayByDayTime(1),e=new Date,f=this.getTimeStampM(d);e.setTime(f),document.cookie=a+"="+b+";expires="+e.toUTCString()+";path=/;"},setCookie:function(a,c,d){var e=d!=b&&"number"==typeof d?864e5*parseInt(d):864e5,f=new Date;f.setTime(f.getTime()+e),document.cookie=a+"="+c+";expires="+f.toUTCString()+";path=/;"},delCookie:function(a){var b=new Date;b.setTime(b.getTime()-86400),document.cookie=a+"=;expires="+b.toUTCString()+";path=/;"},getCookie:function(a){var b=document.cookie.match("(^|;) ?"+a+"=([^; ]*)(;|$)");return b?b[2]:null},init:function(b){this.setting=a.extend({reqUrl:" /activity/find_egg/",reqCloseUrl:"/activity/close_easter/",selector:".eggs",eggPopupSelector:"#JS_egg",eggSelector:"#JS_drop_egg",popupSelector:"#JS_egg",closeSelector:".close",randomImg:"",eggLeftPadding:"",giftName:"",giftType:"",giftImgSelector:"",giftWordSelector:"",realGift:{jd_shopping_card_50:{imgUrl:"/static/partner/eggs/img/JD.gif",word:"50\u5143\u4eac\u4e1c\u8d2d\u7269\u5361"},christmas_cake:{imgUrl:"/static/partner/eggs/img/snow.gif?t=151211",word:"\u5723\u8bde\u739b\u5fb7\u7433\u86cb\u7cd5\u793c\u76d2"},starbuck:{imgUrl:"/static/partner/eggs/img/starbuck.gif",word:"Starbucks\u661f\u793c\u5361"},mask:{imgUrl:"/static/partner/eggs/img/Masks.gif",word:"3M\u9632\u973e\u53e3\u7f69"},pillow:{imgUrl:"/static/partner/eggs/img/pillow.gif",word:"\u8058\u5b9d\u591a\u529f\u80fd\u62b1\u6795"},pinbot_note:{imgUrl:"/static/partner/eggs/img/notebook.gif",word:"\u9650\u91cf\u7248\u8058\u5b9d\u6c5f\u6e56\u7eaa\u5ff5\u672c"},hongbao_1:{imgUrl:"/static/partner/eggs/img/hongbao.gif",word:"1\u5143\u5fae\u4fe1\u7ea2\u5305"},hongbao_3:{imgUrl:"/static/partner/eggs/img/hongbao.gif",word:"3\u5143\u5fae\u4fe1\u7ea2\u5305"},hongbao_5:{imgUrl:"/static/partner/eggs/img/hongbao.gif",word:"5\u5143\u5fae\u4fe1\u7ea2\u5305"},hongbao_8:{imgUrl:"/static/partner/eggs/img/hongbao.gif",word:"8\u5143\u5fae\u4fe1\u7ea2\u5305"},apple:{imgUrl:"/static/partner/eggs/img/apple.gif",word:"\u7cbe\u54c1\u7ea2\u5bcc\u58eb\u82f9\u679c\u793c\u76d2"},kiwi:{imgUrl:"/static/partner/eggs/img/kiwi.gif",word:"\u610f\u5927\u5229\u7eff\u5947\u5f02\u679c\u793c\u76d2"},lemon:{imgUrl:"/static/partner/eggs/img/lemon.gif",word:"\u8fdb\u53e3\u5c24\u7acb\u514b\u67e0\u6aac\u793c\u76d2"},orange:{imgUrl:"/static/partner/eggs/img/orange.gif",word:"\u7f8e\u56fd\u65b0\u5947\u58eb\u8110\u6a59\u793c\u76d2"}},unrealGift:{pinot_point_10:{imgUrl:"/static/partner/eggs/img/10pindian.gif",word:"10\u8058\u70b9"},smile:{imgUrl:"/static/partner/eggs/img/hehe.gif",word:"\u7231\u7b11\u7684\u4eba\u513f\u8fd0\u6c14\u603b\u4e0d\u4f1a\u592a\u5dee\u3002"},cup:{imgUrl:"/static/partner/eggs/img/Trophy.gif",word:"\u5956\u4f60\u4e00\u4e2a\u6c34\u6676\u676f\uff0c\u6700\u4f73HR\u7684\u8363\u8000\u4e00\u5b9a\u975e\u4f60\u83ab\u5c5e\u3002"},black_card:{imgUrl:"/static/partner/eggs/img/card.gif",word:"\u83b7\u5f97\u4e00\u5f20\u201c\u767e\u7ea6\u767e\u4e2d\u201d\u9ed1\u5361\uff0c\u5927\u725b\u4ece\u6b64\u4e0d\u518d\u96be\u7ea6\u3002"},medicine:{imgUrl:"/static/partner/eggs/img/Drug.gif",word:"\u9001\u4f60\u4e00\u74f6\u901f\u6548\u62db\u4eba\u80f6\u56ca\uff0c\u6309\u9700\u670d\u7528\u6548\u679c\u66f4\u4f73\u3002"},new_year_xin:{imgUrl:"/static/partner/eggs/img/xin.gif",word:"\u3010\u65b0\u3011"},new_year_nian:{imgUrl:"/static/partner/eggs/img/nian.gif",word:"\u3010\u5e74\u3011"},new_year_kuai:{imgUrl:"/static/partner/eggs/img/kuai.gif",word:"\u3010\u5feb\u3011"},new_year_le:{imgUrl:"/static/partner/eggs/img/le.gif",word:"\u3010\u4e50\u3011"}}},b),null===this.getCookie(this.eggCookieName)&&this.randomImg(),window.__Eggs=this},queryBonus:function(){var b=this,c=this.setting;this.setPos;a.ajax({type:"get",dataType:"json",url:c.reqUrl,success:function(c){b.setCookieToday(b.eggCookieName,1,1),a(".egg-click-btn").html("\u7838\u5f00\u770b\u770b"),"ok"===c.status?b.showBonus(c):b.showBonus(c,"smile",0)},error:function(c){b.setCookieToday(b.eggCookieName,1,1),a(".egg-click-btn").html("\u7838\u5f00\u770b\u770b"),console.log(c),b.showBonus(c,"smile",0)}})},showBonus:function(c,d,e){var g=this.setting;this.setPos;switch(g.giftName=d!=b&&"string"==typeof d?d:c.gift,g.giftType=e!=b&&"string"==typeof e?e:c.gift_type,"pinot_point_10"==c.gift&&(g.giftType=0),"ok"===c.status&&c.gift.match(/^new_year_/i)&&(g.giftType=1),g.giftType===b&&(g.giftType=0),window.__Eggs.bindCloseEvent(),g.giftType){case 0:g.popupSelector="#JS_unreal",g.giftImgSelector="#JS_unreal_img",g.giftWordSelector="#JS_unreal_word";break;case 1:g.popupSelector="#JS_real",g.giftImgSelector="#JS_real_img",g.giftWordSelector="#JS_real_word"}if(a(".eggs-popup").css("top","-100px"),a(g.eggPopupSelector).hide(),1==g.giftType){var i=parseInt(a(g.popupSelector).css("top"));i-=50,a(g.popupSelector).css("top",i+"px")}a(g.popupSelector).show(),window.__Eggs.setHtml(),window.__Eggs.bindCloseEvent(),a(".eggs-layer").show(),window.__Eggs.setPos()},closeEgg:function(){var b=this;a.ajax({type:"get",dataType:"json",url:b.setting.reqCloseUrl,success:function(a){"ok"===a.status&&b.setCookieToday(b.eggCookieName,1,1)},error:function(a){console.log(a)}})},loadImage:function(b){var c=function(a){function d(){f(),a.resolve(c)}function e(){f(),a.reject(c)}function f(){c.onload=null,c.onerror=null,c.onabort=null}var c=new Image;c.onload=d,c.onerror=e,c.onabort=e,c.src=b};return a.Deferred(c).promise()},waitSeconds:function(){var a=jQuery.Deferred(),b=1e3*Math.ceil(3*Math.random());return setTimeout(function(){a.resolve()},b),a.promise()},countDayByDay:function(a){var c=function(a){var c;return c=a!=b&&("string"==typeof a||"number"==typeof a)?new Date(a):new Date,{y:c.getFullYear(),m:c.getMonth()+1,d:c.getDate(),h:c.getHours(),i:c.getMinutes(),s:c.getSeconds()}},d=c(),e=new Date(d.y,d.m-1,d.d+a,d.h,d.i,d.s);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},getDay:function(a){if("string"==typeof a&&a.match(/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})/i)){var b=parseInt(RegExp.$1),c=parseInt(RegExp.$2),d=parseInt(RegExp.$3);return b+"-"+c+"-"+d}return""},randomImg:function(){var b=this,c=this.setting,f=(this.getDay("2015-12-14"),this.getDay("2015-12-19"),this.getDay("2015-12-20")),g=this.getDay("2015-12-25"),h=this.getDay("2016-1-4"),i=this.getDay("2016-1-25"),j=Math.ceil(10*Math.random());if(this.countDayByDay(0)>=f&&this.countDayByDay(0)<=g)c.randomImg="/static/partner/eggs/img/s4_140_c.png",c.eggLeftPadding="35%";else if(this.countDayByDay(0)>=h&&this.countDayByDay(0)<=i)c.randomImg="/static/partner/eggs/img/s6_140_c.png",c.eggLeftPadding="35%";else switch(j){case 1:c.randomImg="/static/partner/eggs/img/L2_220_c.png",c.eggLeftPadding="25%";break;case 2:c.randomImg="/static/partner/eggs/img/m1_140_c.png",c.eggLeftPadding="35%";break;case 3:c.randomImg="/static/partner/eggs/img/m2_140_c.png",c.eggLeftPadding="35%";break;case 4:c.randomImg="/static/partner/eggs/img/m3_140_c.png",c.eggLeftPadding="35%";break;case 5:c.randomImg="/static/partner/eggs/img/m4_140_c.png",c.eggLeftPadding="35%";break;case 6:c.randomImg="/static/partner/eggs/img/s1_100_c.png",c.eggLeftPadding="40%";break;case 7:c.randomImg="/static/partner/eggs/img/s2_100_c.png",c.eggLeftPadding="40%";break;case 8:c.randomImg="/static/partner/eggs/img/s3_100_c.png",c.eggLeftPadding="40%";break;case 9:c.randomImg="/static/partner/eggs/img/L1_220_c.png",c.eggLeftPadding="25%";break;default:c.randomImg="/static/partner/eggs/img/s1_100_c.png",c.eggLeftPadding="40%"}var k=c.randomImg,l=k,m=k,b=this,o=this.loadImage(c.randomImg);o.then(function(d){return a(c.eggSelector).attr("src",c.randomImg),b.loadImage(l)}).then(function(a){return b.loadImage(m)}).then(function(a){return b.loadImage(m)}).done(function(a){var c=b.waitSeconds();c.then(function(){window.__Eggs.animation()})})},hideModalList:"",chkOtherModals:function(){return a(".black-bg").length&&"block"==a(".black-bg").css("display")?("block"==a(".js-task-tip-contain").css("display")?this.hideModalList=".js-task-tip-contain":"block"==a(".task-close-tip").css("display")?this.hideModalList=".task-close-tip":"block"==a("#js-task-content").css("display")?this.hideModalList="#js-task-content":"block"==a("#js-reward-content").css("display")&&(this.hideModalList="#js-reward-content"),!0):!1},showOtherModals:function(){"string"==typeof this.hideModalList&&""!=this.hideModalList&&a(this.hideModalList).show()},hideOtherModals:function(){"string"==typeof this.hideModalList&&""!=this.hideModalList&&a(this.hideModalList).hide()},animation:function(){var b=this,c=this.setting;b.chkOtherModals()&&b.hideOtherModals(),a(c.selector).show(),a(c.eggPopupSelector).show();var e=(a(c.eggSelector),c.randomImg),g=(a(c.popupSelector),(a(window).height()-a("#JS_egg").height())/2+70+"px");a(".eggs-popup-layer").addClass("half-dark"),a(".egg-box img").css("left",c.eggLeftPadding),a("#JS_egg").animate({top:g},500,"easeInCubic"),setTimeout(function(){var b=e;a(c.eggSelector).attr("src",b)},1e3),b.bindCloseEvent(),a(".egg-close").on("click",function(){b.showOtherModals(),b.closeEgg()}),a(".egg-click").on("click",function(){a(".egg-click-btn").html('<img src="/static/b_common/img/loading.gif" border="0">'),b.queryBonus()})},setPos:function(){var b=this.setting;a(b.popupSelector);a("#JS_real").css({marginTop:(a(window).height()-a("#JS_real").height())/2+70+"px"}),a("#JS_unreal").css({marginTop:(a(window).height()-a("#JS_unreal").height())/2+"px"})},bindCloseEvent:function(){var b=this,c=b.setting;a(c.closeSelector).on("click",function(){a(c.selector).hide(),b.showOtherModals()})},setHtml:function(){var b=this,c=b.setting,d=a(c.giftImgSelector),e=a(c.giftWordSelector),f="2. \u626b\u7801\u52a0\u5c0f\u52a9\u624b\u5e76\u53d1\u9001\u56fe\u7247\u9886\u5956",g="",h=!1;for(var i in c.unrealGift)if(i===c.giftName){h=!1,d.attr("src",c.unrealGift[i].imgUrl),e.html(c.unrealGift[i].word),g=i;break}for(var i in c.realGift)if(i===c.giftName){h="pinot_point_10"==i?!1:i.match(/^new_year_/i)?!0:!0,d.attr("src",c.realGift[i].imgUrl),e.html(c.realGift[i].word),g=i;break}g.match(/^(self|manual)_service_/i)?(a(".eggs-popup .blue-reel").css("padding","32px 0"),"self_service_111"==g?f='2\u3001\u626b\u7801\u52a0\u5c0f\u52a9\u624b\u4e3a\u5fae\u4fe1\u597d\u53cb\uff0c\u628a\u56fe\u53d1\u7ed9\u5c0f\u52a9\u624b\uff1b<br>3\u30012015\u5e74\u5185\u8d2d\u4e70\u4efb\u610f\u81ea\u52a9\u578b\u5957\u9910\u53ef<span style="color:#fff;">\u51cf\u514d111</span>\u5143\uff1b<br><span style="color:#fff;">4\u3001\u4e00\u4e2a\u5957\u9910\u53ea\u80fd\u4f7f\u7528\u4e00\u5f20\u62b5\u7528\u5238\u3002</span>':"manual_service_500"==g?f='2\u3001\u626b\u7801\u52a0\u5c0f\u52a9\u624b\u4e3a\u5fae\u4fe1\u597d\u53cb\uff0c\u628a\u56fe\u53d1\u7ed9\u5c0f\u52a9\u624b\uff1b<br>3\u30012015\u5e74\u5185\u8d2d\u4e70\u4efb\u610f\u7701\u5fc3\u578b\u5957\u9910\u53ef<span style="color:#fff;">\u51cf\u514d500</span>\u5143\uff1b<br><span style="color:#fff;">4\u3001\u4e00\u4e2a\u5957\u9910\u53ea\u80fd\u4f7f\u7528\u4e00\u5f20\u62b5\u7528\u5238\u3002</span>':"manual_service_1111"==g&&(f='2\u3001\u626b\u7801\u52a0\u5c0f\u52a9\u624b\u4e3a\u5fae\u4fe1\u597d\u53cb\uff0c\u628a\u56fe\u53d1\u7ed9\u5c0f\u52a9\u624b\uff1b<br>3\u30012015\u5e74\u5185\u8d2d\u4e70\u4efb\u610f\u7701\u5fc3\u578b\u5957\u9910\u53ef<span style="color:#fff;">\u51cf\u514d1111</span>\u5143\uff1b<br><span style="color:#fff;">4\u3001\u4e00\u4e2a\u5957\u9910\u53ea\u80fd\u4f7f\u7528\u4e00\u5f20\u62b5\u7528\u5238\u3002</span>')):"pinot_point_10"==g?(a("#JS_unreal_word").html('<span class="small-title">\u606d\u559c\u4f60\u83b7\u5f97</span><span class="barcode-info-red barcode-info-gift gift-title" style="color:#f66b5d;">10\u8058\u70b9</span>'),a(".eggs-popup .blue-reel").css("padding","21px 0")):a(".eggs-popup .blue-reel").css("padding","32px 0"),h?a(".i-red-close").addClass("i-red-close-new"):a(".i-red-close").removeClass("i-red-close-new"),g.match(/^new_year_/i)?(a(".eggs-popup .gift-title-more").html("\u5feb\u4e0e\u5206\u8235\u4f19\u4f34\u51d1\u9f50\u201c\u65b0\u5e74\u5feb\u4e50\u201d\u9886\u53d6Sounder\u84dd\u7259\u97f3\u54cd\uff01<br><br>"),a(".eggs-popup .barcode-info-more").text("1. \u62cd\u4e0b\u6b64\u5f39\u7a97\uff08\u6216\u622a\u56fe\uff09\u51d1\u9f50 \u201c\u65b0\u5e74\u5feb\u4e50\u201d"),a(".eggs-popup .get-gift-desc-more").text("2. \u626b\u7801\u52a0\u5c0f\u52a9\u624b\u5e76\u53d1\u90014\u5f20\u622a\u56fe\u9886\u5956")):(a(".eggs-popup .gift-title-more").html("<br><br>"),a(".eggs-popup .barcode-info-more").text("1. \u62cd\u4e0b\u6b64\u5f39\u7a97\uff08\u6216\u622a\u56fe\uff09"),a(".eggs-popup .get-gift-desc-more").text("2. \u626b\u7801\u52a0\u5c0f\u52a9\u624b\u5e76\u53d1\u9001\u56fe\u7247\u9886\u5956")),a(".eggs-popup .get-gift-desc").html(f)}},c.prototype.init.prototype=c.prototype,c}}(jQuery),$(function(){$.Eggs()});