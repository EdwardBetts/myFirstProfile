function initCustom(){$(".custom-service").find("li").removeClass("active").find("input").val("0");}$(function(){$(".package-item").on("click",function(){var b=$(this),d=b.attr("data-id"),c=$("#JS_package"),a=$(".custom-service,#JS_click_buy");b.addClass("active").siblings(".active").removeClass("active");c.val(d);initCustom();});$("#JS_click_buy").on("click",function(){$(this).toggleClass("active").parent().siblings("ul").toggle();initCustom();});$(".custom-service li").click(function(){var b=$(this),c=b.attr("data-feed_id"),a=$("#JS_feed_id");if(b.hasClass("active")){b.find("input").val("0");a.val("");}else{b.find("input").val("1");a.val(c);}b.toggleClass("active").siblings().removeClass("active").find("input").val("0");});$(".custom-service li input").click(function(a){if($(this).parent().hasClass("active")){a.stopPropagation();}});$("#JS_buy_btn").click(function(){var c=$(this).attr("csrf_token"),e=$("#JS_package").val(),a=$("#JS_feed_id").val()||"",d=$(".custom-service li.active").find("input").val(),b=/^\d+$/g;if(!e){$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>请先选择需要购买的套餐！</p>');return false;}if(a){if(!d||!b.test(d)){$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>定制数量格式为正整数！</p>');return false;}}$.post("",{"package":e,feed_service:a,feed_count:d,csrfmiddlewaretoken:c},function(f){if(f&&f.status==="ok"){window.location.href=f.redirect_url;}else{if(f&&f.msg){$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>'+f.msg+"</p>");}else{$.alert('<p style="text-align:center;font-size:16px;"><i class="i-l-notice"></i>请求失败!请刷新页面再试！</p>');}}},"json");});});