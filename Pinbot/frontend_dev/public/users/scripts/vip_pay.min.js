$(function(){$(".payway").each(function(){var a=$(this);a.on("click",function(b){b.preventDefault();});});$(".confirm_pay_btn").on("click",function(b){b.preventDefault();$(this).attr("disabled","true");var a=$(this).attr("url"),c=window.open("about:blank");$.ajax({method:"get",url:a,success:function(d){if(d.status&&d.status==="ok"){var e='<div class="payway-alert"><h2>请你在新打开的页面上完成付款，付款完成前请不要关闭此窗口！</h2><label>完成付款后请根据你的情况点击以下按钮。</label><a url="/vip/alipay_result/" class="btn finish go_result">我已完成付款</a><a url="/vip/alipay_result/" class="btn fail go_result">支付遇到问题</a></div>';$.alert(e);$(".modal-header").css("display","none");$(".modal-handle").css("display","none");$("#myModal").unbind("click");c.location.href=d.pay_url;var f=d.order_id;$(".go_result").each(function(){var h=$(this),g=h.attr("url");g=g+f;h.attr("href",g);});}else{if(d.status&&d.status==="apply_error"){console.log(d.msg);$.alert(d.msg);$(".confirm_pay_btn").removeAttr("disabled");c.close();}}},error:function(d){$(".confirm_pay_btn").removeAttr("disabled");console.log(d);c.close();}});});});