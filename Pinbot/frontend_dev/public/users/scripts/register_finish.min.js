!function(a){var b=angular.module("app.register_finish",["app.config","ui.router","app.django","app.utils","app.filter"]),c=angular.injector(["app.django","app.utils"]),h=(c.get("tmpl"),c.get("static_url"),c.get("mockTest"),c.get("mockTestWithCoin"),c.get("confirmBox")),k=(c.get("alertBox"),c.get("getModeData"),c.get("postModeData"));c.get("pbFunc"),c.get("orderPay");b.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){var d="/";c.defaults.cache=!1,c.defaults.headers.get||(c.defaults.headers.get={}),c.defaults.headers.get["If-Modified-Since"]="0",b.otherwise(d)}]),b.factory("fRegisterFinish",function(){return{loading:!0,data:{}}}),b.run(function(a,b){a.$on("$viewContentLoaded",function(){b.removeAll()})}),b.controller("registerFinish",["$scope","$http","$state","$templateCache","fRegisterFinish",function(a,b,c,d,e){a.loading=e.loading;var f=$(".extra_common_param").attr("data-oid"),g=$(".extra_common_param").attr("data-price");"true"==$(".layout").attr("data-invalid-order");var i={order_id:f};a.isCharge=!0,k(b,i,"/vip/order/get_order_status/","",function(b){if(console.log("coin_paid_order",b),void 0!=b.status&&"ok"==b.status&&"paid"==b.order_status)if("pinbot_point"==$(".extra_common_param").attr("data-extra")){$(".header h1").html("\u60a8\u7684\u8058\u70b9\u8d2d\u4e70\u6210\u529f\uff01");var c='<div class="payway_field">';void 0!=b.pinbot_point&&(c+='<label>\u8d2d\u4e70\u8058\u70b9\uff1a<span class="cf46c62">'+b.pinbot_point+"</span>\u70b9<br><br>"),c+='<p class="form-control align-center" ><br><br><a class="btn btn-blue" href="/payment/my_account/">\u67e5\u770b\u6211\u7684\u8058\u70b9</a></p>',$(".box-content-info").html(c)}else if("renew_service"==$(".extra_common_param").attr("data-extra")){$(".header h1").html("\u81ea\u52a9\u5957\u9910\u7eed\u8d39\u6210\u529f\uff01");var c='<div class="payway_field">';c+='<div class="price content box-content lh180" >',c+='    <img class="info-icon" src="/static/b_common/img/pinbot380x380_icon_resume_ok.png" border="0" width="180">',c+="            <br>",c+='    <span class="c607d8b f14">\u60a8\u662f\u8058\u5b9d<a class="c63c2ec" href="javascript:void(0);">\u81ea\u52a9\u578b\u4f1a\u5458</a>\uff0c\u73b0\u5728\u60a8\u53ef\u4ee5\u4f7f\u7528\u8058\u70b9\u4e0b\u8f7d\u7b80\u5386\u4e86\uff01\u5feb\u6765\u8bd5\u8bd5\u5427\uff01',c+="    </span>",c+="</div>",c+='<p class="form-control align-center" >',c+='    <a class="btn btn-welcome-submit" href="/special_feed/page/">\u6211\u7684\u804c\u4f4d\u5b9a\u5236</a>',c+="</p>",$(".box-content-info").html(c)}else if("coin"==$(".extra_common_param").attr("data-extra")){$(".header h1").html("\u60a8\u7684\u91d1\u5e01\u5145\u503c\u6210\u529f\uff01");var c='<div class="payway_field"><label>\u5145\u503c\u91d1\u5e01\uff1a<span class="cf46c62">'+g+'</span>\u91d1\u5e01<br><br>\u652f\u4ed8\u91d1\u989d\uff1a<span  class="cf46c62">'+g+"\u5143</span></label></div>";c+='<p class="form-control align-center" ><br><br><a class="btn btn-blue" href="/payment/my_account/#mycoin">\u67e5\u770b\u6211\u7684\u91d1\u5e01</a></p>',$(".box-content-info").html(c)}else a.isCharge=!1;else $.alert('<p class="alert-notice-center"><span>\u62b1\u6b49\uff0c\u60a8\u7684\u652f\u4ed8\u5c1a\u672a\u6210\u529f\uff01</span></p>'),window.close();$(".header").css("display","block"),$(".content").css("display","block"),$.Menu()}),a.repay=function(a){var c=$(a.currentTarget).attr("data-url"),d=$(a.currentTarget).attr("data-order-id"),f={order_id:d};k(b,f,c,"",function(a){var b=a.pay_url;a.order_id;e.data=a,"string"==typeof b&&b.match(/^https?:\/\//i)&&window.open(b,"_blank"),$.LayerOut({html:h('<span class="pay-alert"></span><span class="pay-title">\u8bf7\u5728\u65b0\u5f00\u9875\u9762\u4e0a\u5b8c\u6210\u4ed8\u6b3e\uff0c\u4ed8\u6b3e\u5b8c\u6210\u524d\u8bf7\u52ff\u5173\u95ed\u6b64\u7a97\u53e3\uff01</span>',"\u5b8c\u6210\u4ed8\u6b3e\u540e\u8bf7\u70b9\u51fb","\u652f\u4ed8\u9047\u5230\u95ee\u9898","","\u6211\u5df2\u5b8c\u6210\u4ed8\u6b3e",""),afterClose:function(){}}),$(".modal").undelegate(".btn-pay-problem").delegate(".btn-pay-problem","click",function(a){$(".header h1").html('<span class="pay-failed"></span>Sorry...\u652f\u4ed8\u5931\u8d25'),$._LayerOut.close()}),$(".modal").undelegate(".btn-pay-ok").delegate(".btn-pay-ok","click",function(a){$._LayerOut.close(),$(".header h1").html("\u652f\u4ed8\u6210\u529f\uff01\u606d\u559c\u60a8\u6210\u4e3a\u8058\u5b9d\u4f1a\u5458\uff01");var b="";b+='<div class="payway_field">',b+='<label>\u7acb\u5373\u5b8c\u6210\u65b0\u624b\u4efb\u52a1\uff0c\u9886<span class="cf46c62">\u73b0\u91d1\u7ea2\u5305\uff01</span></label>',b+="</div>",b+='<div class="confirm_pay pd-top-20">',b+='<a href="'+$(".layout").attr("data-tutorial-url")+'" class="btn btn-welcome-submit">\u5f00\u59cb\u65b0\u624b\u4efb\u52a1</a>',b+="</div>",$(".box-content").html(b)})})}}])}();