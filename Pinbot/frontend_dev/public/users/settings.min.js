$("#myurl").on("blur",function(){var a=$("#myurl").prop("value");if(!a.match(/^https?:\/\/(.+)$/i)){$("#myurl").prop("value","http://"+a);}});$(function(){var b=$(".tab-nav a");
var a=$(".tab-content .tab");var d;b.each(function(f){var e=$(this);e.on("click",function(g){g.preventDefault();window.location.hash=e.attr("href");$(".tab-content .on").removeClass("on");
$(".tab-nav .on").removeClass("on");b.eq(f).addClass("on");a.eq(f).addClass("on");});});$(".profile-rss").find("li>a").on("click",function(){clearTimeout(d);
var f=$(this);if(f.hasClass("selected")){return false;}f.parents("ul").find(".selected").removeClass("selected");f.addClass("selected");var e=f.data("selected");
$(".selected-tip").remove();d=setTimeout(function(){$.post("/feed/modify_frequency",{frequency:e},function(g){if(g.status=="success"){var h=$('<p class="selected-tip">设置成功！</p>').appendTo(f.parent());
h.fadeOut(2000,function(){h.remove();});}});},1000);return false;});var c=window.location.hash;if(!c){return false;}if(/^(#pwd|#rss)$/.test(c)){$('a[href="'+c+'"]').click();
}});var goodsReceiptModal=function(){var a='<h2 class="text-center"><i class="pb-icon pb-icon-cargo pb-icon-fix"></i> 请填写您的收货地址</h2><div class="bangding clearFix">';
a+='<div class="pb-line">';a+='         <div class="pb-line-left">';a+='           <span class="c607d8b">所在地区：</span>';a+="         </div>";a+='         <div class="pb-line-right">';
a+='           <div class="pb-select noselect pb-select-province"><span>请选择</span> <i class="pb-icon pb-icon-arrow-down pb-icon-fix"></i></div>';a+='           <div class="pb-select-options pb-hide pb-select-options-province" ><ul><li class="noselect"><a href="javascript:void(0);" title="北京"><span>北京北京北京北京北京</span></a></li><li class="noselect"><a href="javascript:void(0);" title="上海"><span>上海</span></a></li><li class="noselect"><a href="javascript:void(0);" title="广州"><span>广州</span></a></li></ul></div>';
a+="         </div>";a+="       </div>";a+='</div><div class=""><a href="javascript:void(0);" class="bangding-confirm">保存</a></div>';$.LayerOut({html:a});
$(".bangding-confirm").on("click",function(){$(".modal-backdrop,.modal").remove();delete $._LayerOut;});$(".pb-select").on("click",function(){var b=$(his).attr("class");
});};$(".form-panel .pb-icon-pen").on("click",function(){goodsReceiptModal();});$("#js-bangding").on("click",function(){alertBangdingTip();});var alertBangdingTip=function(){var a='<div class="bangding clearFix"><div class="img-box"><img src="/static/task/images/1.png" style="padding:45px 0;"><div><em>1</em><p>扫码关注微信服务号</p></div></div><div class="img-box"><img src="/static/task/images/2.png"><div><em>2</em><p>点击右下角［个人中心］</p></div></div><div class="img-box mr0" ><img src="/static/task/images/3.png"><div><em>3</em><p>选择菜单第一项［注册绑定］<br>按照微信提示绑定账号</p></div></div></div><div class=""><a href="javascript:void(0);" class="bangding-confirm">确定</a></div>';
$.LayerOut({html:a});$(".bangding-confirm").on("click",function(){$(".modal-backdrop,.modal").remove();delete $._LayerOut;});};var windowUrl=window.location.href;
if(windowUrl.match(/users\/profile\/#bangding/g)){alertBangdingTip();$("#js-bangding").addClass("cf46c62");}$("p").undelegate(".unbindWeixin").delegate(".unbindWeixin","click",function(b){console.log("unbindWeixin",1);
var a='<div class="no-feed-alert"><h2><i class="i-warning"></i>解除微信绑定</h2><p class="tip"><br>您确认解除与“<span class="cf46c62">聘宝招聘版</span>”的微信绑定吗？解绑后将不再收到新的简历推荐提醒！</p><p><a class="btn confirm unbindNow" href="javascript:void(0);">确认解除</a><a class="btn cancel closeLayer" href="javascript:void(0);">取消</a></p></div>';
$.LayerOut({html:a});$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove();delete $._LayerOut;});$(".unbindNow").on("click",function(){var c=$.ajax({url:"/hr/unbind_weixin/",type:"get",cache:false,dataType:"json",success:function(d){if(d!=undefined&&d.status=="ok"){document.location.reload();
}else{alert("解绑失败！"+d.msg);}},error:function(){$(".modal-backdrop,.modal").remove();delete $._LayerOut;alert("解绑失败！");}});});});var isReSend=false;var timeInterval;
$("p").undelegate(".chg-phone").delegate(".chg-phone","click",function(b){var a='<div class="no-feed-alert"><h2><i class="i-warning"></i>绑定手机号码</h2><br><br>'+PB.modalLine3Col("请输入登录密码","login-passwd","password")+PB.modalLine3Col("请输入新的手机号码","new-phone")+PB.modalLine3Col("请输入短信验证码","code","text","use-sms-code")+'<br><p><a class="btn confirm chg-phone-now" href="javascript:void(0);">确认绑定</a></p></div>';
PB.box(a,".chg-phone-now",function(c,f){var g=c.parent().parent().find(".code").prop("value");var e=c.parent().parent().find(".new-phone").prop("value");
var d=c.parent().parent().find(".login-passwd").prop("value");if($.trim(d)==""){PB.labelErr("login-passwd","请输入登录密码！");c.parent().parent().find(".login-passwd").focus();
return false;}if(!e.match(/^1[0-9]{10}$/i)){PB.labelErr("new-phone","请输入新的手机号码！");c.parent().parent().find(".new-phone").focus();return false;}if(!g.match(/^[0-9]{6}$/i)){PB.labelErr("code","请输入六位短信验证码！");
c.parent().parent().find(".code").focus();return false;}var h=$(".sms-code").html();$(".chg-phone-now").attr("disabled","true");PB.request("post","/users/change_mobile/","json",function(i){$(".chg-phone-now").removeAttr("disabled");
PB.formErrHandler(i,function(j){f.close();document.location.href="/users/profile/";},null,".chg-phone-now","确认修改");},function(j,i){PB.btnAlert(".chg-phone-now","修改绑定手机失败！请重新获取");
return false;},{password:d,mobile:e,code:g},"json");},null,"new-phone",isReSend,timeInterval,"ChangeMobile");});$("p").undelegate(".chg-email").delegate(".chg-email","click",function(a){PB.chgNotifyEmail(isReSend,timeInterval);
});$("p").undelegate(".verify-email").delegate(".verify-email","click",function(c){var a=$(".receive_email").text();if(!PB.isValidEmail(a)){a="";}var b='<div class="no-feed-alert"><h2><i class="i-warning"></i>立即验证邮箱</h2>'+PB.modalLine3Col("请输入登录密码","login-passwd","password",null,"mg-top-30")+PB.modalLine3Col("请输入要验证的邮箱","to-chg-email","text",null,"mg-bottom-30",a)+'<p class="tip line mg-bottom-30"><span class=" line-width-100">该邮箱仅用于您接收聘宝简历推荐的邮箱，不用于登录，您可至“<a class="c42b4e6" href="/users/profile/">个人设置</a>”中修改</span></p><p><a class="btn confirm verify-email-now" href="javascript:void(0);">发送邮箱验证码</a></p></div>';
PB.box(b,".verify-email-now",function(d,f){var g=d.parent().parent().find(".to-chg-email").prop("value");var e=d.parent().parent().find(".login-passwd").prop("value");
if($.trim(e)==""){PB.labelErr("login-passwd","请输入登录密码！");d.parent().parent().find(".login-passwd").focus();return false;}if(!PB.isValidEmail(g)){PB.labelErr("to-chg-email","请输入要修改的邮箱！");
d.parent().parent().find(".to-chg-email").focus();return false;}$(".verify-email-now").attr("disabled","true");PB.request("post","/users/send_email_code/","json",function(h){$(".verify-email-now").removeAttr("disabled");
PB.formErrHandler(h,function(i){f.close();},null,".verify-email-now","发送邮箱验证码");},function(i,h){PB.btnAlert(".verify-email-now","发送邮箱验证码失败！请重新获取");return false;
},{password:e,email:g},"json");});});