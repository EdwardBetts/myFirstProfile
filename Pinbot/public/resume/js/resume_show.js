!function(e){var t=angular.module("app.resume_show",["app.config","ui.router","app.django","app.utils","app.filter"]),a=angular.injector(["app.django"]),n=angular.injector(["app.utils"]),o=a.get("tmpl");a.get("static_url");t.config(["$interpolateProvider",function(e){e.startSymbol("{-"),e.endSymbol("-}")}]),t.factory("$",["$window",function(e){return e.jQuery.noConflict()}]);var i=n.get("pbLib"),r=(n.get("confirmBox"),n.get("confirmBoxRed"),n.get("alertBox"),n.get("getModeData")),s=n.get("postModeData"),c=n.get("inArray"),l=n.get("pbFunc");t.config(["$stateProvider","$urlRouterProvider",function(e,t){var a="/";t.otherwise(a),e.state("default",{url:"/",template:"",controller:"resumeDetail"})}]);var d=function(){var e=angular.element(document.getElementById("main"));return""!=e.attr("data-resumeid")?[e.attr("data-resumeid"),e.attr("data-feed_id"),e.attr("date-feed_keywords"),e.attr("data-is_fav"),e.attr("data-mark_logs")]:null};t.controller("resumeDetail",["$rootScope","$scope","$http","$state",function(e,t,a,n){t.saveResume=function(e){var t=$("#JS_download_local").html(),a="downloadCk_";$.LayerOut({html:t,dialogCss:"width:660px;"}),1==i.getCookie(a+"name")&&$("#candidate-name").attr("checked","true"),1==i.getCookie(a+"contact_info")&&$("#candidate-contact").attr("checked","true"),1==i.getCookie(a+"salary")&&$("#candidate-money").attr("checked","true"),$(".modal-body").on("click",function(){var e=$(".js-pdf"),t=$(".js-html"),a=e.attr("xhref"),n=t.attr("xhref"),o=$("form.js-download-list").serialize();a+="?"+o,n+="?"+o,$(".js-pdf").attr("href",a),$(".js-html").attr("href",n)}),$(".download-list").on("click",function(){var e=365;$("#candidate-name").is(":checked")?i.setCookie(a+"name",1,864e5*e):i.setCookie(a+"name",0,864e5*e),$("#candidate-contact").is(":checked")?i.setCookie(a+"contact_info",1,864e5*e):i.setCookie(a+"contact_info",0,864e5*e),$("#candidate-money").is(":checked")?i.setCookie(a+"salary",1,864e5*e):i.setCookie(a+"salary",0,864e5*e)})},t.shrinkToggle=function(e){var t=angular.element(e.currentTarget);t.hasClass("btn-toggle-span")?(t.removeClass("btn-toggle-span"),t.parents(".sec-resume").find("dl").show()):(t.addClass("btn-toggle-span"),t.parents(".sec-resume").find("dl").hide())},t.showHoverTip=function(e){var t=e.currentTarget.getAttribute("class");if(t.match(/i\-(fav|delete|download)\-([0-9a-z]+)/i)){var a=RegExp.$1,n=new String("收藏该候选人").length,o=".i-"+a+"-delete-hover-"+RegExp.$2,i=".i-"+a+"-delete-notice-"+RegExp.$2;if("download"==a&&(i=".i-"+a+"-delete-hover-"+RegExp.$2),"fav"!=a){var r=parseInt(72*($(o).text().length/n)),s=parseInt(72*($(i).text().length/n));$(o).css("width",r+"px"),$(i).css("width",s+10+"px");var c=51;"download"==a?$(i).css("right",c-50+"px"):$(i).css("right",c+"px")}else $(o).css("width","72px");$(o).show()}},t.hideHoverTip=function(e){var t=e.currentTarget.getAttribute("class");if(t.match(/i\-(fav|delete|download)\-([0-9a-z]+)/i)){var a=RegExp.$1,n=".i-"+a+"-delete-hover-"+RegExp.$2;$(n).hide()}}}]),t.controller("resumeAside",["$rootScope","$scope","$http","$state","$window","$timeout",function(e,t,a,n,o,u){var m={8:'<span class="text-center f16">恭喜，简历购买成功！</span>',9:'<span class="text-center f16">聘宝正在为您准备简历</span>',1:'<span class="text-center f16">请先购买简历套餐，便能购买您喜欢的简历了。</span>',2:'<span class="text-center f16">您已购买过此简历，请到简历中心查查看！</span>',3:'<span class="text-center f16">抱歉，您的点数不足，请先购买点数！</span>',4:'<span class="text-center f16">抱歉，操作失败了，请刷新重试一下？</span>'};t.isPrepareResume=!0,t.showBtnTip=!1,t.isFav=!1;var p=d();t.pageData={},t.pageData.resume_id="",t.pageData.feed_id="",t.pageData.feed_keywords=[],t.logs=[],p&&(t.pageData.resume_id=p[0],t.pageData.feed_id=p[1],t.pageData.feed_keywords=angular.fromJson(p[2]),t.isFav="1"==p[3]?!0:!1,t.logs=angular.fromJson(p[4])),t.isShowFavAlert=!1,t.doNotShowFavAlert=null==i.getCookie("do-not-show-fav-alert")?!1:!0;var f="isSendCompanyCard"+t.pageData.resume_id;t.isGetMousePos=!1,t.btnReadyTop=0,t.user_data={},t.pinbot_point_limit=10;var g=function(e){var a=document.getElementById(e),n=0,o=0;if(a.offsetParent){do n+=a.offsetTop,o+=a.offsetParent?a.offsetParent.scrollTop:0;while(a=a.offsetParent);n-o>=0&&(t.btnReadyTop=n-o)}};t.showTooltips=function(e){g("btn-under-ready"),e.stopPropagation(),t.showBtnTip=!0;var a=angular.element(document.getElementsByClassName("pb-tips"));a.css("top",t.btnReadyTop+40+"px"),a.css("display","none"),"block"!=a.css("display")&&(a.css("left",e.pageX),a.css("display","block"))},t.hideTooltips=function(e){var t=angular.element(document.getElementsByClassName("pb-tips"));t.css("display","none")},t.moveTooltips=function(e){if(e.stopPropagation(),t.showBtnTip){var a=angular.element(document.getElementsByClassName("pb-tips"));t.isGetMousePos?setTimeout(function(){a.css("left",e.pageX),t.isGetMousePos=!0},50):setTimeout(function(){a.css("top",e.pageY),a.css("left",e.pageX),t.isGetMousePos=!0},50)}},t.directDownload=function(e){var n=angular.element(e.currentTarget),o=null,i={feed_id:n.attr("data-feed_id"),resume_id:n.attr("data-resumeid"),sendid:n.attr("data-sendid"),job_id:n.attr("data-job_id")},s=m;if(n.attr("disabled"))return!1;n.attr("disabled",!0),t.isPrepareResume=!0;var c=r(a,"/transaction/buy?"+l.urlString(i),"",function(e){n.attr("disabled",!1),o&&clearTimeout(o),e&&e.status?0==e.status?l.simpleAlert(s[e.data],"",function(){location.reload()}):(8==e.data||9==e.data)&&(9==e.data?(t.isPrepareResume=!0,l.simpleAlert("聘宝正在为您准备简历",'<div class="text-center mt30"><span class="mt20 block f13 c607d8b">小宝提示：请稍后刷新页面，并在简历中心查收简历！</span></div>',function(e,t){},null,"确定",!0)):l.simpleAlert(s[e.data],"",function(){location.reload()})):/^[1234]$/.test(e.data)&&l.simpleAlert(s[e.data],"")},void 0,function(e){c.abort(),l.simpleAlert(s[4],"")},!0);o=setTimeout(function(){c.abort(),l.simpleAlert(s[4],"")},2e4)};var h=function(e,t,a){var n="",o="";"experience"==t?(n="升级成为聘宝会员",o="升级聘宝会员"):null==t||void 0==t?(n="",o=""):(n='<a href="/payment/point_recharge/" class="c63c2ec">购买聘点</a>',o="购买聘点"),$.LayerOut({html:l.alertModal('<span class="pay-alert"></span><span class="pay-title">'+a+"失败，您的聘点不足！</span>","",'您的聘点数量：<span class="cf46c62">'+e+"</span>个，请"+n+'，<br><br><a href="javascript:void(0);"  id="JS_service_btn_modal" class="c63c2ec">有疑问请联系我们</a>',o,null),afterClose:function(){}}),$(".modal").undelegate(".btn-click-ok").delegate(".btn-click-ok","click",function(e){$._LayerOut.close(),document.location.href="/vip/role_info/"}),l.openQQ("JS_service_btn_modal")},v=function(e){var n="/companycard/get/json/?"+Math.random();r(a,n,"",function(n){n.data&&"3"==n.data?r(a,"/vip/get_user_info/","",function(e){void 0!=e.status&&"ok"==e.status?(t.user_data=e,parseInt(e.pinbot_point)<t.pinbot_point_limit&&h(e.pinbot_point,e.user_type,"查看联系方式")):h(0,null,"查看联系方式")},!1,void 0,void 0,{}):(n&&n.jobs&&(o.infos=n),"function"==typeof e&&e(n))},!1,void 0,void 0,{})},_=function(){var e=$("#JS_has_card_html").html();$.LayerOut({html:e,dialogCss:"width:540px;"}),$(document).on("click","#JS_send_card_btn",b),$(".modal").undelegate(".JS_buy_not_sendcard").delegate(".JS_buy_not_sendcard","click",function(e){t.directDownload(e)})},b=function(){var e=function(){var e=$("#JS_no_card").html();$.LayerOut({html:e,dialogCss:"width:540px;"}),$(".modal").undelegate(".JS_buy_not_sendcard").delegate(".JS_buy_not_sendcard","click",function(e){t.directDownload(e)})},a=$("#JS_choose_cards").html(),n=o.infos&&o.infos.jobs||[],i=925;return n=l.objToArr(n),n.length?(1==n.length&&(i=490),$.LayerOut({html:a,closeByShadow:!1,dialogCss:"width:"+i+"px; height:610px;"}),void $.intentionCard({list:n,allowSend:!0,contentDom:"#JS_jobs_ajax_content",callback:cardScroll})):void e()},k=function(e){var t=function(){var e=$("#JS_to_mark").html();$.LayerOut({html:e,closeByShadow:!1,dialogCss:"height:250px;"})};if(e&&e.status){if(e.has_mark)return void t();b()}else e&&e.data?(8==e.data&&($("#js-nav-meet").addClass("nav-red"),$("#js-nav-qusetion").removeClass("nav-blue"),$("#js-faq-click").addClass("faq-robot-meet").removeClass("faq-robot-qusetion").find("span").text("约面话术"),$("#js-meet-content").show(),$("#js-qusetion-content").hide()),l.simpleAlert(msg[e.data],"")):l.simpleAlert("请求失败，请刷新重试！","")};t.isSendCompanyCard=null==i.getCookie(f)?!1:!0,t.sendCompanyCard=function(e){var n=function(e){t.isSendCompanyCard=null==i.getCookie(f)?!1:!0,t.isSendCompanyCard?l.simpleConfirm("需要您的确认",'<p class="mt30 f14 c607d8b">您已发送了企业名片进行意向确认，还要再直接获取该简历联系方式吗？</p><p class="mt50 cf46c62 f13">小宝提示：确认会在已扣3个聘点的基础上再扣除您10个聘点</p>',function(e){$._LayerOut.close()},null,"取消",!0,"确认",function(e){v(_)}):v(function(e){k(e)})};r(a,"/vip/get_user_info/","",function(e){void 0!=e.status&&"ok"==e.status?(t.user_data=e,parseInt(e.pinbot_point)<t.pinbot_point_limit?h(e.pinbot_point,e.user_type,"发送企业名片"):n(e)):h(0,null,"发送企业名片")})};var y=function(e){var n=angular.element(e.currentTarget),o=0==t.isFav?"add_watch":"remove_watch";if(""!=t.pageData.resume_id){r(a,"/resumes/"+o+"/"+t.pageData.resume_id+"?"+l.urlString({feed_id:t.pageData.feed_id,feed_keywords:angular.fromJson(t.pageData.feed_keywords).join(" ")}),"",function(e){if("add_watch"==o){if(!t.isShowFavAlert&&!t.doNotShowFavAlert){var a=$("#main").attr("data-feed_title");l.simpleAlert("简历收藏成功！",'<div class="text-center"><span class="big-icon big-icon-rocket mt20"></span><span class="mt20 block f14 c607d8b">多多收藏喜欢的人才，我们将为你推荐更多匹配<span class="c434343"> '+a+' </span>职位的人才～</span><div class="mt20"><input type="checkbox" name="do-not-show-fav-alert" id="do-not-show-fav-alert"  value="1" class=""> <label for="do-not-show-fav-alert"><span class="f14 cf46c62">不再提醒</span></label></div></div>',function(e,a){if($("#do-not-show-fav-alert").is(":checked")){var n=365;i.setCookie("do-not-show-fav-alert",1,864e5*n),t.doNotShowFavAlert=!0}},null,"我知道了",!1)}t.isFav=!0,n.find("span").text("取消收藏"),t.isShowFavAlert=!0}else t.isFav=!1,n.find("span").text("收藏简历")},void 0,function(e){})}};t.favResume=function(e){y(e)},t.favCancelResume=function(e){y(e)},t.forwardResume=function(e){var a="http://www.pinbot.me/resumes/display/"+t.pageData.resume_id+"/?feed_id="+t.pageData.feed_id;$.LayerOut({html:l.alertModal('<span class="pay-alert"></span><span class="pay-title">请复制以下简历链接并发送给其他同事</span>',"",'<a class="c607d8b" href="'+a+'" target="_blank">'+a+"</a>","复制",null,""),afterClose:function(){}}),$(".modal").undelegate(".btn-click-ok").delegate(".btn-click-ok","click",function(e){$._LayerOut.close();new ZeroClipboard($(".resume-meta-tip"));$(".resume-meta-tip")[0].click()})},t.reportResume=function(e){$(".modal-backdrop-tip-toreport,.modal-tip-toreport").show(),$(".modal-dialog-tip-toreport").css({marginTop:($(window).height()-$(".modal-dialog-tip-toreport").height())/2+"px"}),$(".JS_close_tip").on("click",function(){$(".modal-backdrop-tip-toreport,.modal-tip-toreport").hide()})},$(document).on("click",".m-radio",function(){var e=$(this),t=e.attr("data-name"),a=e.attr("has-info");checkbox=e.find("input"),checked=checkbox.prop("checked"),$submitToReport=$("#JS_submit_toreport"),$feedbackInfo=$("#JS_feedback_info"),e.toggleClass("active"),$('.m-radio[data-name="'+t+'"]').not(e).removeClass("active").find("input").prop("checked",!1),checkbox.prop("checked",!checked),"code_name"==t&&($('input[name="code_name"]:checked').length?$("#JS_submit_btn").attr("disabled",!1):$("#JS_submit_btn").attr("disabled",!0)),"back_count"==t&&(void 0===a?($feedbackInfo.hide(),$('input[name="back_count"]:checked').length?$submitToReport.attr("disabled",!1):$submitToReport.attr("disabled",!0)):($feedbackInfo.toggle().find("input").focus(),$submitToReport.attr("disabled",!0)))}),$(document).on("keyup","#JS_feedback_value",function(){var e=$(this),t=e.val(),a=$("#JS_submit_toreport");""===t?a.attr("disabled",!0):a.attr("disabled",!1)}),$(document).on("click","#JS_submit_btn",function(){var e=this;if($(this).attr("disabled"))return!1;var t=$('input[name="code_name"]:checked').parent().text();return t?void $.confirm('<p style="font-size:20px;color:#434343;text-align:center"><i class="i-l-notice"></i>您选择的状态是: <span style="color:#3ab2e7;">'+t+'</span></p><p style="margin-top:50px;color:#f23748;font-size:14px;text-align:center;">注：请确认提交，提交后不能修改</p>',function(){$.commonAjax.call(e)}):!1}),$(document).on("click","#JS_submit_toreport",function(){var e=function(e){if($("#JS_submit_toreport").attr("disabled",!1),!e||"ok"!=e.status&&"success"!=e.status)e&&e.msg?l.simpleAlert(e.msg,""):l.simpleAlert("请求失败了，刷新再试一下吧！","");else{var t=$("#JS_header").attr("data-url");t?location.href=t:location.reload()}},t=$(this),a=t.attr("data-id"),n=$('input[name="back_count"]:checked').val(),o=$('input[name="feedback_value"]').val();return $(this).attr("disabled")?!1:void(a&&n&&($("#JS_submit_toreport").attr("disabled",!0),$.post("/taocv/add_feedback/",{feedback_id:n,resume_id:a,feedback_value:o,___:(new Date).getTime()},function(t){e(t)},"json")))}),$(document).on("click","#JS_goto_detail",function(){var e=window.open();e.opener=null,e.open("","_self",""),e.location=$(this).attr("data-url")}),t.isDel=$("#main").attr("data-is_del").match(/true/i)?!0:!1,t.isShowDisLikeAlert=!1,t.doNotShowDisLikeAlert=null==i.getCookie("do-not-show-dislike-alert")?!1:!0;var w=function(e,n){var n=n&&1==n?"-150":"150";if(""!=t.pageData.resume_id)if(t.isDel){n="150";r(a,"/feed/modify_feed_result?"+l.urlString({feed_id:t.pageData.feed_id,resume_id:t.pageData.resume_id,reco_index:n}),"",function(e){t.isDel=!1},void 0,function(e){})}else{n="-150";r(a,"/feed/modify_feed_result?"+l.urlString({feed_id:t.pageData.feed_id,resume_id:t.pageData.resume_id,reco_index:n}),"",function(e){if(t.isDel=!0,!t.isShowDisLikeAlert&&!t.doNotShowDisLikeAlert){var a=$("#main").attr("data-feed_title");l.simpleAlert("谢谢您的反馈！",'<div class="text-center"><span class="big-icon big-icon-flower mt20"></span><span class="mt20 block f14 c607d8b">您的反馈<span class="cf46c62">有助于</span>算法为您推荐更匹配<span class="c434343"> '+a+' </span>的简历！</span><div class="mt20"><input type="checkbox" name="do-not-show-dislike-alert" id="do-not-show-dislike-alert"  value="1" class="" > <label for="do-not-show-dislike-alert"><span class="f14 cf46c62">不再提醒</span></label></div></div>',function(e,a){if($("#do-not-show-dislike-alert").is(":checked")){var n=365;i.setCookie("do-not-show-dislike-alert",1,864e5*n),t.doNotShowDisLikeAlert=!0}},null,"我知道了",!1)}},void 0,function(e){})}};t.dislikeResume=function(e){w(e,1)},t.tagWaiting=function(){},t.tagUnchoose=function(){},t.selectedFav=function(){return t.isFav},t.selectedDislike=function(){return t.isDel},t.selectedWaiting=function(){},t.selectedUnchoose=function(){},t.openDialog=!1,t.comment="",t.currPos=0,t.maxRow=3,t.maxLength=0,t.notes_cp=1,t.notes_pages=1,t.remarkLoading=!0,t.sliceData=function(){return(t.cachedData||[]).slice(t.currPos,t.currPos+t.maxRow)};var x=r(a,"/resumes/get_comments/"+t.pageData.resume_id+"/","",function(e){e.status&&u(function(){t.cachedData=e.data||[],t.remarkData=t.sliceData(),t.maxLength=t.cachedData.length,t.notes_pages=Math.ceil(t.maxLength/t.maxRow)}),t.remarkLoading=!1},void 0,function(e){x.abort(),t.remarkLoading=!1});t.openDialogLog=!1,t.commentLog="",t.currPosLog=0,t.maxRowLog=5,t.notes_cpLog=1,t.remarkLoadingLog=!1,t.cachedDataLog=t.logs,t.sliceDataLog=function(){return(t.cachedDataLog||[]).slice(t.currPosLog,t.currPosLog+t.maxRowLog)},t.remarkDataLog=t.sliceDataLog(),t.maxLengthLog=t.cachedDataLog.length,t.notes_pagesLog=Math.ceil(t.maxLengthLog/t.maxRowLog),t.chkStatus=function(e){var t=angular.element(document.getElementsByClassName("code-"+e));return t&&t.attr("data-status_selected")&&t.attr("data-status_pn")?t.attr("data-status_selected").match(/true/i)&&t.attr("data-status_pn").match(/true/i)?"1":t.attr("data-status_selected").match(/true/i)&&t.attr("data-status_pn").match(/false/i)?"0":null:null},t.chkStatusP=function(e){return"invite_interview"==e||"next_interview"==e?!1:"1"==t.chkStatus(e)?!0:!1},t.chkStatusN=function(e){return"invite_interview"==e||"next_interview"==e?!1:"0"==t.chkStatus(e)?!0:!1},t.tagStatusList=[],t.interviewTimeComponent=function(e,t,a,n,o,i,r,c,l,d){var u=void 0!=d&&1==d?"disabled":"",m=n.getDateObj(),p=void 0!=o&&"string"==typeof o&&""!=a.trim(o)?o:"",f=void 0!=i&&"string"==typeof i&&""!=a.trim(i)?i:"";""==p&&(p=m.y+"-"+n.feedZero(m.m)+"-"+n.feedZero(m.d)),""==f&&(f=n.feedZero(m.h)+":"+n.feedZero(m.i)),a.LayerOut({html:n.alertModal('<span class="pay-alert"></span><span class="pay-title">请选择面试时间</span>',"",'<div class="table-line"><div class="table-line-left">面试日期：</div><div class="table-line-right"><input type="text" class="input-width-100" name="ym-date" id="ym-date" value="'+o+'" placeholder="请选择面试日期"></div></div><div class="table-line"><div class="table-line-left">面试时间：</div><div class="table-line-right"><input type="text" class="input-width-100" name="ym-time" id="ym-time" value="'+i+'" placeholder="请选择面试时间"></div></div><br><br>',"确定",null,u,'<div class="mt20 text-center clearfix"><span class="notice">小宝提示：我们将会在面试前通过短信提醒您！<br><br></span></div>'),afterClose:function(){}}),a("#ym-date").datetimepicker({yearOffset:0,lang:"ch",timepicker:!1,format:"Y-m-d",formatDate:"Y-m-d",minDate:"-1970/01/02"}),a("#ym-time").datetimepicker({datepicker:!1,format:"H:i",step:30}),a(".modal").undelegate("#ym-date").delegate("#ym-date","blur focus change",function(e){""==a("#ym-date").prop("value")||a("#ym-date").prop("value").match(/^[0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}$/i)?a("#ym-date").removeClass("err"):a("#ym-date").addClass("err")}),a(".modal").undelegate("#ym-time").delegate("#ym-time","blur focus change",function(e){""==a("#ym-time").prop("value")||a("#ym-time").prop("value").match(/^[0-9]{2}:[0-9]{2}$/i)?(a("#ym-time").removeClass("err"),a(".modal .btn-click-ok").removeClass("disabled")):a("#ym-time").addClass("err")}),a(".modal").undelegate(".btn-click-ok").delegate(".btn-click-ok","click",function(e){var n=!0;if(a(this).attr("class").match(/disabled/i)&&(n=!1,a("#ym-date").prop("value").match(/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}$/i)&&a("#ym-time").prop("value").match(/^[0-9]{2}:[0-9]{2}$/i)&&(n=!0)),n){var o={interview_time:a("#ym-date").prop("value").trim()+" "+a("#ym-time").prop("value").trim()};void 0!=r&&"object"==typeof r&&a.extend(o,r),s(t,o,c,"",function(e){e&&"ok"==e.status&&"function"==typeof l&&l(e),a._LayerOut.close()},null,function(e){a._LayerOut.close()})}})},t.tagStatus=function(e){var n=angular.element(e.currentTarget),o=n.attr("data-code_name"),i=n.attr("data-name"),r=n.attr("data-record_id"),d=n.attr("data-status_pn");if(n.attr("data-status_selected").match(/true/i))return!1;var u=function(e,t){var a=angular.element(document.getElementsByClassName("current-resume-status"));a.removeClass("c44b5e8"),a.removeClass("cf46c62"),e.match(/^true$/i)?a.addClass("c44b5e8"):a.addClass("cf46c62"),a[0].innerHTML=t},m=function(){var e=angular.element(document.getElementsByClassName("resume-status-btns"));e.find(".code-assign").attr("data-status_selected","false")};if("invite_interview"==o||"next_interview"==o)t.interviewTimeComponent(t,a,$,l,"","",{code_name:o},"/resume/interview/send/"+r+"/",function(e){m(),c(o,t.tagStatusList)||t.tagStatusList.push(o),document.location.reload(),u(d,i)},!0);else if(""!=r&&""!=o){var p={code_name:o,__:l.getTimestamp()};s(a,p,"/transaction/mark_resume/"+r+"/","",function(e){m(),n.attr("data-status_selected","true"),t.tagStatusList.push(o),u(d,i),"entry"==o?l.simpleAlert('<span class="pb-icon pb-icon-smile"></span>恭喜收入候选人一枚，再接再厉哦！','<div class="text-center"><span class="big-icon big-icon-robot mt20"></span></div>',function(e,t){},null,"确定",!1,"red"):$._LayerOut&&$._LayerOut.close()},null,function(e){$._LayerOut&&$._LayerOut.close()})}},t.$watchCollection("tagStatusList",function(e,a){if(e!=a){$(".code-assign").removeClass("btn-red"),$(".code-assign").removeClass("btn-blue");var n=e,o=n.pop();"1"==t.chkStatus(o)?($(".code-"+o).addClass("btn-blue"),$(".code-"+o).removeClass("btn-red")):"0"==t.chkStatus(o)?($(".code-"+o).addClass("btn-red"),$(".code-"+o).removeClass("btn-blue")):($(".code-"+o).removeClass("btn-red"),$(".code-"+o).removeClass("btn-blue"))}}),t.chgInterviewTime=function(e){var n=angular.element(e.currentTarget),o=n.attr("data-record_id"),i=n.attr("data-mod_time"),r=i.split(" ");t.interviewTimeComponent(t,a,$,l,r[0],r[1],{},"/resume/interview_time/change/"+o+"/",function(e){})},t.addFolder=function(e){},t.getContactInfo=function(e){var n=function(a){t.isSendCompanyCard=null==i.getCookie(f)?!1:!0,t.isSendCompanyCard?l.simpleConfirm("需要您的确认",'<p class="mt30 f14 c607d8b">您已发送了企业名片进行意向确认，还要再直接获取该简历联系方式吗？</p><p class="mt50 cf46c62 f13">小宝提示：确认会在已扣3个聘点的基础上再扣除您10个聘点</p>',function(e){$._LayerOut.close()},null,"取消",!0,"确认",function(a){t.directDownload(e)}):v(_)};r(a,"/vip/get_user_info/","",function(e){void 0!=e.status&&"ok"==e.status?parseInt(e.pinbot_point)<t.pinbot_point_limit?h(e.pinbot_point,e.user_type,"查看联系方式"):n(e):h(0,null,"查看联系方式")})};var C=function(){var e=function(){function e(a){return this instanceof e?(this.map=t({},a),this.rules="",void(this.elem=null)):new e(a)}function t(){var e,t,a,n={};for(e=0;e<arguments.length;e+=1){t=arguments[e];for(a in t)t.hasOwnProperty(a)&&(n[a]=t[a])}return n}function a(e){return[].join.call(e,"")}function n(){var e=document.createElement("style"),t=document.getElementsByTagName("head")[0];return t&&t.appendChild(e),e}function o(e,t){for(var a in t)t.hasOwnProperty(a)&&(e=e.replace(new RegExp("@"+a,"gi"),t[a]));return e}function i(e,t){e&&"style"===e.tagName.toLowerCase()&&(e.styleSheet?e.styleSheet.cssText=t:e.innerHTML=t)}function r(e,t,a){i(e,o(t,a))}return e.prototype={define:function(e){return this.map=t(this.map,e),this},add:function(){var e=a(arguments);return e&&(this.rules+=e),this},load:function(){return this.elem||(this.elem=n()),arguments.length&&this.add.apply(this,arguments),r(this.elem,this.rules,this.map),this},clear:function(){return i(this.elem,""),this.rules="",this.map={},this},remove:function(){var e=this.elem;return e&&e.parentNode&&(this.clear(),this.elem=null,e.parentNode.removeChild(e)),this}},e}(),t=function(e,t){if(void 0!=e&&e){var t=t||"",a=document.getElementById("resume-content")||document.body,n="EM",o=new RegExp("^(?:"+n+"|SCRIPT|FORM)$"),i="",r=function(e,t,a){return"\\"+e},s=function(e){e=e.replace(/[+|.|*|$|^|?]/gi,r);var t="("+e+")";i=new RegExp(t,"i")},c=function(e){if(void 0!=e&&e&&i&&!o.test(e.nodeName)){if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++)c(e.childNodes[a]);if(3==e.nodeType&&(nv=e.nodeValue)&&(regs=i.exec(nv))){var r=regs[0];if(r&&r.match(/^[0-9a-z]{3,}$/i))for(var s=nv.replace(/[^0-9a-z]/gi," "),l=s.split(" "),a=0,d=l.length;d>a;a++){var u=r,m=new RegExp(""+u,"i");r!=l[a]&&l[a].match(m)&&(r=l[a])}var p=document.createElement(n);p.appendChild(document.createTextNode(r)),p.style.fontStyle="inherit",p.className=t;var f=e.splitText(regs.index);f.nodeValue=f.nodeValue.substring(r.length),e.parentNode.insertBefore(p,f)}}},l=function(e,t){for(var a,n,o=function(e){var t=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return t[e>>12&15]+t[e>>8&15]+t[e>>4&15]+t[15&e]},i=0,r="",s=0;s<e.length;s++){var c=e.charCodeAt(s);if((0>c||c>65535)&&(r+="!Error in convertCharStr2UTF16: unexpected charCodeAt result, cc="+c+"!"),0!=i){if(c>=56320&&57343>=c){if(a=65536+(i-55296<<10)+(c-56320),t){for(n=a.toString(16);n.length<8;)n="0"+n;r+="\\U"+n}else a-=65536,r+="\\u"+o(55296|a>>10)+"\\u"+o(56320|1023&a);i=0;continue}r+="Error in convertCharStr2UTF16: low surrogate expected, cc="+c+"!",i=0}if(c>=55296&&56319>=c)i=c;else switch(c){case 0:r+="\\0";break;case 8:r+="\\b";break;case 9:r+="\\t";break;case 10:r+="\\n";break;case 13:r+="\\r";break;case 11:r+="\\v";break;case 12:r+="\\f";break;case 34:r+='\\"';break;case 39:r+="\\'";break;case 92:r+="\\\\";break;default:if(c>31&&127>c)r+=String.fromCharCode(c);else{for(n=c.toString(16).toUpperCase();n.length<4;)n="0"+n;r+="\\u"+n}}}return r};s(l(e)),c(a)}},a=function(){var e="pinbot-keyword-";return e+Math.random().toString(16).substr(2)},n=function(e,t){var a=e;return{prev:function(){return e>=a?a=t:--a},next:function(){return a>=t?a=e:++a},curr:function(e){return a=void 0===e?a:e}}},o=window.selector=function(){function e(e){this.el=e||document.createElement("div")}return e.prototype={hasClass:function(e){for(var t=(this.el.className||"").split(/\s+/),a=0;a<t.length;++a)if(e==t[a])return!0;return!1},addClass:function(e){this.el.className;return this.hasClass(e)||(this.el.className+=" "+e),this},removeClass:function(e){for(var t=this.el.className,a=t.split(/\s+/),n=[],o=0;o<a.length;++o)a[o]!=e&&n.push(a[o]);return this.el.className=n.join(" "),this}},function(t){return new e(t)}}(),i=function(){var e={};return{add:function(t){var a=document.querySelectorAll("."+t);e[t]={index:n(0,a.length-1),element:a,get:function(){return this.element[this.index.next()]}}},get:function(t){return e[t]?e[t].get():{}},currIndex:function(t){return e[t]?e[t].index.curr():void 0}}}(),r={},s="",c=new e;return{init:function(e){if(r.hasOwnProperty(e))return this;var n=a();return t(e,n),r[e]=n,i.add(n),this},locate:function(e){var t=r[e];if(t){s!=e&&(s=e,c.load(".pinbot-keyword-current{ background: #44b5e8 !important; color: #fff;}","."+t+"{background: #44b5e8; color: #fff;-webkit-transition: all 1s ease; transition: all 1s ease}"));var a=i.get(t);o(document.querySelector(".pinbot-keyword-current")).removeClass("pinbot-keyword-current"),o(a).addClass("pinbot-keyword-current")}}}}();if(t.pageData.feed_keywords.length>0)for(var D=t.pageData.feed_keywords.length-1;D>=0;D--)!function(e){var a=t.pageData.feed_keywords[e];C.init(a).locate(a)}(D)}]),t.directive("notesList",function(){return{restrict:"E",templateUrl:o("resume/notes_list.html"),controller:["$scope","$element","$http","$timeout",function(e,t,a,n){var o=$(".ic-notes-prev"),i=$(".ic-notes-next");e.sliceData=function(){return(e.cachedData||[]).slice(e.currPos,e.currPos+e.maxRow)},e.updatePagerState=function(){e.notesPages=Math.ceil(e.maxLength/e.maxRow),e.remarkData=e.sliceData(),!e.remarkData.length&&e.currPos&&(e.currPos-=e.maxRow,e.remarkData=e.sliceData()),e.currPos>=e.maxRow?o.removeClass("disabled"):o.addClass("disabled"),e.currPos<e.maxLength-e.maxRow?i.removeClass("disabled"):i.addClass("disabled")},e.addRemark=function(t){(e.openDialog=!e.openDialog)&&setTimeout(function(){$(".notes-textbox textarea").focus()})},e.addComment=function(t){var o=e.pageData.resume_id;return""==e.comment.trim()?void setTimeout(function(){$(".notes-textbox textarea").focus()}):void s(a,{comment:e.comment},"/resumes/add_comment/"+o+"/","",function(t){t.status&&n(function(){e.cachedData&&(e.cachedData.unshift({id:t.data.comment_id,date:l.formatDate("yyyy-MM-dd hh:mm:ss"),text:e.comment}),e.remarkData=e.cachedData),e.comment="",e.currPos=0,e.maxLength=e.cachedData.length,e.updatePagerState(),e.openDialog=!1})},null,function(e){})},e.delComment=function(t,o){var i=e.pageData.resume_id;s(a,{},"/resumes/delete_comment/"+i+"/"+t+"/","",function(t){n(function(){e.cachedData.splice(o,1),e.maxLength=e.cachedData.length,e.updatePagerState(),e.remarkData=e.cachedData})},null,function(e){})},e.prevPage=function(){n(function(){e.currPos>=e.maxRow&&(e.currPos-=e.maxRow,e.notesCp-=1,e.updatePagerState())})},e.nextPage=function(){n(function(){e.currPos<e.maxLength-e.maxRow&&(e.currPos+=e.maxRow,e.notesCp+=1,e.updatePagerState())})}}],link:function(e,t,a){},scope:{title:"=title",maxLength:"=maxLength",remarkLoading:"=remarkLoading",remarkData:"=remarkData",notesCp:"=notesCp",notesPages:"=notesPages",comment:"=comment",openDialog:"=openDialog",pageData:"=pageData",cachedData:"=cachedData",currPos:"=currPos",maxRow:"=maxRow"}}}),t.directive("logList",function(){return{restrict:"E",templateUrl:o("resume/log_list.html"),controller:["$scope","$element","$http","$timeout",function(e,t,a,n){var o=$(".ic-notes-prev"),i=$(".ic-notes-next");e.sliceData=function(){return(e.cachedData||[]).slice(e.currPos,e.currPos+e.maxRow)},e.updatePagerState=function(){e.notesPages=Math.ceil(e.maxLength/e.maxRow),e.remarkData=e.sliceData(),!e.remarkData.length&&e.currPos&&(e.currPos-=e.maxRow,e.remarkData=e.sliceData()),e.currPos>=e.maxRow?o.removeClass("disabled"):o.addClass("disabled"),e.currPos<e.maxLength-e.maxRow?i.removeClass("disabled"):i.addClass("disabled")},e.addRemark=function(t){(e.openDialog=!e.openDialog)&&setTimeout(function(){$(".notes-textbox textarea").focus()})},e.addComment=function(t){var o=e.pageData.resume_id;return e.comment.length?void s(a,{comment:e.comment},"/resumes/add_comment/"+o+"/","",function(t){t.status&&n(function(){e.cachedData&&(e.cachedData.unshift({id:t.data.comment_id,date:l.formatDate("yyyy-MM-dd hh:mm:ss"),text:e.comment}),e.remarkData=e.cachedData),e.comment="",e.currPos=0,e.maxLength=e.cachedData.length,e.updatePagerState(),e.openDialog=!1})},null,function(e){}):void setTimeout(function(){$(".notes-textbox textarea").focus()})},e.delComment=function(t,o){var i=e.pageData.resume_id;s(a,{},"/resumes/delete_comment/"+i+"/"+t+"/","",function(t){n(function(){e.cachedData.splice(o,1),e.maxLength=e.cachedData.length,e.updatePagerState(),e.remarkData=e.cachedData})},null,function(e){})},e.prevPage=function(){n(function(){e.currPos>=e.maxRow&&(e.currPos-=e.maxRow,e.notesCp-=1,e.updatePagerState())})},e.nextPage=function(){n(function(){e.currPos<e.maxLength-e.maxRow&&(e.currPos+=e.maxRow,e.notesCp+=1,e.updatePagerState())})}}],link:function(e,t,a){},scope:{title:"=title",maxLength:"=maxLength",remarkLoading:"=remarkLoading",remarkData:"=remarkData",notesCp:"=notesCp",notesPages:"=notesPages",comment:"=comment",openDialog:"=openDialog",pageData:"=pageData",cachedData:"=cachedData",currPos:"=currPos",maxRow:"=maxRow"}}})}();