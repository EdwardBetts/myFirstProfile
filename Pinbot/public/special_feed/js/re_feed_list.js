!function(e){var t=angular.module("app.re_feed_list",["app.config","ui.router","app.django","app.utils","app.filter"]),a=angular.injector(["app.django"]),r=angular.injector(["app.utils"]),i=a.get("tmpl"),s=(a.get("static_url"),r.get("pbLib")),n=r.get("pbFunc");t.config(["$stateProvider","$urlRouterProvider",function(e,t){var a=window.asideData.all_feed[0].feed,r=a.id,s="";a.has_expire?s="/feed_renew/"+r+"/":!a.has_expire&&a.expire_status?s="/feed_active/"+r+"/":a.has_expire||a.expire_status||(s="/feed_resume/"+r+"/"),t.otherwise(s),e.state("feedResume",{url:"/feed_resume/:feedId/",templateUrl:i("special_feed/feed_resume.html"),controller:"feedResume"}),e.state("feedRenew",{url:"/feed_renew/:feedId/",templateUrl:i("special_feed/feed_renew.html"),controller:"feedRenew"}),e.state("feedActive",{url:"/feed_active/:feedId/",templateUrl:i("special_feed/feed_active.html"),controller:"feedActive"}),e.state("feedBlank",{url:"/feed_blank/:feedId/?source",templateUrl:i("special_feed/feed_blank.html"),controller:"feedBlank"})}]);var o=function(e,t){var a=angular.element(e.target);1==t.show_work_year&&(a.hasClass("js-work-year")||a.parents().hasClass("js-work-year")||(t.show_work_year=!1)),1==t.show_salary&&(a.hasClass("js-salary")||a.parents().hasClass("js-salary")||(t.show_salary=!1)),1==t.show_age&&(a.hasClass("js-age")||a.parents().hasClass("js-age")||(t.show_age=!1))};t.controller("feedAside",["$scope","$http","$state",function(e,t,a){e.asideData=window.asideData,e.asideList=[],e.aside1=[],e.aside2=[],e.aside3=[],e.on=1;var r=e.asideData.all_feed.length;5>=r&&r>0?(e.aside1=e.asideData.all_feed.slice(0,r),e.asideList.push(e.aside1)):r>5&&10>=r?(e.aside1=e.asideData.all_feed.slice(0,5),e.aside2=e.asideData.all_feed.slice(5,r),e.asideList.push(e.aside1),e.asideList.push(e.aside2)):r>10&&15>=r?(e.aside1=e.asideData.all_feed.slice(0,5),e.aside2=e.asideData.all_feed.slice(5,10),e.aside3=e.asideData.all_feed.slice(10,r),e.asideList.push(e.aside1),e.asideList.push(e.aside2),e.asideList.push(e.aside3)):r>15?$.alert("定制数量超出限制，请删除定制到15个以下后刷新页面再试"):window.location.href="/feed/new/",e.isHide=function(t){return 1===t&&e.aside1.length>0&&e.aside2.length>0?!1:2===t&&e.aside2.length>0?!1:3===t&&e.aside3.length>0?!1:!0},e.isOn=function(t){return t==e.on?!0:!1},e.slide=function(t,a){e.on=t,a.preventDefault();var r="aside-"+t,i=$(".aside-1"),s=$(".aside-2"),n=$(".aside-3"),o=$("."+r),l=o[0].offsetLeft;return 0==l?!1:(1==t&&(o.css({transition:"0.5s",left:"0"}),s.css({transition:"0.5s",left:"280px"}),n.css({transition:"0.5s",left:"560px"})),2==t&&(i.css({transition:"0.5s",left:"-280px"}),o.css({transition:"0.5s",left:"0"}),n.css({transition:"0.5s",left:"280px"})),void(3==t&&(i.css({transition:"0.5s",left:"-560px"}),s.css({transition:"0.5s",left:"-280px"}),o.css({transition:"1s",left:"0"}))))},e.noFeedClick=function(e){e.preventDefault();var t='<div class="no-feed-alert"><h2><i class="i-warning"></i>无可用定制！</h2><p class="tip">请升级会员以获取更多定制数量</p><p><a class="btn cancel closeLayer">取消</a><a class="btn confirm" href="/vip/role_info/">去升级</a></p></div>';$.LayerOut({html:t}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})},e.checkSelected=function(e){var t=window.location.hash.split("/"),a=t[t.length-2];return a==e.feed.id?!0:!1},e.checkDelete=function(e){return!0},e.deleteFeed=function(t,a){e.stopBubble(a);var r=angular.element(a.currentTarget),i="";null!=r.parent().find(".title")&&(i='[<span class="cf46c62">'+r.parent().find(".title").text()+"</span>]"),$.alert('<p class="f16 text-center"><i class="i-l-notice"></i>确定删除该定制'+i+'吗？</p><p class="text-center cf46c62" style="font-size:14px;">删除后不可恢复</p>',function(){var e="/feed/delete/"+t+"/";location.href=e})},e.checkEditable=function(e){return!e.feed.has_expire&&!e.feed.expire_status},e.checkRenew=function(e){return e.feed.has_expire},e.checkActive=function(e){return!e.feed.has_expire&&e.feed.expire_status},e.checkUpdate=function(e){return e.feed.unread_count>0},e.stopBubble=function(e){s.stopBubble(e)},e.changePage=function(t,r){var i=angular.element(r.currentTarget),s=angular.element(document.getElementsByClassName("feed-btns"));s.removeClass("selected-hover"),i.attr("class").match(/selected\-hover/i)||i.addClass("selected-hover"),$("body").scrollTop(0);var n=t.feed.id;e.checkRenew(t)?a.go("feedRenew",{feedId:n}):e.checkActive(t)?a.go("feedActive",{feedId:n}):a.go("feedResume",{feedId:n})},e.showMoreBtn=function(t){e.stopBubble(t);var a=angular.element(t.currentTarget);a.parent().addClass("selected-hover")},e.hideMoreBtn=function(e){var t=angular.element(e.currentTarget);setTimeout(function(){if(t.removeClass("selected-hover"),!t.attr("class").match(/selected/i)){var e=angular.element(t.find(".hover-bg")[0]);e.attr("class").match(/ng\-hide/i)||e.addClass("ng-hide")}},100)},e.showFirstBtn=function(e){var t=angular.element(e.currentTarget);if(!t.attr("class").match(/selected/i)){var a=angular.element(t.find(".hover-bg")[0]);a.attr("class").match(/ng\-hide/i)&&a.removeClass("ng-hide")}}}]),t.controller("feedResume",["$scope","$http","$state",function(e,t,a){var r="/special_feed/feed_list/",i="/special_feed/statistic/save_feed_filter/",l=a.params.feedId,d=window.location.hash.split("/");e.filter_list={work_years_min:"",work_years_max:"",salary_min:"",salary_max:"",degree:"",age_min:"",age_max:"",gender:"",experience:"",current_area:""},e.isShowDisLikeAlert=!1,e.doNotShowDisLikeAlert=null==s.getCookie("do-not-show-dislike-alert")?!1:!0;s.feedCkPrefix;e.getFeedId=l,e.choosedFeeds=s.getFeedConfig(l),e.start=0,e.send=0;var c=e.getFeedId;e.latest=null!=e.choosedFeeds[c].l?e.choosedFeeds[c].l:0,e.partner=null!=e.choosedFeeds[c].p?e.choosedFeeds[c].p:0,e.title_match=null!=e.choosedFeeds[c].t?e.choosedFeeds[c].t:1,e.extend_match=null!=e.choosedFeeds[c].e?e.choosedFeeds[c].e:0,e.reco_time=null!=e.choosedFeeds[c].r?e.choosedFeeds[c].r:15,e.filter_list.work_years_min=parseInt(e.choosedFeeds[c].minY)>0?e.choosedFeeds[c].minY:"不限",e.filter_list.work_years_max=parseInt(e.choosedFeeds[c].maxY)>0?e.choosedFeeds[c].maxY:"不限",e.filter_list.salary_min="不限"!==e.choosedFeeds[c].minS&&""!==e.choosedFeeds[c].minS?e.choosedFeeds[c].minS:"",e.filter_list.salary_max="不限"!==e.choosedFeeds[c].maxS&&""!==e.choosedFeeds[c].maxS?e.choosedFeeds[c].maxS:"",e.filter_list.degree="不限"!=e.choosedFeeds[c].degree&&""!=e.choosedFeeds[c].degree?e.choosedFeeds[c].degree:"不限",e.filter_list.age_min="不限"!=e.choosedFeeds[c].minA?e.choosedFeeds[c].minA:"",e.filter_list.age_max="不限"!=e.choosedFeeds[c].maxA?e.choosedFeeds[c].maxA:"",e.filter_list.gender="不限"!=e.choosedFeeds[c].gender&&""!=e.choosedFeeds[c].gender?e.choosedFeeds[c].gender:"不限",e.filter_list.current_area="不限"!=e.choosedFeeds[c].ca&&""!=e.choosedFeeds[c].ca?e.choosedFeeds[c].ca:"不限",e.showEvaluate=!0,e.total_recommend_count=0,e.total_count=0,e.search_count=0,e.loadingStatus=!0,e.hasmore=0,e.moreLoading=0,e.dataBlank=0,e.fromActive="",e.fromRenew="",e.showAgeError=!1,e.show_age=!1,e.show_salary=!1,e.show_work_year=!1,e.filter=!0,e.showSalaryError=!1,e.show_no_limit=!0,e.show_salary_no_limit=!0,e.show_age_no_limit=!0,e.current_area=[{name:"不限",value:"不限"}],e.showNoLimit=function(t,a,r,i,s){t>0&&(isNaN(a)||0>=a)?(e[r]=!0,$(s).text(t+i+"以上")):(isNaN(t)||0>=t)&&a>0?(e[r]=!0,$(s).text(a+i+"以下")):(isNaN(t)||0>=t)&&(isNaN(a)||0>=a)?(e[r]=!0,$(s).text("不限")):t>0&&a>0&&(e[r]=!1)};var f=[];e.asideData=window.asideData,e.currentFeedTitle="",e.recent_salary="",e.showAge=function(){e.show_age=!0},e.showSalary=function(){e.show_salary=!0},e.showWorkYear=function(){e.show_work_year=!0},e.hasRecentSalary=function(t){return e.recent_salary=t.resume.works[0].salary||t.resume.current_salary||t.resume.latest_salary||"",e.recent_salary=e.recent_salary.trim(),""===e.recent_salary?!1:!0};for(var _=function(e){return parseInt(e)<1e3||parseInt(e)>25e3?"":""+parseInt(parseInt(e)/1e3)},u=0,m=asideData.all_feed.length;m>u;u++)if(asideData.all_feed[u].feed.id==l){f=asideData.all_feed[u].feed.expect_area.split(","),""===e.filter_list.salary_min&&(e.filter_list.salary_min=_(asideData.all_feed[u].feed.salary_min)),""===e.filter_list.salary_max&&(e.filter_list.salary_max=_(asideData.all_feed[u].feed.salary_max)),e.currentFeedTitle=asideData.all_feed[u].feed.title;break}for(var u=0;u<f.length;u++)e.current_area[u+1]=new Object,e.current_area[u+1].name=f[u],e.current_area[u+1].value=f[u];e.showNoLimit(e.filter_list.work_years_min,e.filter_list.work_years_max,"show_no_limit","年",".js-no-limit"),e.showNoLimit(e.filter_list.salary_min,e.filter_list.salary_max,"show_salary_no_limit","k",".js-salary-no-limit"),e.showNoLimit(e.filter_list.age_min,e.filter_list.age_max,"show_age_no_limit","岁",".js-age-no-limit");var h=function(e,t,a){if(a)for(var r=0;t>r;r++)e[r+1]=new Object,e[r+1].name=r+1,e[r+1].value=r+1;else for(var r=0;t>r;r++)e[r+1]=new Object,e[r+1].name=r+1+"k",e[r+1].value=1e3*(r+1)};e.work_years_min=[{name:"不限",value:"不限"}],h(e.work_years_min,10,!0),e.work_years_max=[{name:"不限",value:"不限"}],h(e.work_years_max,10,!0),d[d.length-2]==l&&(e.fromActive=-1!=window.location.hash.indexOf("fromActive")?"fromActive":"",e.fromRenew=-1!=window.location.hash.indexOf("fromRenew")?"fromRenew":""),e.isShowFavAlert=!1,e.doNotShowFavAlert=null==s.getCookie("do-not-show-fav-alert")?!1:!0;var g=function(e){var t=function(e){var t;return t=void 0!=e&&("string"==typeof e||"number"==typeof e)?new Date(e):new Date,{y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds()}},a=t(),r=new Date(a.y,a.m-1,a.d+e,a.h,a.i,a.s);return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()};e.today=g(0),e.yesterday=g(-1),e.sevenday=g(-7),e.listDays=[];var p=function(e){if("string"==typeof e&&e.match(/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2}) /i)){var t=parseInt(RegExp.$1),a=parseInt(RegExp.$2),r=parseInt(RegExp.$3);return t+"-"+a+"-"+r}return""};e.getDay=function(e){return p(e)},e.isHideDateBar=function(e){return!1},e.dateTitle=function(t,a){return e.isToday(a)?" 今天 ("+p(a)+") ":e.isYesterday(a)?" 昨天 ("+p(a)+") ":e.isSevenday(a)?" 7天前 ("+p(a)+") ":" "+p(a)+" "},e.isToday=function(e){return!1},e.isYesterday=function(e){return!1},e.isSevenday=function(e){return!1},e.isOtherday=function(e){return!1},e.public_url=function(){var t=parseInt(e.filter_list.salary_min)>0?1e3*e.filter_list.salary_min:"",a=parseInt(e.filter_list.salary_max)>0?1e3*e.filter_list.salary_max:"",r=parseInt(e.filter_list.work_years_min)>0?e.filter_list.work_years_min:"",i=parseInt(e.filter_list.work_years_max)>0?e.filter_list.work_years_max:"",s=parseInt(e.filter_list.age_min)>0?e.filter_list.age_min:"",n=parseInt(e.filter_list.age_max)>0?e.filter_list.age_max:"",o="不限"!=e.filter_list.degree?e.filter_list.degree:"",l="不限"!=e.filter_list.gender?e.filter_list.gender:"",d="不限"!=e.filter_list.current_area?e.filter_list.current_area:"";return"?start="+e.start+"&latest="+e.latest+"&send="+e.send+"&partner="+e.partner+"&title_match="+e.title_match+"&extend_match="+e.extend_match+"&reco_time="+e.reco_time+"&work_years_min="+r+"&work_years_max="+i+"&salary_min="+t+"&salary_max="+a+"&degree="+o+"&age_min="+s+"&age_max="+n+"&gender="+l+"&experience="+e.filter_list.experience+"&current_area="+d},e.ajax_url=r+l,e.record_url=i+l,e.setRecordAjax=function(){t.get(e.record_url+e.public_url()).success(function(e){})},e.setRecordAjax();t.get(e.ajax_url+e.public_url()).success(function(t){if(t&&"ok"==t.status){e.data=t,e.loadingStatus=0,e.total_recommend_count=t.total_recommend_count,e.total_count=t.total_count,e.search_count=t.feed_query_count,e.start=t.next_start,e.hasmore=!0;for(var a=e.data.data.length-1;a>=0;a--)e.data.data[a].deleteStatus=0;5*parseInt(t.start+1)>=e.total_recommend_count&&(e.hasmore=0);var r=!1;(e.choosedFeeds[c].l||e.choosedFeeds[c].p||e.choosedFeeds[c].e||e.choosedFeeds[c].r)&&(r=!0),0===e.data.data.length&&r?(e.hasmore=0,e.dataBlank=!0,e.filter=!0):0!==e.data.data.length||r||(e.hasmore=0,e.filter=!0),e.toggleSearchInfo()}}).error(function(e){console.log(e),window.location.reload()});e.checkFeedPartner=function(){return 0===e.partner?!0:!1},e.checkFeedApply=function(){return 0===e.send?!0:!1},e.checkFeedLatest=function(){return 0===e.latest?!0:!1},e.checkFeedTitle=function(){return 1===e.title_match?!0:!1},e.checkFeedExtend=function(){return 1===e.extend_match?!0:!1},e.toggleSearchInfo=function(e){var t=!1,a=!1;$(".feed-apply-option").each(function(e){$(this).attr("class").match(/feed\-apply\-option\-partner/i)?t=$(this).attr("class").match(/feed\-option\-false/i)?!1:!0:$(this).attr("class").match(/feed\-apply\-option\-apply/i)&&(a=$(this).attr("class").match(/feed\-option\-false/i)?!1:!0)}),t&&!a||!t&&a?(t&&$(".feed-meta-search .search-target").text($(".feed-apply-option-partner").text()),a&&$(".feed-meta-search .search-target").text($(".feed-apply-option-apply").text())):$(".feed-meta-search .search-target").text(""),t||a?($(".feed-meta-search").show(),$(".feed-meta").hide()):($(".feed-meta-search").hide(),$(".feed-meta").show())},e.togglePartner=function(){0===e.partner?(e.partner=1,s.setFeedConfig(e,{p:1})):(e.partner=0,s.setFeedConfig(e,{p:0})),e.getAjaxData(),e.setRecordAjax()},e.toggleApply=function(){e.send=0===e.send?1:0,e.getAjaxData(),e.setRecordAjax()},e.toggleLatest=function(){0===e.latest?(e.latest=1,s.setFeedConfig(e,{l:1})):(e.latest=0,s.setFeedConfig(e,{l:0})),e.getAjaxData(),e.setRecordAjax()},e.timeShow=!1,e.toggleTitle=function(){1!==e.title_match&&(e.title_match=1,s.setFeedConfig(e,{t:1}),e.extend_match=0,s.setFeedConfig(e,{e:0})),e.timeShow=!1,e.getAjaxData(),e.setRecordAjax()},1==e.extend_match&&(e.timeShow=!0),e.toggleExtend=function(){1!==e.extend_match&&(e.extend_match=1,s.setFeedConfig(e,{e:1}),e.title_match=0,s.setFeedConfig(e,{t:0})),e.timeShow=!0,e.getAjaxData(),e.setRecordAjax()},e.toggleEvaluate=function(e){var t=$(e.currentTarget),a=t.find("span");"none"===a.css("display")?a.removeClass("ng-hide"):a.addClass("ng-hide")},e.changeTime=function(t){var a=angular.element(t.currentTarget),r=a.attr("data-time");a.hasClass("feed-expand-time-choose")||(e.reco_time=r,s.setFeedConfig(e,{r:r}),a.parent().children().removeClass("feed-expand-time-choose"),a.addClass("feed-expand-time-choose"),e.getAjaxData(),e.setRecordAjax())},e.getAjaxData=function(){e.hasmore=0,e.loadingStatus=!0,e.dataBlank=0,e.start=0,e.hasmore=0,e.moreLoading=0,t.get(e.ajax_url+e.public_url()).success(function(t){t&&"ok"==t.status&&(e.data=t,e.loadingStatus=0,e.start=t.next_start,e.hasmore=!0,0===e.data.data.length&&(e.hasmore=0,e.dataBlank=!0),e.total_recommend_count=t.total_recommend_count,5*parseInt(t.start+1)>=e.total_recommend_count&&(e.hasmore=0),e.search_count=t.feed_query_count,e.toggleSearchInfo(t.feed_query_count))}).error(function(e){console.log(e),window.location.reload()})},e.reset=function(){s.delCookie(s.feedCkPrefix+e.getFeedId),e.filter_list.work_years_min="不限",e.filter_list.work_years_max="不限",e.filter_list.salary_min="",e.filter_list.salary_max="",e.filter_list.degree="不限",e.filter_list.age_min="",e.filter_list.age_max="",e.filter_list.gender="不限",e.filter_list.current_area="不限",e.showNoLimit(e.filter_list.work_years_min,e.filter_list.work_years_max,"show_no_limit","年",".js-no-limit"),e.showNoLimit(e.filter_list.salary_min,e.filter_list.salary_max,"show_salary_no_limit","k",".js-salary-no-limit"),e.showNoLimit(e.filter_list.age_min,e.filter_list.age_max,"show_age_no_limit","岁",".js-age-no-limit")},e.hasUpdated=!1,e.checkDownloadStatus=function(e){return e&&e.contact_info&&!s.isEmptyObj(e.contact_info)?!0:!1},e.checkReadStatus=function(t,a){return e.checkDownloadStatus(t)?!1:"unread"==a},e.changeReadStatus=function(e){e.user_read_status="read"},e.clickToDetail=function(t,a){a.user_read_status="read";var r=t.currentTarget.getAttribute("data-resume-detail-url");return t.target.getAttribute("class").match(/^i\-/i)?e.stopBubble(t):window.open(r),!1},e.deleteItem=function(t){t.deleteStatus?(t.deleteStatus=0,$.get("/feed/modify_feed_result",{feed_id:l,resume_id:t.resume.id,reco_index:"150"})):(e.isShowDisLikeAlert||e.doNotShowDisLikeAlert||n.simpleAlert("谢谢您的反馈！",'<div class="text-center"><span class="big-icon big-icon-flower mt20"></span><span class="mt20 block f14 c607d8b">您的反馈<span class="cf46c62">有助于</span>算法为您推荐更匹配<span class="c434343"> '+e.currentFeedTitle+' </span>的简历！</span><div class="mt20"><input type="checkbox" name="do-not-show-dislike-alert" id="do-not-show-dislike-alert"  value="1" class="" > <label for="do-not-show-dislike-alert"><span class="f14 cf46c62">不再提醒</span></label></div></div>',function(t,a){if($("#do-not-show-dislike-alert").is(":checked")){var r=365;s.setCookie("do-not-show-dislike-alert",1,864e5*r),e.doNotShowDisLikeAlert=!0}},null,"我知道了",!1),t.deleteStatus=!0,$.get("/feed/modify_feed_result",{feed_id:l,resume_id:t.resume.id,reco_index:"-150"}))},e.stopBubble=function(e){e=e?e:window.event,window.event&&(e.cancelBubble=!0),e.stopPropagation()},e.showHoverTip=function(e){var t=e.currentTarget.getAttribute("class");if(t.match(/i\-(fav|delete)\-([0-9a-z]+)/i)){var a=RegExp.$1,r=new String("收藏该候选人").length,i=".i-"+a+"-delete-hover-"+RegExp.$2,s=".i-"+a+"-delete-notice-"+RegExp.$2;if("fav"!=a){var n=parseInt(72*($(i).text().length/r)),o=parseInt(72*($(s).text().length/r));$(i).css("width",n+"px"),$(s).css("width",o+"px")}else $(i).css("width","72px");$(i).show()}},e.hideHoverTip=function(e){var t=e.currentTarget.getAttribute("class");if(t.match(/i\-(fav|delete)\-([0-9a-z]+)/i)){var a=RegExp.$1,r=".i-"+a+"-delete-hover-"+RegExp.$2;$(r).hide()}},e.favItem=function(t,a){if(t.favStatus)t.favStatus=0,$.get("/resumes/remove_watch/"+t.resume.id,{feed_id:l,feed_keywords:t.feed.keywords.join(" ")});else{if(!e.isShowFavAlert&&!e.doNotShowFavAlert){var r=$(".aside-1 > li.selected").find("span.title").text();n.simpleAlert("简历收藏成功！",'<div class="text-center"><span class="big-icon big-icon-rocket mt20"></span><span class="mt20 block f14 c607d8b">多多收藏喜欢的人才，我们将为你推荐更多匹配<span class="c434343"> '+r+' </span>职位的人才～</span><div class="mt20"><input type="checkbox" name="do-not-show-fav-alert" id="do-not-show-fav-alert"  value="1" class=""> <label for="do-not-show-fav-alert"><span class="f14 cf46c62">不再提醒</span></label></div></div>',function(t,a){if($("#do-not-show-fav-alert").is(":checked")){var r=365;s.setCookie("do-not-show-fav-alert",1,864e5*r),e.doNotShowFavAlert=!0}},null,"我知道了",!1)}e.isShowFavAlert=!0,t.favStatus=!0,$.get("/resumes/add_watch/"+t.resume.id,{feed_id:l,feed_keywords:t.feed.keywords.join(" ")})}},e.showMoreInfo=function(t,a){var r=t.currentTarget,i=angular.element(r).find(".item-view-more-info")[0];if(e.chkLineNum(a)>0){angular.element(i).css("display","block");var s=angular.element(r).find(".item-view-more-info-ul")[0];parseInt(angular.element(s).css("top"));e.isSingleLine(a)?angular.element(s).css("top","-62px"):angular.element(s).css("top","-86px"),angular.element(s).css("opacity","1.0")}},e.hideMoreInfo=function(t,a){var r=t.currentTarget,i=angular.element(r).find(".item-view-more-info")[0];if(e.chkLineNum(a)>0){var s=angular.element(r).find(".item-view-more-info-ul")[0];parseInt(angular.element(s).css("top"));angular.element(s).css("top","0px"),angular.element(s).css("opacity","1.0"),setTimeout(function(){angular.element(i).css("display","none")},300)}},e.chkLineNum=function(t){var a=0;return e.isNotEmptyObj(t.mark_log)&&a++,e.isNotEmptyObj(t.comment_log)&&a++,a},e.isSingleLine=function(t){return 1==e.chkLineNum(t)?!0:!1},e.isNotEmptyObj=function(e){if("object"!=typeof e)return!1;for(var t in e)if(void 0!=e[t])return!0;return!1},e.notEmpty=function(e){return null!=e&&void 0!=e?!1:"string"==typeof e&&""!=e.trim()?!0:!1},e.fetchMore=function(){e.hasmore=0,e.moreLoading=!0,-1!=e.start?(e.setRecordAjax(),t.get(e.ajax_url+e.public_url()).success(function(t){t&&"ok"==t.status&&(0!=t.data.length&&(e.data.data=e.data.data.concat(t.data)),e.hasmore=!0,e.moreLoading=0,e.start=t.next_start)}).error(function(e){console.log(e),window.location.reload()})):(e.hasmore=0,e.moreLoading=0)},e.closeActiveTip=function(){$(".active-success").hide()},e.closeRenewTip=function(){$(".renew-success").hide()};e.minChange=function(t,a,r){var i=t;switch(a){case"work_years_max":for(var n=e.work_years_max.length-1;n>=0;n--)"不限"!=i&&"不限"!=e.work_years_max[n].value&&e.work_years_max[n].value<=i?$("#JS_work_years_max option").eq(n).attr("disabled","disabled"):$("#JS_work_years_max option").eq(n).removeAttr("disabled");r&&(s.setFeedConfig(e,{minY:e.filter_list.work_years_min}),e.showNoLimit(e.filter_list.work_years_min,e.filter_list.work_years_max,"show_no_limit","年",".js-no-limit"))}},e.maxChange=function(t,a,r){var i=t;switch(a){case"work_years_min":for(var n=e.work_years_min.length-1;n>=0;n--)"不限"!=i&&"不限"!=e.work_years_min[n].value&&e.work_years_min[n].value>=i?$("#JS_work_years_min option").eq(n).attr("disabled","disabled"):$("#JS_work_years_min option").eq(n).removeAttr("disabled");r&&(s.setFeedConfig(e,{maxY:e.filter_list.work_years_max}),e.showNoLimit(e.filter_list.work_years_min,e.filter_list.work_years_max,"show_no_limit","年",".js-no-limit"))}},setTimeout(function(){e.minChange(e.filter_list.work_years_min,"work_years_max",!1),e.maxChange(e.filter_list.work_years_max,"work_years_min",!1)},500),e.setDegreeCookie=function(){s.setFeedConfig(e,{degree:e.filter_list.degree})},e.setGenderCookie=function(){s.setFeedConfig(e,{gender:e.filter_list.gender})},e.setCaCookie=function(){s.setFeedConfig(e,{ca:e.filter_list.current_area})},e.validateAgeInput=function(e){var t=/^[1-9]\d*$/,e=parseInt(e);return isNaN(e)||t.test(e)?!1:!0},e.validateSalaryInput=function(e){var t=/^[0-9]\d*$/,e=parseInt(e);return isNaN(e)||t.test(e)?!1:!0},e.validateAge=function(t){$this=angular.element(t.target),e.filter_list.age_max=parseInt(e.filter_list.age_max),e.filter_list.age_min=parseInt(e.filter_list.age_min),("age_min"==$this.attr("name")||"age_max"==$this.attr("name"))&&(isNaN(e.filter_list.age_max)||isNaN(e.filter_list.age_min)?e.showAgeError=!1:e.filter_list.age_max<e.filter_list.age_min&&0!==e.filter_list.age_max?e.showAgeError=!0:e.showAgeError=!1,isNaN(e.filter_list.age_max)&&(e.filter_list.age_max=""),isNaN(e.filter_list.age_min)&&(e.filter_list.age_min="")),"age_min"==$this.attr("name")&&s.setFeedConfig(e,{minA:e.filter_list.age_min}),"age_max"==$this.attr("name")&&s.setFeedConfig(e,{maxA:e.filter_list.age_max}),e.showNoLimit(e.filter_list.age_min,e.filter_list.age_max,"show_age_no_limit","岁",".js-age-no-limit")},e.validateSalary=function(t){$this=angular.element(t.target),e.filter_list.salary_min=parseInt(e.filter_list.salary_min),e.filter_list.salary_max=parseInt(e.filter_list.salary_max),("salary_min"==$this.attr("name")||"salary_max"==$this.attr("name"))&&(isNaN(e.filter_list.salary_min)||isNaN(e.filter_list.salary_max)?e.showSalaryError=!1:e.filter_list.salary_max<e.filter_list.salary_min&&0!==e.filter_list.salary_max?e.showSalaryError=!0:e.showSalaryError=!1),isNaN(e.filter_list.salary_max)&&(e.filter_list.salary_max=""),isNaN(e.filter_list.salary_min)&&(e.filter_list.salary_min=""),"salary_min"==$this.attr("name")&&s.setFeedConfig(e,{minS:e.filter_list.salary_min}),"salary_max"==$this.attr("name")&&s.setFeedConfig(e,{maxS:e.filter_list.salary_max}),e.showNoLimit(e.filter_list.salary_min,e.filter_list.salary_max,"show_salary_no_limit","k",".js-salary-no-limit")},e.triggerFilter=function(){void 0===$(".age-error").css("display")&&(e.getAjaxData(),e.setRecordAjax())},e.hideSelect=function(t){o(t,e)}}]),t.controller("feedBlank",["$scope","$http","$state",function(e,t,a){var r=a.params.feedId,i=window.location.hash.split("/");i[i.length-2]==r&&(e.fromActive=-1!=window.location.hash.indexOf("fromActive")?"fromActive":"",e.fromRenew=-1!=window.location.hash.indexOf("fromRenew")?"fromRenew":""),e.closeActiveTip=function(){$(".active-success").hide()},e.closeRenewTip=function(){$(".renew-success").hide()}}]),t.controller("feedRenew",["$scope","$http","$state",function(e,t,a){e.feedId=a.params.feedId,e.asideData=window.asideData;for(var r=e.asideData.all_feed.length-1;r>=0;r--)e.asideData.all_feed[r].feed.id===e.feedId&&(e.feedItem=e.asideData.all_feed[r]);e.continue_feed=function(e){var a="/special_feed/renewal_feed/"+e.feed.id;t.get(a).success(function(t){if(t&&"ok"==t.status){var a="#/feed_resume/"+e.feed.id+"/?fromRenew";window.location.hash=a,e.feed.has_expire=!1}else $.alert('<p class="alert-notice-center"><span>请求失败，请稍后再试！</span></p>')}).error(function(e){console.log(e),window.location.reload()})},e.finish=function(e){var t="/feed/delete/"+e.feed.id,a='<div class="feed-finish-alert"><p class="info"><i class="i-warning"></i>恭喜！点击确定立即删除该条定制<br>之后你可以开始创建新的定制</p><p><a class="btn cancel closeLayer">取消</a><a class="btn confirm" href="'+t+'">确定</a></p></div>';$.LayerOut({html:a}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})},e.JS_viewHistory=function(e){var t=e.feed.id;a.go("feedResume",{feedId:t})}}]),t.controller("feedActive",["$scope","$http","$state",function(e,t,a){e.feedId=a.params.feedId,e.asideData=window.asideData;for(var r=e.asideData.all_feed.length-1;r>=0;r--)e.asideData.all_feed[r].feed.id===e.feedId&&(e.feedItem=e.asideData.all_feed[r]);e.continue_feed=function(e){var a="/special_feed/reset_feed_expire/"+e.feed.id;t.get(a).success(function(t){if(t&&"ok"==t.status){var a="#/feed_resume/"+e.feed.id+"/?fromActive";window.location.hash=a,e.feed.expire_status=!1}else $.alert('<p class="alert-notice-center"><span>请求失败，请稍后再试！</span></p>')}).error(function(e){console.log(e),window.location.reload()})},e.finish=function(e){var t="/feed/delete/"+e.feed.id,a='<div class="feed-finish-alert"><i class="closeLayer i-close"></i><p class="info"><i class="i-warning"></i>恭喜！点击确定立即删除该条定制<br>现在你可以开始创建新的定制</p><p><a class="btn cancel closeLayer">取消</a><a class="btn confirm" href="'+t+'">确定</a></p></div>';$.LayerOut({html:a}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})}}]),t.directive("asideInfo",function(){return{restrict:"E",templateUrl:i("special_feed/feed_aside.html"),controller:"feedAside",link:function(e,t,a){},scope:{re_feed_list:"=re_feed_list"}}}),t.directive("optionsDisabled",["$parse",function(e){var t=function(e,t,a,r,i){$("option[value!='?']",a).each(function(a,s){var n={};n[t]=r[a],$(this).attr("disabled",i(e,n))})};return{priority:0,require:"ngModel",link:function(a,r,i,s){var n=i.optionsDisabled.match(/^\s*(.+)\s+for\s+(.+)\s+in\s+(.+)?\s*/),o=n[3],l=e(n[1]);a.$watch(o,function(e,i){e&&t(a,n[2],r,e,l)},!0),a.$watch(i.ngModel,function(i,s){var d=e(o)(a);i&&t(a,n[2],r,d,l)})}}}]),t.directive("dateBar",function(){return{restrict:"E",templateUrl:i("special_feed/date_bar.html"),controller:["$scope","$element",function(e,t){var a=function(e){var t=function(e){var t;return t=void 0!=e&&("string"==typeof e||"number"==typeof e)?new Date(e):new Date,{y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds()}},a=t(),r=new Date(a.y,a.m-1,a.d+e,a.h,a.i,a.s);return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r=function(e){return"string"==typeof e&&e.match(/^([0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}) /i)?RegExp.$1:""},i=function(e,t){for(var a=0,r=t.length;r>a;a++)if(e==t[a])return!0;return!1};e.isShowDateBar=function(t){var a=r(t);return i(a,e.$parent.$parent.listDays)?!1:!0},e.isToday=function(e){var t=r(e);return t==a(0)?!0:!1},e.isYesterday=function(e){var t=r(e);return t==a(-1)?!0:!1},e.isSevenday=function(e){var t=r(e);return t==a(-7)?!0:!1},e.isOtherday=function(e){var t=r(e);return t!=a(0)&&t!=a(-1)&&t!=a(-7)?!0:!1}}],link:function(e,t,a){},scope:{displayTime:"="}}}),t.filter("trustHtml",["$sce",function(e){var t=function(e){var t=56,a=null,r=e.match(/(<br[ \/]*>)/gi);if(void 0!=r&&"object"==typeof r&&r.length>=1){a=RegExp.$1;var i=e.split(a);e=i[0].length>t?i[0]:i[0]+a+i[1],e.match(/\.\.\.$/i)||(e+="...")}return e};return function(a){var r=104;return"string"!=typeof a?"":(a=t(a.length>r?a.substr(0,r-3)+"...":a),e.trustAsHtml(a))}}]),t.filter("trustHtmlAllForTitle",["$sce",function(e){return function(t){if("string"!=typeof t)return"";var a=new RegExp("<br[ /]*>","ig");return t=t.replace(a,"\n\n"),e.trustAsHtml(t)}}]),t.filter("noSpace",["$sce",function(e){return function(e){return e.split(/\s+/)[0]}}]),t.filter("titleOrKey",function(){return function(e){return e=e.title.length>0?e.title:e.keywords}}),t.filter("gender",function(){return function(e){return"male"===e?e="男":"female"===e&&(e="女"),e}}),t.filter("meetIfEmpty",["$sce",function(e){return function(e){return""===e||void 0===e||null===e?"面议/月":e}}]),t.filter("formatOpt",function(){return function(e){return"不限"===e?"":e}}),t.filter("formatDate",function(){var e=function(e){return parseInt(e)<=9?"0"+e:e};return function(t){var a=new Date(parseInt(t.$date)-288e5);return a.getFullYear()+"-"+e(a.getMonth()+1)+"-"+e(a.getDate())+" "+e(a.getHours())+":"+e(a.getMinutes())}})}(),$(function(){$(window).on("scroll",function(){var e=$(".feed-aside"),t=$(document),a=$('a[ng-if="hasmore"]'),r=125,i=window.scrollY?window.scrollY:document.documentElement.scrollTop;if(i>=125?e.css("top","10px"):e.css("top",r-i+"px"),!a.length)return!1;if(!a.is(":hidden")){var s=t.height()-t.scrollTop()-$(window).height();100>s&&a.get(0).click()}})});