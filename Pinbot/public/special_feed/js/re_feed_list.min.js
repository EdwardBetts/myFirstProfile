!function(a){var b=angular.module("app.re_feed_list",["app.config","ui.router","app.django","app.utils","app.filter"]),c=angular.injector(["app.django"]),d=angular.injector(["app.utils"]),e=c.get("tmpl"),g=(c.get("static_url"),d.get("pbLib"));b.config(["$stateProvider","$urlRouterProvider",function(a,b){var c=window.asideData.all_feed[0].feed,d=c.id,f="";c.has_expire?f="/feed_renew/"+d+"/":!c.has_expire&&c.expire_status?f="/feed_active/"+d+"/":c.has_expire||c.expire_status||(f="/feed_resume/"+d+"/"),b.otherwise(f),a.state("feedResume",{url:"/feed_resume/:feedId/",templateUrl:e("special_feed/feed_resume.html"),controller:"feedResume"}),a.state("feedRenew",{url:"/feed_renew/:feedId/",templateUrl:e("special_feed/feed_renew.html"),controller:"feedRenew"}),a.state("feedActive",{url:"/feed_active/:feedId/",templateUrl:e("special_feed/feed_active.html"),controller:"feedActive"}),a.state("feedBlank",{url:"/feed_blank/:feedId/?source",templateUrl:e("special_feed/feed_blank.html"),controller:"feedBlank"})}]),b.controller("feedAside",["$scope","$http","$state",function(a,b,c){a.asideData=window.asideData,a.asideList=[],a.aside1=[],a.aside2=[],a.aside3=[],a.on=1;var d=a.asideData.all_feed.length;5>=d&&d>0?(a.aside1=a.asideData.all_feed.slice(0,d),a.asideList.push(a.aside1)):d>5&&10>=d?(a.aside1=a.asideData.all_feed.slice(0,5),a.aside2=a.asideData.all_feed.slice(5,d),a.asideList.push(a.aside1),a.asideList.push(a.aside2)):d>10&&15>=d?(a.aside1=a.asideData.all_feed.slice(0,5),a.aside2=a.asideData.all_feed.slice(5,10),a.aside3=a.asideData.all_feed.slice(10,d),a.asideList.push(a.aside1),a.asideList.push(a.aside2),a.asideList.push(a.aside3)):d>15?$.alert("\u5b9a\u5236\u6570\u91cf\u8d85\u51fa\u9650\u5236\uff0c\u8bf7\u5220\u9664\u5b9a\u5236\u523015\u4e2a\u4ee5\u4e0b\u540e\u5237\u65b0\u9875\u9762\u518d\u8bd5"):window.location.href="/feed/new/",a.isHide=function(b){return 1===b&&a.aside1.length>0&&a.aside2.length>0?!1:2===b&&a.aside2.length>0?!1:3===b&&a.aside3.length>0?!1:!0},a.isOn=function(b){return b==a.on?!0:!1},a.slide=function(b,c){a.on=b,c.preventDefault();var d="aside-"+b,e=$(".aside-1"),f=$(".aside-2"),g=$(".aside-3"),h=$("."+d),i=h[0].offsetLeft;return 0==i?!1:(1==b&&(h.css({transition:"0.5s",left:"0"}),f.css({transition:"0.5s",left:"280px"}),g.css({transition:"0.5s",left:"560px"})),2==b&&(e.css({transition:"0.5s",left:"-280px"}),h.css({transition:"0.5s",left:"0"}),g.css({transition:"0.5s",left:"280px"})),void(3==b&&(e.css({transition:"0.5s",left:"-560px"}),f.css({transition:"0.5s",left:"-280px"}),h.css({transition:"1s",left:"0"}))))},a.noFeedClick=function(a){a.preventDefault();var b='<div class="no-feed-alert"><h2><i class="i-warning"></i>\u65e0\u53ef\u7528\u5b9a\u5236\uff01</h2><p class="tip">\u8bf7\u5347\u7ea7\u4f1a\u5458\u4ee5\u83b7\u53d6\u66f4\u591a\u5b9a\u5236\u6570\u91cf</p><p><a class="btn cancel closeLayer">\u53d6\u6d88</a><a class="btn confirm" href="/vip/role_info/">\u53bb\u5347\u7ea7</a></p></div>';$.LayerOut({html:b}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})},a.checkSelected=function(a){var b=window.location.hash.split("/"),c=b[b.length-2];return c==a.feed.id?!0:!1},a.checkDelete=function(a){return!0},a.deleteFeed=function(b,c){a.stopBubble(c);var d=angular.element(c.currentTarget),e="";null!=d.parent().find(".title")&&(e='[<span class="cf46c62">'+d.parent().find(".title").text()+"</span>]"),$.alert('<p class="f16 text-center"><i class="i-l-notice"></i>\u786e\u5b9a\u5220\u9664\u8be5\u5b9a\u5236'+e+'\u5417\uff1f</p><p class="text-center cf46c62" style="font-size:14px;">\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d</p>',function(){var a="/feed/delete/"+b+"/";location.href=a})},a.checkEditable=function(a){return!a.feed.has_expire&&!a.feed.expire_status},a.checkRenew=function(a){return a.feed.has_expire},a.checkActive=function(a){return!a.feed.has_expire&&a.feed.expire_status},a.checkUpdate=function(a){return a.feed.unread_count>0},a.stopBubble=function(a){g.stopBubble(a)},a.changePage=function(b,d){var e=angular.element(d.currentTarget),f=angular.element(document.getElementsByClassName("feed-btns"));f.removeClass("selected-hover"),e.attr("class").match(/selected\-hover/i)||e.addClass("selected-hover"),$("body").scrollTop(0);var g=b.feed.id;a.checkRenew(b)?c.go("feedRenew",{feedId:g}):a.checkActive(b)?c.go("feedActive",{feedId:g}):c.go("feedResume",{feedId:g})},a.showMoreBtn=function(b){a.stopBubble(b);var c=angular.element(b.currentTarget);c.parent().addClass("selected-hover")},a.hideMoreBtn=function(a){var b=angular.element(a.currentTarget);setTimeout(function(){if(b.removeClass("selected-hover"),!b.attr("class").match(/selected/i)){var a=angular.element(b.find(".hover-bg")[0]);a.attr("class").match(/ng\-hide/i)||a.addClass("ng-hide")}},100)},a.showFirstBtn=function(a){var b=angular.element(a.currentTarget);if(!b.attr("class").match(/selected/i)){var c=angular.element(b.find(".hover-bg")[0]);c.attr("class").match(/ng\-hide/i)&&c.removeClass("ng-hide")}}}]),b.controller("feedResume",["$scope","$http","$state",function(a,b,c){var d="/special_feed/feed_list/",e=c.params.feedId,f=window.location.hash.split("/");g.feedCkPrefix;a.getFeedId=e,a.choosedFeeds=g.getFeedConfig(e),a.start=0,a.send=0;var i=a.getFeedId;a.latest=null!=a.choosedFeeds[i].l?a.choosedFeeds[i].l:0,a.partner=null!=a.choosedFeeds[i].p?a.choosedFeeds[i].p:0,a.title_match=null!=a.choosedFeeds[i].t?a.choosedFeeds[i].t:1,a.extend_match=null!=a.choosedFeeds[i].e?a.choosedFeeds[i].e:0,a.reco_time=null!=a.choosedFeeds[i].r?a.choosedFeeds[i].r:15,a.showEvaluate=!0,a.total_recommend_count=0,a.total_count=0,a.search_count=0,a.loadingStatus=!0,a.hasmore=0,a.moreLoading=0,a.dataBlank=0,a.fromActive="",a.fromRenew="",a.showAgeError=!1,a.filter=!1,a.filter_list={work_years_min:"",work_years_max:"",salary_min:"",salary_max:"",degree:"",age_min:"",age_max:"",gender:"",experience:""},a.work_years_min=[{name:"\u4e0d\u9650",value:""},{name:1,value:1},{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8},{name:9,value:9},{name:10,value:10}],a.work_years_max=[{name:"\u4e0d\u9650",value:""},{name:1,value:1},{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8},{name:9,value:9},{name:10,value:10}],a.salary_min=[{name:"\u4e0d\u9650",value:""},{name:1,value:1},{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8},{name:9,value:9},{name:10,value:10},{name:11,value:11},{name:12,value:12},{name:13,value:13},{name:14,value:14},{name:15,value:15},{name:16,value:16},{name:17,value:17},{name:18,value:18},{name:19,value:19},{name:20,value:20},{name:21,value:21},{name:22,value:22},{name:23,value:23},{name:24,value:24},{name:25,value:25},{name:26,value:26},{name:27,value:27},{name:28,value:28},{name:29,value:29},{name:30,value:30}],a.salary_max=[{name:"\u4e0d\u9650",value:""},{name:1,value:1},{name:2,value:2},{name:3,value:3},{name:4,value:4},{name:5,value:5},{name:6,value:6},{name:7,value:7},{name:8,value:8},{name:9,value:9},{name:10,value:10},{name:11,value:11},{name:12,value:12},{name:13,value:13},{name:14,value:14},{name:15,value:15},{name:16,value:16},{name:17,value:17},{name:18,value:18},{name:19,value:19},{name:20,value:20},{name:21,value:21},{name:22,value:22},{name:23,value:23},{name:24,value:24},{name:25,value:25},{name:26,value:26},{name:27,value:27},{name:28,value:28},{name:29,value:29},{name:30,value:30}],a.filter_list.work_years_min=a.work_years_min[0],a.filter_list.work_years_max=a.work_years_max[0],a.filter_list.salary_min=a.salary_min[0],a.filter_list.salary_max=a.salary_max[0],f[f.length-2]==e&&(a.fromActive=-1!=window.location.hash.indexOf("fromActive")?"fromActive":"",a.fromRenew=-1!=window.location.hash.indexOf("fromRenew")?"fromRenew":"");var j=function(a){var b=function(a){var b;return b=void 0!=a&&("string"==typeof a||"number"==typeof a)?new Date(a):new Date,{y:b.getFullYear(),m:b.getMonth()+1,d:b.getDate(),h:b.getHours(),i:b.getMinutes(),s:b.getSeconds()}},c=b(),d=new Date(c.y,c.m-1,c.d+a,c.h,c.i,c.s);return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()};a.today=j(0),a.yesterday=j(-1),a.sevenday=j(-7),a.listDays=[];var k=function(a){if("string"==typeof a&&a.match(/^([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2}) /i)){var b=parseInt(RegExp.$1),c=parseInt(RegExp.$2),d=parseInt(RegExp.$3);return b+"-"+c+"-"+d}return""};a.getDay=function(a){return k(a)},a.isHideDateBar=function(a){return!1},a.dateTitle=function(b,c){return a.isToday(c)?" \u4eca\u5929 ("+k(c)+") ":a.isYesterday(c)?" \u6628\u5929 ("+k(c)+") ":a.isSevenday(c)?" 7\u5929\u524d ("+k(c)+") ":" "+k(c)+" "},a.isToday=function(a){return!1},a.isYesterday=function(a){return!1},a.isSevenday=function(a){return!1},a.isOtherday=function(a){return!1},a.ajax_url=d+e;b.get(a.ajax_url+"?start="+a.start+"&latest="+a.latest+"&send="+a.send+"&partner="+a.partner+"&title_match="+a.title_match+"&extend_match="+a.extend_match+"&reco_time="+a.reco_time).success(function(b){if(b&&"ok"==b.status){a.data=b,a.loadingStatus=0,a.total_recommend_count=b.total_recommend_count,a.total_count=b.total_count,a.search_count=b.feed_query_count,a.start=b.next_start,a.hasmore=!0;for(var d=a.data.data.length-1;d>=0;d--)a.data.data[d].deleteStatus=0;5*parseInt(b.start+1)>=a.total_recommend_count&&(a.hasmore=0);var f=!1;(a.choosedFeeds[i].l||a.choosedFeeds[i].p||a.choosedFeeds[i].e||a.choosedFeeds[i].r)&&(f=!0),0===a.data.data.length&&f?(a.hasmore=0,a.dataBlank=!0):0!==a.data.data.length||f||(a.hasmore=0,c.go("feedBlank",{feedId:e,source:a.fromActive})),a.toggleSearchInfo()}}).error(function(a){console.log(a),window.location.reload()});a.checkFeedPartner=function(){return 0===a.partner?!0:!1},a.checkFeedApply=function(){return 0===a.send?!0:!1},a.checkFeedLatest=function(){return 0===a.latest?!0:!1},a.checkFeedTitle=function(){return 1===a.title_match?!0:!1},a.checkFeedExtend=function(){return 1===a.extend_match?!0:!1},a.toggleSearchInfo=function(a){var b=!1,c=!1;$(".feed-apply-option").each(function(a){$(this).attr("class").match(/feed\-apply\-option\-partner/i)?b=$(this).attr("class").match(/feed\-option\-false/i)?!1:!0:$(this).attr("class").match(/feed\-apply\-option\-apply/i)&&(c=$(this).attr("class").match(/feed\-option\-false/i)?!1:!0)}),b&&!c||!b&&c?(b&&$(".feed-meta-search .search-target").text($(".feed-apply-option-partner").text()),c&&$(".feed-meta-search .search-target").text($(".feed-apply-option-apply").text())):$(".feed-meta-search .search-target").text(""),b||c?($(".feed-meta-search").show(),$(".feed-meta").hide()):($(".feed-meta-search").hide(),$(".feed-meta").show())},a.togglePartner=function(){0===a.partner?(a.partner=1,g.setFeedConfig(a,{p:1})):(a.partner=0,g.setFeedConfig(a,{p:0})),a.getAjaxData()},a.toggleApply=function(){a.send=0===a.send?1:0,a.getAjaxData()},a.toggleLatest=function(){0===a.latest?(a.latest=1,g.setFeedConfig(a,{l:1})):(a.latest=0,g.setFeedConfig(a,{l:0})),a.getAjaxData()},a.timeShow=!1,a.toggleTitle=function(){1!==a.title_match&&(a.title_match=1,g.setFeedConfig(a,{t:1}),a.extend_match=0,g.setFeedConfig(a,{e:0})),a.timeShow=!1,a.getAjaxData()},1==a.extend_match&&(a.timeShow=!0),a.toggleExtend=function(){1!==a.extend_match&&(a.extend_match=1,g.setFeedConfig(a,{e:1}),a.title_match=0,g.setFeedConfig(a,{t:0})),a.timeShow=!0,a.getAjaxData()},a.toggleEvaluate=function(a){var b=$(a.currentTarget),c=b.find("span");"none"===c.css("display")?c.removeClass("ng-hide"):c.addClass("ng-hide")},a.changeTime=function(b){var c=angular.element(b.currentTarget),d=c.attr("data-time");c.hasClass("feed-expand-time-choose")||(a.reco_time=d,g.setFeedConfig(a,{r:d}),c.parent().children().removeClass("feed-expand-time-choose"),c.addClass("feed-expand-time-choose"),a.getAjaxData())},a.getAjaxData=function(){a.hasmore=0,a.loadingStatus=!0,a.dataBlank=0,a.start=0,a.hasmore=0,a.moreLoading=0,b.get(a.ajax_url+"?start="+a.start+"&latest="+a.latest+"&send="+a.send+"&partner="+a.partner+"&title_match="+a.title_match+"&extend_match="+a.extend_match+"&reco_time="+a.reco_time+"&work_years_min="+a.filter_list.work_years_min.value+"&work_years_max="+a.filter_list.work_years_max.value+"&salary_min="+a.filter_list.salary_min.value+"&salary_max="+a.filter_list.salary_max.value+"&degree="+a.filter_list.degree+"&age_min="+a.filter_list.age_min+"&age_max="+a.filter_list.age_max+"&gender="+a.filter_list.gender+"&experience="+a.filter_list.experience).success(function(b){b&&"ok"==b.status&&(a.data=b,a.loadingStatus=0,a.start=b.next_start,a.hasmore=!0,0===a.data.data.length&&(a.hasmore=0,a.dataBlank=!0),a.total_recommend_count=b.total_recommend_count,5*parseInt(b.start+1)>=a.total_recommend_count&&(a.hasmore=0),a.search_count=b.feed_query_count,a.toggleSearchInfo(b.feed_query_count))}).error(function(a){console.log(a),window.location.reload()})},a.hasUpdated=!1,a.checkDownloadStatus=function(a){return a&&a.contact_info&&!g.isEmptyObj(a.contact_info)?!0:!1},a.checkReadStatus=function(a){return"unread"==a},a.changeReadStatus=function(a){a.user_read_status="read"},a.clickToDetail=function(b,c){c.user_read_status="read";var d=b.currentTarget.getAttribute("data-resume-detail-url");return b.target.getAttribute("class").match(/^i\-/i)?a.stopBubble(b):window.open(d),!1},a.deleteItem=function(a){a.deleteStatus?(a.deleteStatus=0,$.get("/feed/modify_feed_result",{feed_id:e,resume_id:a.resume.id,reco_index:"150"})):(a.deleteStatus=!0,$.get("/feed/modify_feed_result",{feed_id:e,resume_id:a.resume.id,reco_index:"-150"}))},a.stopBubble=function(a){a=a?a:window.event,window.event&&(a.cancelBubble=!0),a.stopPropagation()},a.showHoverTip=function(a){var b=a.currentTarget.getAttribute("class");if(b.match(/i\-(fav|delete)\-([0-9a-z]+)/i)){var c=RegExp.$1,d=new String("\u6536\u85cf\u8be5\u5019\u9009\u4eba").length,e=".i-"+c+"-delete-hover-"+RegExp.$2,f=".i-"+c+"-delete-notice-"+RegExp.$2;if("fav"!=c){var g=parseInt(72*($(e).text().length/d)),h=parseInt(72*($(f).text().length/d));$(e).css("width",g+"px"),$(f).css("width",h+"px")}else $(e).css("width","72px");$(e).show()}},a.hideHoverTip=function(a){var b=a.currentTarget.getAttribute("class");if(b.match(/i\-(fav|delete)\-([0-9a-z]+)/i)){var c=RegExp.$1,d=".i-"+c+"-delete-hover-"+RegExp.$2;$(d).hide()}},a.favItem=function(a){a.favStatus?(a.favStatus=0,$.get("/resumes/remove_watch/"+a.resume.id,{feed_id:e,feed_keywords:a.feed.keywords.join(" ")})):(a.favStatus=!0,$.get("/resumes/add_watch/"+a.resume.id,{feed_id:e,feed_keywords:a.feed.keywords.join(" ")}))},a.showMoreInfo=function(b,c){var d=b.currentTarget,e=angular.element(d).find(".item-view-more-info")[0];if(a.chkLineNum(c)>0){angular.element(e).css("display","block");var f=angular.element(d).find(".item-view-more-info-ul")[0];parseInt(angular.element(f).css("top"));a.isSingleLine(c)?angular.element(f).css("top","-62px"):angular.element(f).css("top","-86px"),angular.element(f).css("opacity","1.0")}},a.hideMoreInfo=function(b,c){var d=b.currentTarget,e=angular.element(d).find(".item-view-more-info")[0];if(a.chkLineNum(c)>0){var f=angular.element(d).find(".item-view-more-info-ul")[0];parseInt(angular.element(f).css("top"));angular.element(f).css("top","0px"),angular.element(f).css("opacity","1.0"),setTimeout(function(){angular.element(e).css("display","none")},300)}},a.chkLineNum=function(b){var c=0;return a.isNotEmptyObj(b.mark_log)&&c++,a.isNotEmptyObj(b.comment_log)&&c++,c},a.isSingleLine=function(b){return 1==a.chkLineNum(b)?!0:!1},a.isNotEmptyObj=function(a){if("object"!=typeof a)return!1;for(var b in a)if(void 0!=a[b])return!0;return!1},a.notEmpty=function(a){return null!=a&&void 0!=a?!1:"string"==typeof a&&""!=a.trim()?!0:!1},a.fetchMore=function(){a.hasmore=0,a.moreLoading=!0,-1!=a.start?b.get(a.ajax_url+"?start="+a.start+"&latest="+a.latest+"&send="+a.send+"&partner="+a.partner+"&title_match="+a.title_match+"&extend_match="+a.extend_match+"&reco_time="+a.reco_time+"&work_years_min="+a.filter_list.work_years_min.value+"&work_years_max="+a.filter_list.work_years_max.value+"&salary_min="+a.filter_list.salary_min.value+"&salary_max="+a.filter_list.salary_max.value+"&degree="+a.filter_list.degree+"&age_min="+a.filter_list.age_min+"&age_max="+a.filter_list.age_max+"&gender="+a.filter_list.gender+"&experience="+a.filter_list.experience).success(function(b){b&&"ok"==b.status&&(0!=b.data.length&&(a.data.data=a.data.data.concat(b.data)),a.hasmore=!0,a.moreLoading=0,a.start=b.next_start)}).error(function(a){console.log(a),window.location.reload()}):(a.hasmore=0,a.moreLoading=0)},a.closeActiveTip=function(){$(".active-success").hide()},a.closeRenewTip=function(){$(".renew-success").hide()},a.minChange=function(b,c){var d=b.value;switch(c){case"work_years_max":for(var e=a.work_years_max.length-1;e>=0;e--)""!=d&&""!=a.work_years_max[e].value&&a.work_years_max[e].value<=d?a.work_years_max[e].disabled=!0:a.work_years_max[e].disabled=!1;break;case"salary_max":for(var e=a.salary_max.length-1;e>=0;e--)""!=a.salary_max[e].value&&a.salary_max[e].value<=d?a.salary_max[e].disabled=!0:a.salary_max[e].disabled=!1}},a.maxChange=function(b,c){var d=b.value;switch(c){case"work_years_min":for(var e=a.work_years_min.length-1;e>=0;e--)""!=d&&""!=a.work_years_min[e].value&&a.work_years_min[e].value>=d?a.work_years_min[e].disabled=!0:a.work_years_min[e].disabled=!1;break;case"salary_min":for(var e=a.salary_min.length-1;e>=0;e--)""!=a.salary_min[e].value&&a.salary_min[e].value>=d?a.salary_min[e].disabled=!0:a.salary_min[e].disabled=!1}},a.validateAgeInput=function(b){var c=/^[1-9]\d*$/,b=parseInt(b);return isNaN(b)||c.test(b)||a.showAgeError?!1:!0},a.validateAge=function(){a.filter_list.age_max=parseInt(a.filter_list.age_max),a.filter_list.age_min=parseInt(a.filter_list.age_min),isNaN(a.filter_list.age_max)||isNaN(a.filter_list.age_min)?a.showAgeError=!1:a.filter_list.age_max<a.filter_list.age_min?a.showAgeError=!0:a.showAgeError=!1},a.toggleFilter=function(b){a.filter=!b},a.triggerFilter=function(){void 0===$(".age-error").css("display")&&a.getAjaxData()}}]),b.controller("feedBlank",["$scope","$http","$state",function(a,b,c){var d=c.params.feedId,e=window.location.hash.split("/");e[e.length-2]==d&&(a.fromActive=-1!=window.location.hash.indexOf("fromActive")?"fromActive":"",a.fromRenew=-1!=window.location.hash.indexOf("fromRenew")?"fromRenew":""),a.closeActiveTip=function(){$(".active-success").hide()},a.closeRenewTip=function(){$(".renew-success").hide()}}]),b.controller("feedRenew",["$scope","$http","$state",function(a,b,c){a.feedId=c.params.feedId,a.asideData=window.asideData;for(var d=a.asideData.all_feed.length-1;d>=0;d--)a.asideData.all_feed[d].feed.id===a.feedId&&(a.feedItem=a.asideData.all_feed[d]);a.continue_feed=function(a){var c="/special_feed/renewal_feed/"+a.feed.id;b.get(c).success(function(b){if(b&&"ok"==b.status){var c="#/feed_resume/"+a.feed.id+"/?fromRenew";window.location.hash=c,a.feed.has_expire=!1}else $.alert('<p class="alert-notice-center"><span>\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01</span></p>')}).error(function(a){console.log(a),window.location.reload()})},a.finish=function(a){var b="/feed/delete/"+a.feed.id,c='<div class="feed-finish-alert"><p class="info"><i class="i-warning"></i>\u606d\u559c\uff01\u70b9\u51fb\u786e\u5b9a\u7acb\u5373\u5220\u9664\u8be5\u6761\u5b9a\u5236<br>\u4e4b\u540e\u4f60\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u65b0\u7684\u5b9a\u5236</p><p><a class="btn cancel closeLayer">\u53d6\u6d88</a><a class="btn confirm" href="'+b+'">\u786e\u5b9a</a></p></div>';$.LayerOut({html:c}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})},a.JS_viewHistory=function(a){var b=a.feed.id;c.go("feedResume",{feedId:b})}}]),b.controller("feedActive",["$scope","$http","$state",function(a,b,c){a.feedId=c.params.feedId,a.asideData=window.asideData;for(var d=a.asideData.all_feed.length-1;d>=0;d--)a.asideData.all_feed[d].feed.id===a.feedId&&(a.feedItem=a.asideData.all_feed[d]);a.continue_feed=function(a){var c="/special_feed/reset_feed_expire/"+a.feed.id;b.get(c).success(function(b){if(b&&"ok"==b.status){var c="#/feed_resume/"+a.feed.id+"/?fromActive";window.location.hash=c,a.feed.expire_status=!1}else $.alert('<p class="alert-notice-center"><span>\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01</span></p>')}).error(function(a){console.log(a),window.location.reload()})},a.finish=function(a){var b="/feed/delete/"+a.feed.id,c='<div class="feed-finish-alert"><i class="closeLayer i-close"></i><p class="info"><i class="i-warning"></i>\u606d\u559c\uff01\u70b9\u51fb\u786e\u5b9a\u7acb\u5373\u5220\u9664\u8be5\u6761\u5b9a\u5236<br>\u73b0\u5728\u4f60\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u65b0\u7684\u5b9a\u5236</p><p><a class="btn cancel closeLayer">\u53d6\u6d88</a><a class="btn confirm" href="'+b+'">\u786e\u5b9a</a></p></div>';$.LayerOut({html:c}),$(".closeLayer").on("click",function(){$(".modal-backdrop,.modal").remove(),delete $._LayerOut})}}]),b.directive("asideInfo",function(){return{restrict:"E",templateUrl:e("special_feed/feed_aside.html"),controller:"feedAside",link:function(a,b,c){},scope:{re_feed_list:"=re_feed_list"}}}),b.directive("optionsDisabled",function(a){var b=function(a,b,c,d,e){$("option[value!='?']",c).each(function(c,f){var g={};g[b]=d[c],$(this).attr("disabled",e(a,g))})};return{priority:0,require:"ngModel",link:function(c,d,e,f){var g=e.optionsDisabled.match(/^\s*(.+)\s+for\s+(.+)\s+in\s+(.+)?\s*/),h=g[3],i=a(g[1]);c.$watch(h,function(a,e){a&&b(c,g[2],d,a,i)},!0),c.$watch(e.ngModel,function(e,f){var j=a(h)(c);e&&b(c,g[2],d,j,i)})}}}),b.directive("dateBar",function(){return{restrict:"E",templateUrl:e("special_feed/date_bar.html"),controller:function(a,b){var c=function(a){var b=function(a){var b;return b=void 0!=a&&("string"==typeof a||"number"==typeof a)?new Date(a):new Date,{y:b.getFullYear(),m:b.getMonth()+1,d:b.getDate(),h:b.getHours(),i:b.getMinutes(),s:b.getSeconds()}},c=b(),d=new Date(c.y,c.m-1,c.d+a,c.h,c.i,c.s);return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()},d=function(a){return"string"==typeof a&&a.match(/^([0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}) /i)?RegExp.$1:""},e=function(a,b){for(var c=0,d=b.length;d>c;c++)if(a==b[c])return!0;return!1};a.isShowDateBar=function(b){var c=d(b);return e(c,a.$parent.$parent.listDays)?!1:!0},a.isToday=function(a){var b=d(a);return b==c(0)?!0:!1},a.isYesterday=function(a){var b=d(a);return b==c(-1)?!0:!1},a.isSevenday=function(a){var b=d(a);return b==c(-7)?!0:!1},a.isOtherday=function(a){var b=d(a);return b!=c(0)&&b!=c(-1)&&b!=c(-7)?!0:!1}},link:function(a,b,c){},scope:{displayTime:"="}}}),b.filter("trustHtml",function(a){var b=function(a){var b=56,c=null,d=a.match(/(<br[ \/]*>)/gi);if(void 0!=d&&"object"==typeof d&&d.length>=1){c=RegExp.$1;var e=a.split(c);a=e[0].length>b?e[0]:e[0]+c+e[1],a.match(/\.\.\.$/i)||(a+="...")}return a};return function(c){var d=104;return"string"!=typeof c?"":(c=b(c.length>d?c.substr(0,d-3)+"...":c),a.trustAsHtml(c))}}),b.filter("trustHtmlAllForTitle",function(a){return function(b){if("string"!=typeof b)return"";var c=new RegExp("<br[ /]*>","ig");return b=b.replace(c,"\n\n"),a.trustAsHtml(b)}}),b.filter("noSpace",function(a){return function(a){return a.split(/\s+/)[0]}}),b.filter("titleOrKey",function(){return function(a){return a=a.title.length>0?a.title:a.keywords}}),b.filter("gender",function(){return function(a){return"male"===a?a="\u7537":"female"===a&&(a="\u5973"),a}}),b.filter("formatOpt",function(){return function(a){return"\u4e0d\u9650"===a?"":a}}),b.filter("formatDate",function(){var a=function(a){return parseInt(a)<=9?"0"+a:a};return function(b){var c=new Date(parseInt(b.$date)-288e5);return c.getFullYear()+"-"+a(c.getMonth()+1)+"-"+a(c.getDate())+" "+a(c.getHours())+":"+a(c.getMinutes())}})}(),$(function(){$(window).on("scroll",function(){var a=$(".feed-aside"),b=$(document),c=$('a[ng-if="hasmore"]'),d=153,e=window.scrollY?window.scrollY:document.documentElement.scrollTop;if(e>=153?a.css("top","10px"):a.css("top",d-e+"px"),!c.length)return!1;if(!c.is(":hidden")){var f=b.height()-b.scrollTop()-$(window).height();100>f&&c.get(0).click()}})});