!function(){var e=angular.module("settingApp",["app.config"]);e.controller("settingCtrl",["$scope","$http",function(e,t){e.datas=angular.fromJson(angular.element(document.getElementsByTagName("form")[0]).attr("data-datas")),e.allAreaChecked=e.datas.setting.job_domain.length?!1:!0,e.isActive=function(e,t){for(var n=0,r=t.length;r>n;n++){var i=t[n];if(i.id==e)return!0}return!1},e.toggleActive=function(t,n){if(e.isActive(t.id,n))for(var r=0,i=n.length;i>r;r++){var a=n[r];if(a.id==t.id){n.splice(r,1);break}}else n.push(angular.copy(t))},e.addTile=function(e,t){t.push(angular.copy(e))},e.removeTitle=function(e,t){for(var n=0,r=t.length;r>n;n++){var i=t[n];if(i==e){t.splice(n,1);break}}},e.isActiveTitle=function(e,t){for(var n=0,r=t.length;r>n;n++){var i=t[n];if(i==e)return!0}return!1},e.setKeywords=function(){return e.keywordText?(e.addTile(e.keywordText,e.datas.setting.title),void(e.keywordText="")):!1},e.watchKeyword=function(t){e.canSave(t)&&e.setKeywords()},e.canSave=function(t){var n=t.keyCode;return 188==n?(e.keywordText=e.keywordText.substring(0,e.keywordText.length-1),!0):!1},e.resetJobDomain=function(t){e.datas.setting.job_domain=[]},e.save=function(){t.post(".",JSON.stringify(e.datas.setting)).success(function(e){e&&"ok"==e.status&&e.redirect_url&&(location.href=e.redirect_url)})}}]),e.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}})}();