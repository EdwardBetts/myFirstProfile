$.Health=function(t,e){if(t){var n=function(t){return new n.prototype.init(t)};return n.prototype={constructor:n,init:function(e){this.setting=t.extend({triggerSelector:"#JS_trigger_health",contentSelector:"#JS_health_content",loadingSelector:"#loading",url:"/partner/level_state/",data:{download_level:{bonus_coin:0,exp:0,is_max_level:!1,level:1,level_type:0,next_bonus_coin:4,next_exp:10,next_level:2,user_exp:0},interview_level:{bonus_coin:0,exp:0,is_max_level:!1,level:1,level_type:0,next_bonus_coin:12,next_exp:3,next_level:2,user_exp:0},taking_work_level:{bonus_coin:0,exp:0,is_max_level:!1,level:1,level_type:0,next_bonus_coin:20,next_exp:3,next_level:2,user_exp:0},flowerpot:"sick"},unit:"金币/次"},e),window.__Health=this,this.bindTriggerHealth(),this.getHealthData(window.__Health.renderingPotOnly),this.scroll()},bindTriggerHealth:function(){var e=this.setting,n=t(e.triggerSelector),a=t(e.contentSelector);n.on("click",function(){a.hasClass("show")?window.__Health.hideHealth():window.__Health.showHealth()}),t(".inner-content, #JS_container, .main-subnav, .regular, .panel, .home-foot").on("click",function(){a.hasClass("show")&&window.__Health.hideHealth()})},getHealthData:function(e){var n=this.setting;t(n.loadingSelector).show(),t.ajax({method:"get",url:n.url,success:e,error:function(){t.alert("数据请求失败，请关闭后重新点击打开奖励规则...")}})},renderingData:function(){var e=this.setting,n=e.data;for(var a in n){"taking_work_level"!=a?e.unit="金币/次":e.unit="%佣金/次";var i=t("#"+a),l=i.find(".level"),o=i.find(".i-next-award"),s=i.find(".i-curr-award"),r=i.find(".ratio"),c=i.find(".curr-num"),d=i.find(".next-num"),u=i.find(".number"),h=n[a],_=h.user_exp/h.next_exp*100;l.html("lv."+h.level),u.find("b.max").remove(),0===h.bonus_coin?s.hide():s.html(h.bonus_coin+e.unit).css("left",_-12+"%"),h.is_max_level?(s.hide(),o.html(h.bonus_coin+e.unit).addClass("max"),c.html(h.user_exp),d.html(h.exp),u.append('<b class="max">MAX!!</b>'),r.css("width","100%").addClass("max")):(c.html(h.user_exp),d.html(h.next_exp),o.html(h.next_bonus_coin+e.unit),r.css("width",_+"%")),t(e.loadingSelector).hide(),t("#content_detail").css({opacity:"0"}).stop().animate({opacity:"1"},500)}},renderingPot:function(){var e=this.setting,n=e.data,a=t("#small-pot"),i=t("#dynamic-pot"),l=t("#pot-word");switch(n.flowerpot){case"ordinary":a.attr("class","i-small-pot pot-ordinary"),i.attr("class","dynamic-pot dynamic-pot-ordinary"),l.html("提高简历被下载数量，有机会拿到1.5~2倍的金币奖励！");break;case"sick":a.attr("class","i-small-pot pot-sick"),i.attr("class","dynamic-pot dynamic-pot-sick"),l.html("你还没有任何简历被下载，推荐优质又匹配的候选人有助简历被下载喔！");break;case"sunlight":a.attr("class","i-small-pot pot-sunlight"),i.attr("class","dynamic-pot dynamic-pot-sunlight"),l.html("候选人进入面试，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unusual_interview":a.attr("class","i-small-pot pot-unusual"),i.attr("class","dynamic-pot dynamic-pot-unusual"),l.html("推进候选人完成入职，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unusual_taking_work":a.attr("class","i-small-pot pot-unusual"),i.attr("class","dynamic-pot dynamic-pot-unusual"),l.html("候选人进入面试，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unbelievable":a.attr("class","i-small-pot pot-unbelievable"),i.attr("class","dynamic-pot dynamic-pot-unbelievable"),l.html("你正处于无敌状态，可享受最高额度金币奖励，保持喔！")}},renderingPotOnly:function(e){var n=window.__Health.setting;"ok"===e.status&&(n.data=t.extend(n.data,e.data),window.__Health.renderingPot())},renderingAll:function(e){var n=window.__Health.setting;"ok"===e.status&&(n.data=t.extend(n.data,e.data),window.__Health.renderingPot(),window.__Health.renderingData())},scroll:function(){t(window).on("scroll",function(e){var n=t(document).scrollTop(),a=t(".health-content");n>60?a.css("padding-top","0"):a.css("padding-top",60-n+"px")})},hideHealth:function(){var e=this.setting;t(e.contentSelector).removeClass("show").addClass("hide"),t("#content_detail").animate({opacity:"0"},500)},showHealth:function(){var e=this.setting;t(e.contentSelector).removeClass("hide").addClass("show"),window.__Health.getHealthData(window.__Health.renderingAll)}},n.prototype.init.prototype=n.prototype,n}}(jQuery),$(function(){$.Health()});