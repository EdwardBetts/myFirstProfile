$.Health=(function(b,c){if(!b){return;}var a=function(d){return new a.prototype.init(d);};a.prototype={constructor:a,init:function(d){this.setting=b.extend({triggerSelector:"#JS_trigger_health",contentSelector:"#JS_health_content",loadingSelector:"#loading",url:"/partner/level_state/",data:{download_level:{bonus_coin:0,exp:0,is_max_level:false,level:1,level_type:0,next_bonus_coin:4,next_exp:10,next_level:2,user_exp:0},interview_level:{bonus_coin:0,exp:0,is_max_level:false,level:1,level_type:0,next_bonus_coin:12,next_exp:3,next_level:2,user_exp:0},taking_work_level:{bonus_coin:0,exp:0,is_max_level:false,level:1,level_type:0,next_bonus_coin:20,next_exp:3,next_level:2,user_exp:0},flowerpot:"sick"},unit:"金币/次"},d);window.__Health=this;this.bindTriggerHealth();this.getHealthData(window.__Health.renderingPotOnly);this.scroll();},bindTriggerHealth:function(){var f=this.setting,d=b(f.triggerSelector),e=b(f.contentSelector);d.on("click",function(){if(e.hasClass("show")){window.__Health.hideHealth();}else{window.__Health.showHealth();}});b(".inner-content, #JS_container, .main-subnav, .regular, .panel, .home-foot").on("click",function(){if(e.hasClass("show")){window.__Health.hideHealth();}});},getHealthData:function(e){var d=this.setting;b(d.loadingSelector).show();b.ajax({method:"get",url:d.url,success:e,error:function(){b.alert("数据请求失败，请关闭后重新点击打开奖励规则...");}});},renderingData:function(){var p=this.setting,e=p.data;for(var m in e){if(m!="taking_work_level"){p.unit="金币/次";}else{p.unit="%佣金/次";}var g=b("#"+m),d=g.find(".level"),h=g.find(".i-next-award"),j=g.find(".i-curr-award"),k=g.find(".ratio"),i=g.find(".curr-num"),o=g.find(".next-num"),n=g.find(".number"),f=e[m],l=f.user_exp/f.next_exp*100;d.html("lv."+f.level);n.find("b.max").remove();if(f.bonus_coin===0){j.hide();}else{j.html(f.bonus_coin+p.unit).css("left",l-12+"%");}if(f.is_max_level){j.hide();h.html(f.bonus_coin+p.unit).addClass("max");i.html(f.user_exp);o.html(f.exp);n.append('<b class="max">MAX!!</b>');k.css("width",100+"%").addClass("max");}else{i.html(f.user_exp);o.html(f.next_exp);h.html(f.next_bonus_coin+p.unit);k.css("width",l+"%");}b(p.loadingSelector).hide();b("#content_detail").css({opacity:"0"}).stop().animate({opacity:"1"},500);}},renderingPot:function(){var f=this.setting,g=f.data,e=b("#small-pot"),d=b("#dynamic-pot"),h=b("#pot-word");switch(g.flowerpot){case"ordinary":e.attr("class","i-small-pot pot-ordinary");d.attr("class","dynamic-pot dynamic-pot-ordinary");h.html("提高简历被下载数量，有机会拿到1.5~2倍的金币奖励！");break;case"sick":e.attr("class","i-small-pot pot-sick");d.attr("class","dynamic-pot dynamic-pot-sick");h.html("你还没有任何简历被下载，推荐优质又匹配的候选人有助简历被下载喔！");break;case"sunlight":e.attr("class","i-small-pot pot-sunlight");d.attr("class","dynamic-pot dynamic-pot-sunlight");h.html("候选人进入面试，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unusual_interview":e.attr("class","i-small-pot pot-unusual");d.attr("class","dynamic-pot dynamic-pot-unusual");h.html("推进候选人完成入职，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unusual_taking_work":e.attr("class","i-small-pot pot-unusual");d.attr("class","dynamic-pot dynamic-pot-unusual");h.html("候选人进入面试，可获得更高奖励！快去我的任务里跟进简历吧！");break;case"unbelievable":e.attr("class","i-small-pot pot-unbelievable");d.attr("class","dynamic-pot dynamic-pot-unbelievable");h.html("你正处于无敌状态，可享受最高额度金币奖励，保持喔！");break;default:break;}},renderingPotOnly:function(e){var d=window.__Health.setting;if(e.status==="ok"){d.data=b.extend(d.data,e.data);window.__Health.renderingPot();}},renderingAll:function(e){var d=window.__Health.setting;if(e.status==="ok"){d.data=b.extend(d.data,e.data);window.__Health.renderingPot();window.__Health.renderingData();}},scroll:function(){b(window).on("scroll",function(g){var f=b(document).scrollTop(),d=b(".health-content");if(f>60){d.css("padding-top","0");}else{d.css("padding-top",60-f+"px");}});},hideHealth:function(){var d=this.setting;b(d.contentSelector).removeClass("show").addClass("hide");b("#content_detail").animate({opacity:"0"},500);},showHealth:function(){var d=this.setting;b(d.contentSelector).removeClass("hide").addClass("show");window.__Health.getHealthData(window.__Health.renderingAll);}};a.prototype.init.prototype=a.prototype;return a;})(jQuery);$(function(){$.Health();});