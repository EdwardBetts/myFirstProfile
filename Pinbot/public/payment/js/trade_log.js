!function(t){var a=angular.module("app.trade_log",["app.config","ui.router","app.django","app.utils","app.filter"]),e=angular.injector(["app.django","app.utils"]),r=e.get("tmpl"),o=(e.get("static_url"),e.get("mockTest"),e.get("mockTestWithCoin"),e.get("confirmBox"),e.get("alertBox"),e.get("getModeData")),n=(e.get("postModeData"),e.get("inArray")),i=e.get("pbFunc"),l=e.get("orderPay");a.config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,a,e){var o="/";a.otherwise(o),t.state("tradeLog",{url:"/",templateUrl:r("payment/trade_log.html"),controller:"tradeLog"}),t.state("continuePayOk",{url:"/continue_pay_ok/",templateUrl:r("payment/continue_pay_ok.html"),controller:"continuePayOk"})}]),a.factory("fTradeLog",function(){return{loading:!0,logList:{}}}),a.run(["$rootScope","$templateCache",function(t,a){t.$on("$viewContentLoaded",function(){a.removeAll()})}]),a.controller("tradeLog",["$scope","$http","$state","$templateCache","fTradeLog",function(t,a,e,r,p){t.loading=p.loading,t.loadingThis=!0,t.chgType="all",t.chgStatus="all",t.api_url="/payment/payment_record/",t.api_params=[],t.api_params_values={},t.continuePay=function(r){var o=$(r.currentTarget).attr("data-oid"),n={order_id:o};l(t,e,a,$,n,"continuePayOk","/vip/order/repaid/")},t.listType=function(e,r){var o=$(e.currentTarget);$(".trade-type li").removeClass("active"),o.parent().addClass("active"),t.chgType=r,t.loadingThis=!0,r.toString().match(/^(-1|-2|4|5|7)$/i)?(n("record_type",t.api_params)||t.api_params.push("record_type"),t.api_params_values.record_type=r):"all"==r&&t.api_params.pop("record_type"),i.reloadList(a,t,p)},t.listStatus=function(e,r){var o=$(e.currentTarget);$(".trade-status li").removeClass("active"),o.parent().addClass("active"),t.chgStatus=r,t.loadingThis=!0,r.toString().match(/^(unpay|paid|fail|refund|cancel_refund|refunded|closed|canceled|deleted)$/i)?(n("order_status",t.api_params)||t.api_params.push("order_status"),t.api_params_values.order_status=r):"all"==r&&t.api_params.pop("order_status"),i.reloadList(a,t,p)},t.nextPage=function(e){i.nextPage(a,t,$,p,e)},t.defaultOrderStatus=function(t){return"进行中"!=t&&"交易成功"!=t&&"交易失败"!=t&&"退款中"!=t&&"取消退款"!=t&&"退款成功"!=t&&"已关闭"!=t&&"已取消"!=t&&"已删除"!=t?!0:!1},t.hoverBtn=function(t,a){},o(a,t.api_url,"",function(a){t.loadingThis=!1,p.logList=a,p.loading=!1,t.loading=p.loading,t.logList=p.logList})}]),a.controller("continuePayOk",["$scope","$http","$state","$templateCache","fTradeLog",function(t,a,e,r,o){t.loading=o.loading,t.loadingThis=!0,t.backToLog=function(){document.location.href="/payment/trade_log/"}}]),a.filter("numSign",["$sce",function(t){return function(t){return parseInt(t)>=0?"-"+parseInt(t):"+"+Math.abs(parseInt(t))}}])}();