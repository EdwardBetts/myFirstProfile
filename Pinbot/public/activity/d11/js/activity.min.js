$.loadBgImg=function(d){d=$.extend({attr:"data-bg",loadImg:function(f,g){var h=new Image();h.onload=h.onerror=function(){f.css("backgroundImage","url("+g+")").removeAttr("data-bg");h=null;};h.src=g;},imgList:[],callback:null},d);d.imgList=$("["+d.attr+"]");var e=d.imgList;if(!e.length){return;}for(var c=0;c<e.length;c++){var b=$(e[c]),a=b.attr(d.attr);if(!a){continue;}d.loadImg(b,a);}if(typeof d.callback=="function"){d.callback();}};$.lazyImg=function(a){return new $.lazyImg.prototype.init(a);};$.lazyImg.prototype={constructor:$.lazyImg,imgList:[],loadingList:[],init:function(a){this.setting=$.extend({attr:"data-src",loadType:1,count:30,scrollLimit:30,isLock:false,scrollTop:0,scrollBorder:60,callback:null},a);this.imgList=$("img["+this.setting.attr+"]");window._lazy=this;this.getPositionByBody();this.start();$(window).on("scroll",window,window._lazy.scroll);},start:function(){var d=_lazy.getList();for(var c=0;c<d.length;c++){var a=d[c],b=$(a),e=b.attr(_lazy.setting.attr);_lazy.loadImg(b,e);_lazy.loadingList.push(a);}_lazy.resetImgFromImgList();},getList:function(){var c=[];if(_lazy.setting.loadType==1){var b=$(window).scrollTop(),e=$(window).height();for(var d=0;d<_lazy.imgList.length;d++){var f=$(_lazy.imgList[d]).offset().top;if(f<(b+e+_lazy.setting.scrollBorder)){c.push(_lazy.imgList[d]);_lazy.filterImg(d);}}}else{var a=_lazy.imgList.length>this.setting.count?this.setting.count:_lazy.imgList.length;for(var d=0;d<a.length;d++){c.push(_lazy.imgList[d]);_lazy.filterImg(d);}}return c;},filterImg:function(a){_lazy.imgList[a].top=null;delete _lazy.imgList[a];},loadImg:function(a,c){var b=new Image();b.onload=b.onerror=function(){a.attr("src",c).removeAttr(_lazy.setting.attr);_lazy.clearImgFromLoadingList(a[0]);b=null;};b.src=c;},getPositionByBody:function(){for(var a=0;a<_lazy.imgList.length;a++){var b=$(_lazy.imgList[a]).offset().top;_lazy.imgList[a].top=b;}},resetImgFromImgList:function(){var a=[];for(var b=0;b<_lazy.imgList.length;b++){var c=_lazy.imgList[b];if(c){a.push(c);}}_lazy.imgList=a;_lazy.timmer();},clearImgFromLoadingList:function(a){for(var b=0;b<_lazy.loadingList.length;b++){if(_lazy.loadingList[b]==a){_lazy.loadingList.splice(b,1);return;}}},scroll:function(){if(_lazy.setting.isLock){return false;}_lazy.setting.isLock=true;if(!_lazy.imgList||!_lazy.imgList.length){window._lazy.complete();return false;}_lazy.start();},timmer:function(){var a=function(){_lazy.setting.isLock=false;};tLazy=setTimeout(a,_lazy.setting.scrollLimit);},complete:function(){$(window).off("scroll",window._lazy.scroll);_lazy.setting.isLock=false;tLazy&&clearTimeout(tLazy);if(typeof _lazy.setting.callback=="function"){_lazy.setting.callback();}_lazy=null;}};$.lazyImg.prototype.init.prototype=$.lazyImg.prototype;$.Animate=function(a){return new $.Animate.prototype.init(a);};$.Animate.prototype={constructor:$.Animate,init:function(a){this.setting=$.extend({type:"slide",leftBtn:"#JS_left_btn",rightBtn:"#JS_right_btn",listBox:"#JS_slide_list",cursor:"#JS_ppt_nav",mouseType:"click",current:"active",needPage:false,index:0,autoPlay:true,tag:"li",delay:3000,spendTime:500,fadeEndTime:1000,before:null,after:null},a);if(typeof this.setting.before=="function"){this.setting.before();}var c=$(this.setting.listBox);this.setting.length=c.find(this.setting.tag).length;c.css("width",(c.parent().width())*this.setting.length+"px");if(this.setting.needPage){this.addSwitchPage();}var b=this;if(this.setting.type=="slide"){$(this.setting.leftBtn).on(this.setting.mouseType,function(){clearInterval(window[b.setting.timeOut]);b.prev();b.animate();});$(this.setting.rightBtn).on(this.setting.mouseType,function(){clearInterval(window[b.setting.timeOut]);b.next();b.animate();});}if(this.setting.type=="fade"||this.setting.needPage){$(c).find(this.setting.tag).eq(0).css("opacity",1);$(this.setting.cursor+" a").eq(0).addClass(this.setting.current);$(this.setting.cursor+" a").on(this.setting.mouseType,function(){clearInterval(window[b.setting.timeOut]);b.setting.index=$(this).index();b.getIndex=true;var d=$(this).index(),e=$(this).siblings(".active").index();b.setting.lastIndex=e;$(this).addClass(b.setting.current);$(this).siblings("."+b.setting.current).removeClass(b.setting.current);b.animate();return false;});}if(this.setting.autoPlay){this.timeOut();}},prev:function(){this.setting.index--;this.getIndex=true;},next:function(){this.setting.index++;this.getIndex=true;},timeOut:function(){var b=this;if(!this.setting.timeOut){var a="timeOut"+new Date().getTime().toString("16")+Math.random();this.setting.timeOut=a;}window[this.setting.timeOut]=setInterval(function(){b.animate();},this.setting.delay);},isOuter:function(){if(this.setting.index>=this.setting.length||this.setting.index<0){this.setting.index=0;}},addSwitchPage:function(){if($(this.setting.cursor).html()){return;}var c=$(this.setting.listBox).find("li").length,b="";for(var a=0;a<c;a++){b+='<a href="javascript:;" '+(a==0?'class="active"':"")+">"+(a+1)+"</a>";}$(this.setting.cursor).html(b);},animate:function(){if(!this.getIndex){this.setting.index++;}this.isOuter();if(this.setting.type=="slide"){var a=$(this.setting.listBox).width(),c=-a/this.setting.length*this.setting.index;$(this.setting.listBox).animate({left:c+"px"},this.setting.spendTime);if(this.setting.needPage){$(this.setting.cursor+" a").eq(this.setting.index).addClass(this.setting.current).siblings("."+this.setting.current).removeClass(this.setting.current);}}if(this.setting.type=="fade"){var b=$(this.setting.listBox).find(this.setting.tag),d;if(!this.getIndex){d=this.setting.index-1;}else{d=this.setting.lastIndex;}$(this.setting.cursor+" a").eq(this.setting.index).addClass(this.setting.current).siblings("."+this.setting.current).removeClass(this.setting.current);b.eq(d).animate({opacity:0},this.setting.spendTime);b.eq(this.setting.index).animate({opacity:1},this.setting.fadeEndTime);}if(typeof this.setting.after=="function"){this.setting.after(this.setting.index);}if(this.getIndex){this.getIndex=null;if(this.setting.autoPlay){this.timeOut();}}}};$.Animate.prototype.init.prototype=$.Animate.prototype;$.LayerOut=function(a){return new $.LayerOut.prototype.init(a);};$.LayerOut.prototype={constructor:$.LayerOut,version:"1.0",init:function(a){if($._LayerOut){delete $._LayerOut;}$(".modal-backdrop,.modal").remove();this.setting=a=$.extend({onSubmit:null,onCancel:true,title:"提示",html:"",callback:null},a);$._LayerOut=this;this.getHtml();this.addEvent();if(typeof this.setting.callback=="function"){this.setting.callback();}},getHtml:function(){setting=this.setting;var c='<div class="modal-backdrop fade in"></div><div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: block;"><div class="modal-dialog"><div class="modal-content" id="JS_modal_content">'+(this.setting.title?'<div class="modal-header clearfix"><h4 class="modal-title Left" id="myModalLabel">'+this.setting.title+'</h4><span class="Right">'+(this.setting.date?this.setting.date:"")+"</span></div>":"")+'<div class="modal-body"><p style="padding:20px">'+this.setting.html+"</p></div></div></div></div>";$("body").append(c);var b=$(".modal-dialog"),a=b.height(),d=$(window).height();b.css("marginTop",(d-a)/2+"px");},addEvent:function(){$(".JS_close_layerout").on("click",this.close);$(".JS_submit_layerout").on("click",this.setting.onSubmit);var a=this;$("#myModal").on("click",function(c){c=c||window.event;var b=c.target||c.srcElement;if(c.target==this){a.close();}});},close:function(){$(".modal-backdrop,.modal").remove();delete $._LayerOut;}};$.LayerOut.prototype.init.prototype=$.LayerOut.prototype;$.fn.viewPhoto=function(a){a=$.extend({width:860,contentBox:"#viewPhoto",height:525,showClose:true,attr:"data-src"},a);this.on("click",function(){var g=$(this).attr(a.attr),e;if(g.lastIndexOf){e=g.substring(g.lastIndexOf("."),g.length);}else{var d=g.split(".");e=d[d.length-1];}var f="",c=$(document).height(),b=$(window).scrollTop();$("#viewPhoto,#JS_viewPhoto_bg").remove();f='<div class="viewPhoto" id="viewPhoto" style="width:'+a.width+"px; height:"+a.height+"px; top:"+(b+(($(window).height()-a.height)/2))+'px"><a class="a-icon i-close-viewPhoto" onclick="$(\'#viewPhoto,#JS_viewPhoto_bg\').remove();"></a>';switch(e){case".swf":f+='<object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+a.width+'" height="'+a.height+'"><param name="movie" value="'+g+'" /><param name="quality" value="high" /><param name="wmode" value="opaque" /><param name="swfversion" value="6.0.65.0" /><!-- 此 param 标签提示使用 Flash Player 6.0 r65 和更高版本的用户下载最新版本的 Flash Player。如果您不想让用户看到该提示，请将其删除。 --><param name="expressinstall" value="Scripts/expressInstall.swf" /><!-- 下一个对象标签用于非 IE 浏览器。所以使用 IECC 将其从 IE 隐藏。 --><!--[if !IE]>--><object type="application/x-shockwave-flash" data="'+g+'" width="'+a.width+'" height="'+a.height+'"><!--<![endif]--><param name="quality" value="high" /><param name="wmode" value="opaque" /><param name="swfversion" value="6.0.65.0" /><param name="expressinstall" value="Scripts/expressInstall.swf" /><!-- 浏览器将以下替代内容显示给使用 Flash Player 6.0 和更低版本的用户。 --><div><h4>此页面上的内容需要较新版本的 Adobe Flash Player。</h4><p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="获取 Adobe Flash Player" width="112" height="33" /></a></p></div><!--[if !IE]>--></object><!--<![endif]--></object>';break;case".other":f+="<div>others</div>";break;default:f+='<div><img src="'+g+'" alt="" style="max-width: 100%; margin: 0 auto; display: block;"/></div>';break;}f+='</div><div class="viewPhoto-bg" id="JS_viewPhoto_bg" style="height:'+c+'px" onclick="$(\'#viewPhoto,#JS_viewPhoto_bg\').remove();"></div>';$("body").append(f);return false;});};var setFontSize=function(){var c=$("#JS_desc"),b=c.width(),a=b/9+"px",d=b/7+"px";c.css("fontSize",a).find("strong").css("fontSize",d);};var calPro=function(){var b=0,f=$(window).width(),a=$(window).height(),e=750,d=1335,c;c=750*a/d;$(".section>div").css({width:c+"px",height:a+"px"}).eq(0).css({marginLeft:-(c/2)+"px"});setFontSize();};$(function(){calPro();$(window).on("resize",window,calPro);});